!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="a0c4dfa5-5fcc-427f-9d01-0dcf4aec1f8e",t._sentryDebugIdIdentifier="sentry-dbid-a0c4dfa5-5fcc-427f-9d01-0dcf4aec1f8e")}catch(t){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8680],{44205:function(t,e,r){"use strict";e._O=e.Jq=e.KB=e.u8=e.cv=void 0,e.Ik=e.A9=e.n_=e.gM=void 0;let i=r(46856);function n(t){if(!(t instanceof Uint8Array))throw TypeError("b must be a Uint8Array")}function s(t){return n(t),i.Buffer.from(t.buffer,t.byteOffset,t.length)}class o{constructor(t,e){if(!Number.isInteger(t))throw TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw RangeError("indeterminate span");return this.span}replicate(t){let e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}function a(t,e){return e.property?t+"["+e.property+"]":t}class l extends o{isCount(){throw Error("ExternalLayout is abstract")}}class u extends l{constructor(t,e=0,r){if(!(t instanceof o))throw TypeError("layout must be a Layout");if(!Number.isInteger(e))throw TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof c||this.layout instanceof h}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}class c extends o{constructor(t,e){if(super(t,e),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(t,e=0){return s(t).readUIntLE(e,this.span)}encode(t,e,r=0){return s(e).writeUIntLE(t,r,this.span),this.span}}class h extends o{constructor(t,e){if(super(t,e),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(t,e=0){return s(t).readUIntBE(e,this.span)}encode(t,e,r=0){return s(e).writeUIntBE(t,r,this.span),this.span}}function d(t){let e=Math.floor(t/4294967296);return{hi32:e,lo32:t-4294967296*e}}function f(t,e){return 4294967296*t+e}class p extends o{constructor(t){super(8,t)}decode(t,e=0){let r=s(t),i=r.readUInt32LE(e);return f(r.readUInt32LE(e+4),i)}encode(t,e,r=0){let i=d(t),n=s(e);return n.writeUInt32LE(i.lo32,r),n.writeUInt32LE(i.hi32,r+4),8}}class y extends o{constructor(t){super(8,t)}decode(t,e=0){let r=s(t),i=r.readUInt32LE(e);return f(r.readInt32LE(e+4),i)}encode(t,e,r=0){let i=d(t),n=s(e);return n.writeUInt32LE(i.lo32,r),n.writeInt32LE(i.hi32,r+4),8}}class g extends o{constructor(t,e,r){if(!(t instanceof o))throw TypeError("elementLayout must be a Layout");if(!(e instanceof l&&e.isCount()||Number.isInteger(e)&&0<=e))throw TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;e instanceof l||!(0<t.span)||(i=e*t.span),super(i,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof l&&(i=i.decode(t,e)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let n=0;for(;n<i;)r+=this.elementLayout.getSpan(t,e+r),++n}return r}decode(t,e=0){let r=[],i=0,n=this.count;for(n instanceof l&&(n=n.decode(t,e));i<n;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),i+=1;return r}encode(t,e,r=0){let i=this.elementLayout,n=t.reduce((t,n)=>t+i.encode(n,e,r+t),0);return this.count instanceof l&&this.count.encode(t.length,e,r),n}}class m extends o{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((t,e)=>t&&e instanceof o,!0)))throw TypeError("fields must be array of Layout instances");for(let i of("boolean"==typeof e&&void 0===r&&(r=e,e=void 0),t))if(0>i.span&&void 0===i.property)throw Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((t,e)=>t+e.getSpan(),0)}catch(t){}super(i,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((r,i)=>{let n=i.getSpan(t,e);return e+=n,r+n},0)}catch(t){throw RangeError("indeterminate span")}return r}decode(t,e=0){n(t);let r=this.makeDestinationObject();for(let i of this.fields)if(void 0!==i.property&&(r[i.property]=i.decode(t,e)),e+=i.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){let i=r,n=0,s=0;for(let i of this.fields){let o=i.span;if(s=0<o?o:0,void 0!==i.property){let n=t[i.property];void 0!==n&&(s=i.encode(n,e,r),0>o&&(o=i.getSpan(e,r)))}n=r,r+=o}return n+s-i}fromArray(t){let e=this.makeDestinationObject();for(let r of this.fields)void 0!==r.property&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw TypeError("property must be string");let e=0;for(let r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}class v{constructor(t){this.property=t}decode(t,e){throw Error("UnionDiscriminator is abstract")}encode(t,e,r){throw Error("UnionDiscriminator is abstract")}}class w extends v{constructor(t,e){if(!(t instanceof l&&t.isCount()))throw TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}class b extends o{constructor(t,e,r){let i;if(t instanceof c||t instanceof h)i=new w(new u(t));else if(t instanceof l&&t.isCount())i=new w(t);else if(t instanceof v)i=t;else throw TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===e&&(e=null),!(null===e||e instanceof o))throw TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let n=-1;e&&0<=(n=e.span)&&(t instanceof c||t instanceof h)&&(n+=i.layout.span),super(n,r),this.discriminator=i,this.usesPrefixDiscriminator=t instanceof c||t instanceof h,this.defaultLayout=e,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return s(t)},this.configGetSourceVariant=function(t){s=t.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;let r=this.getVariant(t,e);if(!r)throw Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;let e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(let e in this.registry){let r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw Error("unable to infer src variant")}decode(t,e=0){let r;let i=this.discriminator,n=i.decode(t,e),s=this.registry[n];if(void 0===s){let s=this.defaultLayout,o=0;this.usesPrefixDiscriminator&&(o=i.layout.span),(r=this.makeDestinationObject())[i.property]=n,r[s.property]=s.decode(t,e+o)}else r=s.decode(t,e);return r}encode(t,e,r=0){let i=this.getSourceVariant(t);if(void 0===i){let i=this.discriminator,n=this.defaultLayout,s=0;return this.usesPrefixDiscriminator&&(s=i.layout.span),i.encode(t[i.property],e,r),s+n.encode(t[n.property],e,r+s)}return i.encode(t,e,r)}addVariant(t,e,r){let i=new _(this,t,e,r);return this.registry[t]=i,i}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}class _ extends o{constructor(t,e,r,i){if(!(t instanceof b))throw TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===i&&(i=r,r=null),r){if(!(r instanceof o))throw TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=r.span&&r.span>t.defaultLayout.span)throw Error("variant span exceeds span of containing union");if("string"!=typeof i)throw TypeError("variant must have a String property")}let n=t.span;0>t.span&&0<=(n=r?r.span:0)&&t.usesPrefixDiscriminator&&(n+=t.discriminator.layout.span),super(n,i),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(t,e+r)),r+i}decode(t,e=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let n=i;if(this.layout&&(this.layout.encode(t[this.property],e,r+i),n+=this.layout.getSpan(e,r+i),0<=this.union.span&&n>this.union.span))throw Error("encoded variant overruns containing union");return n}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function E(t){return 0>t&&(t+=4294967296),t}class A extends o{constructor(t,e,r){if(!(t instanceof c||t instanceof h))throw TypeError("word must be a UInt or UIntBE layout");if("string"==typeof e&&void 0===r&&(r=e,e=!1),4<t.span)throw RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let i=0;this._packedSetValue=function(t){return i=E(t),this},this._packedGetValue=function(){return i}}decode(t,e=0){let r=this.makeDestinationObject(),i=this.word.decode(t,e);for(let e of(this._packedSetValue(i),this.fields))void 0!==e.property&&(r[e.property]=e.decode(t));return r}encode(t,e,r=0){let i=this.word.decode(e,r);for(let e of(this._packedSetValue(i),this.fields))if(void 0!==e.property){let r=t[e.property];void 0!==r&&e.encode(r)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){let r=new S(this,t,e);return this.fields.push(r),r}addBoolean(t){let e=new x(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!=typeof t)throw TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}}class S{constructor(t,e,r){if(!(t instanceof A))throw TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw TypeError("bits must be positive integer");let i=8*t.span,n=t.fields.reduce((t,e)=>t+e.bits,0);if(e+n>i)throw Error("bits too long for span remainder ("+(i-n)+" of "+i+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=n,this.container.msb&&(this.start=i-n-e),this.wordMask=E(this.valueMask<<this.start),this.property=r}decode(t,e){return E(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(t){if("number"!=typeof t||!Number.isInteger(t)||t!==E(t&this.valueMask))throw TypeError(a("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let e=this.container._packedGetValue(),r=E(t<<this.start);this.container._packedSetValue(E(e&~this.wordMask)|r)}}class x extends S{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){"boolean"==typeof t&&(t=+t),super.encode(t)}}class T extends o{constructor(t,e){if(!(t instanceof l&&t.isCount()||Number.isInteger(t)&&0<=t))throw TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof l||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),s(t).slice(e,e+r)}encode(t,e,r){let i=this.length;if(this.length instanceof l&&(i=t.length),!(t instanceof Uint8Array&&i===t.length))throw TypeError(a("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>e.length)throw RangeError("encoding overruns Uint8Array");let n=s(t);return s(e).write(n.toString("hex"),r,i,"hex"),this.length instanceof l&&this.length.encode(i,e,r),i}}e.cv=(t,e,r)=>new u(t,e,r),e.u8=t=>new c(1,t),e.KB=t=>new c(2,t),e.Jq=t=>new c(4,t),e._O=t=>new p(t),e.gM=t=>new y(t),e.n_=(t,e,r)=>new m(t,e,r),e.A9=(t,e,r)=>new g(t,e,r),e.Ik=(t,e)=>new T(t,e)},72618:function(t,e,r){"use strict";var i=r(98741).Buffer;t.exports=function(t){if(t.length>=255)throw TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(255!==e[o])throw TypeError(s+" is ambiguous");e[o]=n}var a=t.length,l=t.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function h(t){if("string"!=typeof t)throw TypeError("Expected String");if(0===t.length)return i.alloc(0);for(var r=0,n=0,s=0;t[r]===l;)n++,r++;for(var o=(t.length-r)*u+1>>>0,c=new Uint8Array(o);r<t.length;){var h=e[t.charCodeAt(r)];if(255===h)return;for(var d=0,f=o-1;(0!==h||d<s)&&-1!==f;f--,d++)h+=a*c[f]>>>0,c[f]=h%256>>>0,h=h/256>>>0;if(0!==h)throw Error("Non-zero carry");s=d,r++}for(var p=o-s;p!==o&&0===c[p];)p++;var y=i.allocUnsafe(n+(o-p));y.fill(0,0,n);for(var g=n;p!==o;)y[g++]=c[p++];return y}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=i.from(e)),!i.isBuffer(e))throw TypeError("Expected Buffer");if(0===e.length)return"";for(var r=0,n=0,s=0,o=e.length;s!==o&&0===e[s];)s++,r++;for(var u=(o-s)*c+1>>>0,h=new Uint8Array(u);s!==o;){for(var d=e[s],f=0,p=u-1;(0!==d||f<n)&&-1!==p;p--,f++)d+=256*h[p]>>>0,h[p]=d%a>>>0,d=d/a>>>0;if(0!==d)throw Error("Non-zero carry");n=f,s++}for(var y=u-n;y!==u&&0===h[y];)y++;for(var g=l.repeat(r);y<u;++y)g+=t.charAt(h[y]);return g},decodeUnsafe:h,decode:function(t){var e=h(t);if(e)return e;throw Error("Non-base"+a+" character")}}}},44992:function(t){"use strict";t.exports=function(t){if(t.length>=255)throw TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var i=0;i<t.length;i++){var n=t.charAt(i),s=n.charCodeAt(0);if(255!==e[s])throw TypeError(n+" is ambiguous");e[s]=i}var o=t.length,a=t.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function c(t){if("string"!=typeof t)throw TypeError("Expected String");if(0===t.length)return new Uint8Array;for(var r=0,i=0,n=0;t[r]===a;)i++,r++;for(var s=(t.length-r)*l+1>>>0,u=new Uint8Array(s);t[r];){var c=e[t.charCodeAt(r)];if(255===c)return;for(var h=0,d=s-1;(0!==c||h<n)&&-1!==d;d--,h++)c+=o*u[d]>>>0,u[d]=c%256>>>0,c=c/256>>>0;if(0!==c)throw Error("Non-zero carry");n=h,r++}for(var f=s-n;f!==s&&0===u[f];)f++;for(var p=new Uint8Array(i+(s-f)),y=i;f!==s;)p[y++]=u[f++];return p}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===e.length)return"";for(var r=0,i=0,n=0,s=e.length;n!==s&&0===e[n];)n++,r++;for(var l=(s-n)*u+1>>>0,c=new Uint8Array(l);n!==s;){for(var h=e[n],d=0,f=l-1;(0!==h||d<i)&&-1!==f;f--,d++)h+=256*c[f]>>>0,c[f]=h%o>>>0,h=h/o>>>0;if(0!==h)throw Error("Non-zero carry");i=d,n++}for(var p=l-i;p!==l&&0===c[p];)p++;for(var y=a.repeat(r);p<l;++p)y+=t.charAt(c[p]);return y},decodeUnsafe:c,decode:function(t){var e=c(t);if(e)return e;throw Error("Non-base"+o+" character")}}}},29877:function(t,e,r){"use strict";var i=r(46856).Buffer;e.oU=function(t){{let e=i.from(t);e.reverse();let r=e.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}},e.Q5=function(t){{let e=t.toString("hex");return 0===e.length?BigInt(0):BigInt(`0x${e}`)}},e.k$=function(t,e){{let r=t.toString(16),n=i.from(r.padStart(2*e,"0").slice(0,2*e),"hex");return n.reverse(),n}},e.zP=function(t,e){{let r=t.toString(16);return i.from(r.padStart(2*e,"0").slice(0,2*e),"hex")}}},33741:function(t,e,r){"use strict";var i=r(46856).Buffer,n=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__decorate||function(t,e,r,i){var n,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(s<3?n(o):s>3?n(e,r,o):n(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return s(e,t),e},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.deserializeUnchecked=e.deserialize=e.serialize=e.BinaryReader=e.BinaryWriter=e.BorshError=e.baseDecode=e.baseEncode=void 0;let u=l(r(80306)),c=l(r(95388)),h=a(r(46068)),d=new("function"!=typeof TextDecoder?h.TextDecoder:TextDecoder)("utf-8",{fatal:!0});e.baseEncode=function(t){return"string"==typeof t&&(t=i.from(t,"utf8")),c.default.encode(i.from(t))},e.baseDecode=function(t){return i.from(c.default.decode(t))};class f extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}e.BorshError=f;class p{constructor(){this.buf=i.alloc(1024),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=i.concat([this.buf,i.alloc(1024)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(i.from(new u.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(i.from(new u.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(i.from(new u.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(i.from(new u.default(t).toArray("le",64)))}writeBuffer(t){this.buf=i.concat([i.from(this.buf.subarray(0,this.length)),t,i.alloc(1024)]),this.length+=t.length}writeString(t){this.maybeResize();let e=i.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(i.from(t))}writeArray(t,e){for(let r of(this.maybeResize(),this.writeU32(t.length),t))this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}function y(t,e,r){let i=r.value;r.value=function(...t){try{return i.apply(this,t)}catch(t){if(t instanceof RangeError&&["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(t.code)>=0)throw new f("Reached the end of buffer when deserializing");throw t}}}e.BinaryWriter=p;class g{constructor(t){this.buf=t,this.offset=0}readU8(){let t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){let t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){let t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){let t=this.readBuffer(8);return new u.default(t,"le")}readU128(){let t=this.readBuffer(16);return new u.default(t,"le")}readU256(){let t=this.readBuffer(32);return new u.default(t,"le")}readU512(){let t=this.readBuffer(64);return new u.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new f(`Expected buffer length ${t} isn't within bounds`);let e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){let t=this.readU32(),e=this.readBuffer(t);try{return d.decode(e)}catch(t){throw new f(`Error decoding UTF-8 string: ${t}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){let e=this.readU32(),r=[];for(let i=0;i<e;++i)r.push(t());return r}}function m(t){return t.charAt(0).toUpperCase()+t.slice(1)}function v(t,e,r,i,n){try{if("string"==typeof i)n[`write${m(i)}`](r);else if(i instanceof Array){if("number"==typeof i[0]){if(r.length!==i[0])throw new f(`Expecting byte array of length ${i[0]}, but got ${r.length} bytes`);n.writeFixedArray(r)}else if(2===i.length&&"number"==typeof i[1]){if(r.length!==i[1])throw new f(`Expecting byte array of length ${i[1]}, but got ${r.length} bytes`);for(let e=0;e<i[1];e++)v(t,null,r[e],i[0],n)}else n.writeArray(r,r=>{v(t,e,r,i[0],n)})}else if(void 0!==i.kind)switch(i.kind){case"option":null==r?n.writeU8(0):(n.writeU8(1),v(t,e,r,i.type,n));break;case"map":n.writeU32(r.size),r.forEach((r,s)=>{v(t,e,s,i.key,n),v(t,e,r,i.value,n)});break;default:throw new f(`FieldType ${i} unrecognized`)}else w(t,r,n)}catch(t){throw t instanceof f&&t.addToFieldPath(e),t}}function w(t,e,r){if("function"==typeof e.borshSerialize){e.borshSerialize(r);return}let i=t.get(e.constructor);if(!i)throw new f(`Class ${e.constructor.name} is missing in schema`);if("struct"===i.kind)i.fields.map(([i,n])=>{v(t,i,e[i],n,r)});else if("enum"===i.kind){let n=e[i.field];for(let s=0;s<i.values.length;++s){let[o,a]=i.values[s];if(o===n){r.writeU8(s),v(t,o,e[o],a,r);break}}}else throw new f(`Unexpected schema kind: ${i.kind} for ${e.constructor.name}`)}function b(t,e,r,i){try{if("string"==typeof r)return i[`read${m(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return i.readFixedArray(r[0]);if("number"!=typeof r[1])return i.readArray(()=>b(t,e,r[0],i));{let e=[];for(let n=0;n<r[1];n++)e.push(b(t,null,r[0],i));return e}}if("option"===r.kind){if(i.readU8())return b(t,e,r.type,i);return}if("map"===r.kind){let n=new Map,s=i.readU32();for(let o=0;o<s;o++){let s=b(t,e,r.key,i),o=b(t,e,r.value,i);n.set(s,o)}return n}return _(t,r,i)}catch(t){throw t instanceof f&&t.addToFieldPath(e),t}}function _(t,e,r){if("function"==typeof e.borshDeserialize)return e.borshDeserialize(r);let i=t.get(e);if(!i)throw new f(`Class ${e.name} is missing in schema`);if("struct"===i.kind){let i={};for(let[n,s]of t.get(e).fields)i[n]=b(t,n,s,r);return new e(i)}if("enum"===i.kind){let n=r.readU8();if(n>=i.values.length)throw new f(`Enum index: ${n} is out of range`);let[s,o]=i.values[n],a=b(t,s,o,r);return new e({[s]:a})}throw new f(`Unexpected schema kind: ${i.kind} for ${e.constructor.name}`)}o([y],g.prototype,"readU8",null),o([y],g.prototype,"readU16",null),o([y],g.prototype,"readU32",null),o([y],g.prototype,"readU64",null),o([y],g.prototype,"readU128",null),o([y],g.prototype,"readU256",null),o([y],g.prototype,"readU512",null),o([y],g.prototype,"readString",null),o([y],g.prototype,"readFixedArray",null),o([y],g.prototype,"readArray",null),e.BinaryReader=g,e.serialize=function(t,e,r=p){let i=new r;return w(t,e,i),i.toArray()},e.deserialize=function(t,e,r,i=g){let n=new i(r),s=_(t,e,n);if(n.offset<r.length)throw new f(`Unexpected ${r.length-n.offset} bytes after deserialized data`);return s},e.deserializeUnchecked=function(t,e,r,i=g){return _(t,e,new i(r))}},95388:function(t,e,r){var i=r(72618);t.exports=i("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},32489:function(t,e,r){let i=r(44992);t.exports=i("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},96453:function(t,e){var r="undefined"!=typeof self?self:this,i=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();(function(t){var e={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};if(e.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw TypeError("Invalid character in header field name");return t.toLowerCase()}function o(t){return"string"!=typeof t&&(t=String(t)),t}function a(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r}function l(t){this.map={},t instanceof l?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){if(t.bodyUsed)return Promise.reject(TypeError("Already read"));t.bodyUsed=!0}function c(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function h(t){var e=new FileReader,r=c(e);return e.readAsArrayBuffer(t),r}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t){if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else{var r;e.arrayBuffer&&e.blob&&(r=t)&&DataView.prototype.isPrototypeOf(r)?(this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):e.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||n(t))?this._bodyArrayBuffer=d(t):this._bodyText=t=Object.prototype.toString.call(t)}}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var t,e,r,i=u(this);if(i)return i;if(this._bodyBlob)return t=this._bodyBlob,r=c(e=new FileReader),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=Array(e.length),i=0;i<e.length;i++)r[i]=String.fromCharCode(e[i]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},e.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(t,e){t=s(t),e=o(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},l.prototype.delete=function(t){delete this.map[s(t)]},l.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},l.prototype.set=function(t,e){this.map[s(t)]=o(e)},l.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},l.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),a(t)},l.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),a(t)},l.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),a(t)},e.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(t,e){var r,i,n=(e=e||{}).body;if(t instanceof y){if(t.bodyUsed)throw TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new l(e.headers)),this.method=(i=(r=e.method||this.method||"GET").toUpperCase(),p.indexOf(i)>-1?i:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function g(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(n))}}),e}function m(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new l(e.headers),this.url=e.url||"",this._initBody(t)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},f.call(y.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var v=[301,302,303,307,308];m.redirect=function(t,e){if(-1===v.indexOf(e))throw RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.DOMException=i.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function w(r,i){return new Promise(function(n,s){var o=new y(r,i);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new l,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),i=r.shift().trim();if(i){var n=r.join(":").trim();e.append(i,n)}}),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL"),n(new m("response"in a?a.response:a.responseText,r))},a.onerror=function(){s(TypeError("Network request failed"))},a.ontimeout=function(){s(TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&e.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),o.signal&&(o.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",u)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})}w.polyfill=!0,i.fetch||(i.fetch=w,i.Headers=l,i.Request=y,i.Response=m),t.Headers=l,t.Request=y,t.Response=m,t.fetch=w,Object.defineProperty(t,"__esModule",{value:!0})})({}),i.fetch.ponyfill=!0,delete i.fetch.polyfill,(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e},83879:function(t){"use strict";var e=Object.prototype.hasOwnProperty,r="~";function i(){}function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,i,s,o){if("function"!=typeof i)throw TypeError("The listener must be a function");var a=new n(i,s||t,o),l=r?r+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1)),a.prototype.eventNames=function(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)e.call(t,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=Array(s);n<s;n++)o[n]=i[n].fn;return o},a.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,n,s,o){var a=r?r+t:t;if(!this._events[a])return!1;var l,u,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,n),!0;case 5:return c.fn.call(c.context,e,i,n,s),!0;case 6:return c.fn.call(c.context,e,i,n,s,o),!0}for(u=1,l=Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,i);break;case 4:c[u].fn.call(c[u].context,e,i,n);break;default:if(!l)for(d=1,l=Array(h-1);d<h;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},a.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,i,n){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||n&&!a.once||i&&a.context!==i||o(this,s);else{for(var l=0,u=[],c=a.length;l<c;l++)(a[l].fn!==e||n&&!a[l].once||i&&a[l].context!==i)&&u.push(a[l]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a},8585:function(t,e,r){"use strict";let i=r(93048).v4,n=r(44349),s=function(t,e){if(!(this instanceof s))return new s(t,e);e||(e={}),this.options={reviver:void 0!==e.reviver?e.reviver:null,replacer:void 0!==e.replacer?e.replacer:null,generator:void 0!==e.generator?e.generator:function(){return i()},version:void 0!==e.version?e.version:2,notificationIdNull:"boolean"==typeof e.notificationIdNull&&e.notificationIdNull},this.callServer=t};t.exports=s,s.prototype.request=function(t,e,r,i){let s;let o=this,a=null,l=Array.isArray(t)&&"function"==typeof e;if(1===this.options.version&&l)throw TypeError("JSON-RPC 1.0 does not support batching");let u=!l&&t&&"object"==typeof t&&"function"==typeof e;if(l||u)i=e,a=t;else{"function"==typeof r&&(i=r,r=void 0);let s="function"==typeof i;try{a=n(t,e,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(t){if(s)return i(t);throw t}if(!s)return a}try{s=JSON.stringify(a,this.options.replacer)}catch(t){return i(t)}return this.callServer(s,function(t,e){o._parseResponse(t,e,i)}),a},s.prototype._parseResponse=function(t,e,r){let i;if(t){r(t);return}if(!e)return r();try{i=JSON.parse(e,this.options.reviver)}catch(t){return r(t)}if(3===r.length){if(!Array.isArray(i))return r(null,i.error,i.result);{let t=function(t){return void 0!==t.error};return r(null,i.filter(t),i.filter(function(e){return!t(e)}))}}r(null,i)}},44349:function(t,e,r){"use strict";let i=r(93048).v4;t.exports=function(t,e,r,n){if("string"!=typeof t)throw TypeError(t+" must be a string");let s="number"==typeof(n=n||{}).version?n.version:2;if(1!==s&&2!==s)throw TypeError(s+" must be 1 or 2");let o={method:t};if(2===s&&(o.jsonrpc="2.0"),e){if("object"!=typeof e&&!Array.isArray(e))throw TypeError(e+" must be an object, array or omitted");o.params=e}if(void 0===r){let t="function"==typeof n.generator?n.generator:function(){return i()};o.id=t(o,n)}else 2===s&&null===r?n.notificationIdNull&&(o.id=null):o.id=r;return o}},98741:function(t,e,r){var i=r(46856),n=i.Buffer;function s(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=i:(s(i,e),e.Buffer=o),o.prototype=Object.create(n.prototype),s(n,o),o.from=function(t,e,r){if("number"==typeof t)throw TypeError("Argument must not be a number");return n(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},o.allocUnsafe=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return n(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return i.SlowBuffer(t)}},46068:function(t,e){"use strict";function r(t,e,r){return e<=t&&t<=r}function i(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function n(t){this.tokens=[].slice.call(t)}function s(t,e){if(t)throw TypeError("Decoder error");return e||65533}n.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(;t.length;)this.tokens.push(t.shift());else this.tokens.push(t)}};var o="utf-8";function a(t,e){if(!(this instanceof a))return new a(t,e);if((t=void 0!==t?String(t).toLowerCase():o)!==o)throw Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function l(t,e){if(!(this instanceof l))return new l(t,e);if((t=void 0!==t?String(t).toLowerCase():o)!==o)throw Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function u(t){var e=t.fatal,i=0,n=0,o=0,a=128,l=191;this.handler=function(t,u){if(-1===u&&0!==o)return o=0,s(e);if(-1===u)return -1;if(0===o){if(r(u,0,127))return u;if(r(u,194,223))o=1,i=u-192;else if(r(u,224,239))224===u&&(a=160),237===u&&(l=159),o=2,i=u-224;else{if(!r(u,240,244))return s(e);240===u&&(a=144),244===u&&(l=143),o=3,i=u-240}return i<<=6*o,null}if(!r(u,a,l))return i=o=n=0,a=128,l=191,t.prepend(u),s(e);if(a=128,l=191,n+=1,i+=u-128<<6*(o-n),n!==o)return null;var c=i;return i=o=n=0,c}}function c(t){t.fatal,this.handler=function(t,e){if(-1===e)return -1;if(r(e,0,127))return e;r(e,128,2047)?(i=1,n=192):r(e,2048,65535)?(i=2,n=224):r(e,65536,1114111)&&(i=3,n=240);for(var i,n,s=[(e>>6*i)+n];i>0;){var o=e>>6*(i-1);s.push(128|63&o),i-=1}return s}}a.prototype={decode:function(t,e){r="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=i(e),this._streaming||(this._decoder=new u({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var r,s,o=new n(r),a=[];!o.endOfStream()&&-1!==(s=this._decoder.handler(o,o.read()));)null!==s&&(Array.isArray(s)?a.push.apply(a,s):a.push(s));if(!this._streaming){do{if(-1===(s=this._decoder.handler(o,o.read())))break;if(null===s)continue;Array.isArray(s)?a.push.apply(a,s):a.push(s)}while(!o.endOfStream());this._decoder=null}return!a.length||-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===a[0]?(this._BOMseen=!0,a.shift()):this._BOMseen=!0),function(t){for(var e="",r=0;r<t.length;++r){var i=t[r];i<=65535?e+=String.fromCharCode(i):(i-=65536,e+=String.fromCharCode((i>>10)+55296,(1023&i)+56320))}return e}(a)}},l.prototype={encode:function(t,e){t=t?String(t):"",e=i(e),this._streaming||(this._encoder=new c(this._options)),this._streaming=!!e.stream;for(var r,s=[],o=new n(function(t){for(var e=String(t),r=e.length,i=0,n=[];i<r;){var s=e.charCodeAt(i);if(s<55296||s>57343)n.push(s);else if(56320<=s&&s<=57343)n.push(65533);else if(55296<=s&&s<=56319){if(i===r-1)n.push(65533);else{var o=t.charCodeAt(i+1);if(56320<=o&&o<=57343){var a=1023&s,l=1023&o;n.push(65536+(a<<10)+l),i+=1}else n.push(65533)}}i+=1}return n}(t));!o.endOfStream()&&-1!==(r=this._encoder.handler(o,o.read()));)Array.isArray(r)?s.push.apply(s,r):s.push(r);if(!this._streaming){for(;-1!==(r=this._encoder.handler(o,o.read()));)Array.isArray(r)?s.push.apply(s,r):s.push(r);this._encoder=null}return new Uint8Array(s)}},e.TextEncoder=l,e.TextDecoder=a},21678:function(t,e,r){!function(t){"use strict";var e,i=function(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;e++)r[e]=t[e];return r},n=function(){throw Error("no PRNG")},s=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var a=i(),l=i([1]),u=i([56129,1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function y(t,e,r,i){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r,t[e+4]=i>>24&255,t[e+5]=i>>16&255,t[e+6]=i>>8&255,t[e+7]=255&i}function g(t,e,r,i,n){var s,o=0;for(s=0;s<n;s++)o|=t[e+s]^r[i+s];return(1&o-1>>>8)-1}function m(t,e,r,i){return g(t,e,r,i,16)}function v(t,e,r,i){return g(t,e,r,i,32)}function w(t,e,r,i){!function(t,e,r,i){for(var n,s=255&i[0]|(255&i[1])<<8|(255&i[2])<<16|(255&i[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,l=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,c=255&i[4]|(255&i[5])<<8|(255&i[6])<<16|(255&i[7])<<24,h=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,d=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,f=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,y=255&i[8]|(255&i[9])<<8|(255&i[10])<<16|(255&i[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,b=255&i[12]|(255&i[13])<<8|(255&i[14])<<16|(255&i[15])<<24,_=s,E=o,A=a,S=l,x=u,T=c,k=h,O=d,I=f,P=p,U=y,B=g,R=m,N=v,C=w,L=b,q=0;q<20;q+=2)x^=(n=_+R|0)<<7|n>>>25,I^=(n=x+_|0)<<9|n>>>23,R^=(n=I+x|0)<<13|n>>>19,_^=(n=R+I|0)<<18|n>>>14,P^=(n=T+E|0)<<7|n>>>25,N^=(n=P+T|0)<<9|n>>>23,E^=(n=N+P|0)<<13|n>>>19,T^=(n=E+N|0)<<18|n>>>14,C^=(n=U+k|0)<<7|n>>>25,A^=(n=C+U|0)<<9|n>>>23,k^=(n=A+C|0)<<13|n>>>19,U^=(n=k+A|0)<<18|n>>>14,S^=(n=L+B|0)<<7|n>>>25,O^=(n=S+L|0)<<9|n>>>23,B^=(n=O+S|0)<<13|n>>>19,L^=(n=B+O|0)<<18|n>>>14,E^=(n=_+S|0)<<7|n>>>25,A^=(n=E+_|0)<<9|n>>>23,S^=(n=A+E|0)<<13|n>>>19,_^=(n=S+A|0)<<18|n>>>14,k^=(n=T+x|0)<<7|n>>>25,O^=(n=k+T|0)<<9|n>>>23,x^=(n=O+k|0)<<13|n>>>19,T^=(n=x+O|0)<<18|n>>>14,B^=(n=U+P|0)<<7|n>>>25,I^=(n=B+U|0)<<9|n>>>23,P^=(n=I+B|0)<<13|n>>>19,U^=(n=P+I|0)<<18|n>>>14,R^=(n=L+C|0)<<7|n>>>25,N^=(n=R+L|0)<<9|n>>>23,C^=(n=N+R|0)<<13|n>>>19,L^=(n=C+N|0)<<18|n>>>14;_=_+s|0,E=E+o|0,A=A+a|0,S=S+l|0,x=x+u|0,T=T+c|0,k=k+h|0,O=O+d|0,I=I+f|0,P=P+p|0,U=U+y|0,B=B+g|0,R=R+m|0,N=N+v|0,C=C+w|0,L=L+b|0,t[0]=_>>>0&255,t[1]=_>>>8&255,t[2]=_>>>16&255,t[3]=_>>>24&255,t[4]=E>>>0&255,t[5]=E>>>8&255,t[6]=E>>>16&255,t[7]=E>>>24&255,t[8]=A>>>0&255,t[9]=A>>>8&255,t[10]=A>>>16&255,t[11]=A>>>24&255,t[12]=S>>>0&255,t[13]=S>>>8&255,t[14]=S>>>16&255,t[15]=S>>>24&255,t[16]=x>>>0&255,t[17]=x>>>8&255,t[18]=x>>>16&255,t[19]=x>>>24&255,t[20]=T>>>0&255,t[21]=T>>>8&255,t[22]=T>>>16&255,t[23]=T>>>24&255,t[24]=k>>>0&255,t[25]=k>>>8&255,t[26]=k>>>16&255,t[27]=k>>>24&255,t[28]=O>>>0&255,t[29]=O>>>8&255,t[30]=O>>>16&255,t[31]=O>>>24&255,t[32]=I>>>0&255,t[33]=I>>>8&255,t[34]=I>>>16&255,t[35]=I>>>24&255,t[36]=P>>>0&255,t[37]=P>>>8&255,t[38]=P>>>16&255,t[39]=P>>>24&255,t[40]=U>>>0&255,t[41]=U>>>8&255,t[42]=U>>>16&255,t[43]=U>>>24&255,t[44]=B>>>0&255,t[45]=B>>>8&255,t[46]=B>>>16&255,t[47]=B>>>24&255,t[48]=R>>>0&255,t[49]=R>>>8&255,t[50]=R>>>16&255,t[51]=R>>>24&255,t[52]=N>>>0&255,t[53]=N>>>8&255,t[54]=N>>>16&255,t[55]=N>>>24&255,t[56]=C>>>0&255,t[57]=C>>>8&255,t[58]=C>>>16&255,t[59]=C>>>24&255,t[60]=L>>>0&255,t[61]=L>>>8&255,t[62]=L>>>16&255,t[63]=L>>>24&255}(t,e,r,i)}function b(t,e,r,i){!function(t,e,r,i){for(var n,s=255&i[0]|(255&i[1])<<8|(255&i[2])<<16|(255&i[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,l=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,c=255&i[4]|(255&i[5])<<8|(255&i[6])<<16|(255&i[7])<<24,h=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,d=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,f=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,y=255&i[8]|(255&i[9])<<8|(255&i[10])<<16|(255&i[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,b=255&i[12]|(255&i[13])<<8|(255&i[14])<<16|(255&i[15])<<24,_=s,E=o,A=a,S=l,x=u,T=c,k=h,O=d,I=f,P=p,U=y,B=g,R=m,N=v,C=w,L=b,q=0;q<20;q+=2)x^=(n=_+R|0)<<7|n>>>25,I^=(n=x+_|0)<<9|n>>>23,R^=(n=I+x|0)<<13|n>>>19,_^=(n=R+I|0)<<18|n>>>14,P^=(n=T+E|0)<<7|n>>>25,N^=(n=P+T|0)<<9|n>>>23,E^=(n=N+P|0)<<13|n>>>19,T^=(n=E+N|0)<<18|n>>>14,C^=(n=U+k|0)<<7|n>>>25,A^=(n=C+U|0)<<9|n>>>23,k^=(n=A+C|0)<<13|n>>>19,U^=(n=k+A|0)<<18|n>>>14,S^=(n=L+B|0)<<7|n>>>25,O^=(n=S+L|0)<<9|n>>>23,B^=(n=O+S|0)<<13|n>>>19,L^=(n=B+O|0)<<18|n>>>14,E^=(n=_+S|0)<<7|n>>>25,A^=(n=E+_|0)<<9|n>>>23,S^=(n=A+E|0)<<13|n>>>19,_^=(n=S+A|0)<<18|n>>>14,k^=(n=T+x|0)<<7|n>>>25,O^=(n=k+T|0)<<9|n>>>23,x^=(n=O+k|0)<<13|n>>>19,T^=(n=x+O|0)<<18|n>>>14,B^=(n=U+P|0)<<7|n>>>25,I^=(n=B+U|0)<<9|n>>>23,P^=(n=I+B|0)<<13|n>>>19,U^=(n=P+I|0)<<18|n>>>14,R^=(n=L+C|0)<<7|n>>>25,N^=(n=R+L|0)<<9|n>>>23,C^=(n=N+R|0)<<13|n>>>19,L^=(n=C+N|0)<<18|n>>>14;t[0]=_>>>0&255,t[1]=_>>>8&255,t[2]=_>>>16&255,t[3]=_>>>24&255,t[4]=T>>>0&255,t[5]=T>>>8&255,t[6]=T>>>16&255,t[7]=T>>>24&255,t[8]=U>>>0&255,t[9]=U>>>8&255,t[10]=U>>>16&255,t[11]=U>>>24&255,t[12]=L>>>0&255,t[13]=L>>>8&255,t[14]=L>>>16&255,t[15]=L>>>24&255,t[16]=k>>>0&255,t[17]=k>>>8&255,t[18]=k>>>16&255,t[19]=k>>>24&255,t[20]=O>>>0&255,t[21]=O>>>8&255,t[22]=O>>>16&255,t[23]=O>>>24&255,t[24]=I>>>0&255,t[25]=I>>>8&255,t[26]=I>>>16&255,t[27]=I>>>24&255,t[28]=P>>>0&255,t[29]=P>>>8&255,t[30]=P>>>16&255,t[31]=P>>>24&255}(t,e,r,i)}var _=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function E(t,e,r,i,n,s,o){var a,l,u=new Uint8Array(16),c=new Uint8Array(64);for(l=0;l<16;l++)u[l]=0;for(l=0;l<8;l++)u[l]=s[l];for(;n>=64;){for(w(c,u,o,_),l=0;l<64;l++)t[e+l]=r[i+l]^c[l];for(l=8,a=1;l<16;l++)a=a+(255&u[l])|0,u[l]=255&a,a>>>=8;n-=64,e+=64,i+=64}if(n>0)for(w(c,u,o,_),l=0;l<n;l++)t[e+l]=r[i+l]^c[l];return 0}function A(t,e,r,i,n){var s,o,a=new Uint8Array(16),l=new Uint8Array(64);for(o=0;o<16;o++)a[o]=0;for(o=0;o<8;o++)a[o]=i[o];for(;r>=64;){for(w(l,a,n,_),o=0;o<64;o++)t[e+o]=l[o];for(o=8,s=1;o<16;o++)s=s+(255&a[o])|0,a[o]=255&s,s>>>=8;r-=64,e+=64}if(r>0)for(w(l,a,n,_),o=0;o<r;o++)t[e+o]=l[o];return 0}function S(t,e,r,i,n){var s=new Uint8Array(32);b(s,i,n,_);for(var o=new Uint8Array(8),a=0;a<8;a++)o[a]=i[a+16];return A(t,e,r,o,s)}function x(t,e,r,i,n,s,o){var a=new Uint8Array(32);b(a,s,o,_);for(var l=new Uint8Array(8),u=0;u<8;u++)l[u]=s[u+16];return E(t,e,r,i,n,l,a)}var T=function(t){var e,r,i,n,s,o,a,l;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,r=255&t[2]|(255&t[3])<<8,this.r[1]=(e>>>13|r<<3)&8191,i=255&t[4]|(255&t[5])<<8,this.r[2]=(r>>>10|i<<6)&7939,n=255&t[6]|(255&t[7])<<8,this.r[3]=(i>>>7|n<<9)&8191,s=255&t[8]|(255&t[9])<<8,this.r[4]=(n>>>4|s<<12)&255,this.r[5]=s>>>1&8190,o=255&t[10]|(255&t[11])<<8,this.r[6]=(s>>>14|o<<2)&8191,a=255&t[12]|(255&t[13])<<8,this.r[7]=(o>>>11|a<<5)&8065,l=255&t[14]|(255&t[15])<<8,this.r[8]=(a>>>8|l<<8)&8191,this.r[9]=l>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};function k(t,e,r,i,n,s){var o=new T(s);return o.update(r,i,n),o.finish(t,e),0}function O(t,e,r,i,n,s){var o=new Uint8Array(16);return k(o,0,r,i,n,s),m(t,e,o,0)}function I(t,e,r,i,n){var s;if(r<32)return -1;for(x(t,0,e,0,r,i,n),k(t,16,t,32,r-32,t),s=0;s<16;s++)t[s]=0;return 0}function P(t,e,r,i,n){var s,o=new Uint8Array(32);if(r<32||(S(o,0,32,i,n),0!==O(e,16,e,32,r-32,o)))return -1;for(x(t,0,e,0,r,i,n),s=0;s<32;s++)t[s]=0;return 0}function U(t,e){var r;for(r=0;r<16;r++)t[r]=0|e[r]}function B(t){var e,r,i=1;for(e=0;e<16;e++)i=Math.floor((r=t[e]+i+65535)/65536),t[e]=r-65536*i;t[0]+=i-1+37*(i-1)}function R(t,e,r){for(var i,n=~(r-1),s=0;s<16;s++)i=n&(t[s]^e[s]),t[s]^=i,e[s]^=i}function N(t,e){var r,n,s,o=i(),a=i();for(r=0;r<16;r++)a[r]=e[r];for(B(a),B(a),B(a),n=0;n<2;n++){for(r=1,o[0]=a[0]-65517;r<15;r++)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),s=o[15]>>16&1,o[14]&=65535,R(a,o,1-s)}for(r=0;r<16;r++)t[2*r]=255&a[r],t[2*r+1]=a[r]>>8}function C(t,e){var r=new Uint8Array(32),i=new Uint8Array(32);return N(r,t),N(i,e),v(r,0,i,0)}function L(t){var e=new Uint8Array(32);return N(e,t),1&e[0]}function q(t,e){var r;for(r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function M(t,e,r){for(var i=0;i<16;i++)t[i]=e[i]+r[i]}function K(t,e,r){for(var i=0;i<16;i++)t[i]=e[i]-r[i]}function D(t,e,r){var i,n,s=0,o=0,a=0,l=0,u=0,c=0,h=0,d=0,f=0,p=0,y=0,g=0,m=0,v=0,w=0,b=0,_=0,E=0,A=0,S=0,x=0,T=0,k=0,O=0,I=0,P=0,U=0,B=0,R=0,N=0,C=0,L=r[0],q=r[1],M=r[2],K=r[3],D=r[4],z=r[5],H=r[6],j=r[7],F=r[8],W=r[9],$=r[10],J=r[11],V=r[12],G=r[13],Y=r[14],Z=r[15];s+=(i=e[0])*L,o+=i*q,a+=i*M,l+=i*K,u+=i*D,c+=i*z,h+=i*H,d+=i*j,f+=i*F,p+=i*W,y+=i*$,g+=i*J,m+=i*V,v+=i*G,w+=i*Y,b+=i*Z,o+=(i=e[1])*L,a+=i*q,l+=i*M,u+=i*K,c+=i*D,h+=i*z,d+=i*H,f+=i*j,p+=i*F,y+=i*W,g+=i*$,m+=i*J,v+=i*V,w+=i*G,b+=i*Y,_+=i*Z,a+=(i=e[2])*L,l+=i*q,u+=i*M,c+=i*K,h+=i*D,d+=i*z,f+=i*H,p+=i*j,y+=i*F,g+=i*W,m+=i*$,v+=i*J,w+=i*V,b+=i*G,_+=i*Y,E+=i*Z,l+=(i=e[3])*L,u+=i*q,c+=i*M,h+=i*K,d+=i*D,f+=i*z,p+=i*H,y+=i*j,g+=i*F,m+=i*W,v+=i*$,w+=i*J,b+=i*V,_+=i*G,E+=i*Y,A+=i*Z,u+=(i=e[4])*L,c+=i*q,h+=i*M,d+=i*K,f+=i*D,p+=i*z,y+=i*H,g+=i*j,m+=i*F,v+=i*W,w+=i*$,b+=i*J,_+=i*V,E+=i*G,A+=i*Y,S+=i*Z,c+=(i=e[5])*L,h+=i*q,d+=i*M,f+=i*K,p+=i*D,y+=i*z,g+=i*H,m+=i*j,v+=i*F,w+=i*W,b+=i*$,_+=i*J,E+=i*V,A+=i*G,S+=i*Y,x+=i*Z,h+=(i=e[6])*L,d+=i*q,f+=i*M,p+=i*K,y+=i*D,g+=i*z,m+=i*H,v+=i*j,w+=i*F,b+=i*W,_+=i*$,E+=i*J,A+=i*V,S+=i*G,x+=i*Y,T+=i*Z,d+=(i=e[7])*L,f+=i*q,p+=i*M,y+=i*K,g+=i*D,m+=i*z,v+=i*H,w+=i*j,b+=i*F,_+=i*W,E+=i*$,A+=i*J,S+=i*V,x+=i*G,T+=i*Y,k+=i*Z,f+=(i=e[8])*L,p+=i*q,y+=i*M,g+=i*K,m+=i*D,v+=i*z,w+=i*H,b+=i*j,_+=i*F,E+=i*W,A+=i*$,S+=i*J,x+=i*V,T+=i*G,k+=i*Y,O+=i*Z,p+=(i=e[9])*L,y+=i*q,g+=i*M,m+=i*K,v+=i*D,w+=i*z,b+=i*H,_+=i*j,E+=i*F,A+=i*W,S+=i*$,x+=i*J,T+=i*V,k+=i*G,O+=i*Y,I+=i*Z,y+=(i=e[10])*L,g+=i*q,m+=i*M,v+=i*K,w+=i*D,b+=i*z,_+=i*H,E+=i*j,A+=i*F,S+=i*W,x+=i*$,T+=i*J,k+=i*V,O+=i*G,I+=i*Y,P+=i*Z,g+=(i=e[11])*L,m+=i*q,v+=i*M,w+=i*K,b+=i*D,_+=i*z,E+=i*H,A+=i*j,S+=i*F,x+=i*W,T+=i*$,k+=i*J,O+=i*V,I+=i*G,P+=i*Y,U+=i*Z,m+=(i=e[12])*L,v+=i*q,w+=i*M,b+=i*K,_+=i*D,E+=i*z,A+=i*H,S+=i*j,x+=i*F,T+=i*W,k+=i*$,O+=i*J,I+=i*V,P+=i*G,U+=i*Y,B+=i*Z,v+=(i=e[13])*L,w+=i*q,b+=i*M,_+=i*K,E+=i*D,A+=i*z,S+=i*H,x+=i*j,T+=i*F,k+=i*W,O+=i*$,I+=i*J,P+=i*V,U+=i*G,B+=i*Y,R+=i*Z,w+=(i=e[14])*L,b+=i*q,_+=i*M,E+=i*K,A+=i*D,S+=i*z,x+=i*H,T+=i*j,k+=i*F,O+=i*W,I+=i*$,P+=i*J,U+=i*V,B+=i*G,R+=i*Y,N+=i*Z,b+=(i=e[15])*L,_+=i*q,E+=i*M,A+=i*K,S+=i*D,x+=i*z,T+=i*H,k+=i*j,O+=i*F,I+=i*W,P+=i*$,U+=i*J,B+=i*V,R+=i*G,N+=i*Y,C+=i*Z,s+=38*_,o+=38*E,a+=38*A,l+=38*S,u+=38*x,c+=38*T,h+=38*k,d+=38*O,f+=38*I,p+=38*P,y+=38*U,g+=38*B,m+=38*R,v+=38*N,w+=38*C,n=Math.floor((i=s+(n=1)+65535)/65536),s=i-65536*n,n=Math.floor((i=o+n+65535)/65536),o=i-65536*n,n=Math.floor((i=a+n+65535)/65536),a=i-65536*n,n=Math.floor((i=l+n+65535)/65536),l=i-65536*n,n=Math.floor((i=u+n+65535)/65536),u=i-65536*n,n=Math.floor((i=c+n+65535)/65536),c=i-65536*n,n=Math.floor((i=h+n+65535)/65536),h=i-65536*n,n=Math.floor((i=d+n+65535)/65536),d=i-65536*n,n=Math.floor((i=f+n+65535)/65536),f=i-65536*n,n=Math.floor((i=p+n+65535)/65536),p=i-65536*n,n=Math.floor((i=y+n+65535)/65536),y=i-65536*n,n=Math.floor((i=g+n+65535)/65536),g=i-65536*n,n=Math.floor((i=m+n+65535)/65536),m=i-65536*n,n=Math.floor((i=v+n+65535)/65536),v=i-65536*n,n=Math.floor((i=w+n+65535)/65536),w=i-65536*n,n=Math.floor((i=b+n+65535)/65536),b=i-65536*n,s+=n-1+37*(n-1),n=Math.floor((i=s+(n=1)+65535)/65536),s=i-65536*n,n=Math.floor((i=o+n+65535)/65536),o=i-65536*n,n=Math.floor((i=a+n+65535)/65536),a=i-65536*n,n=Math.floor((i=l+n+65535)/65536),l=i-65536*n,n=Math.floor((i=u+n+65535)/65536),u=i-65536*n,n=Math.floor((i=c+n+65535)/65536),c=i-65536*n,n=Math.floor((i=h+n+65535)/65536),h=i-65536*n,n=Math.floor((i=d+n+65535)/65536),d=i-65536*n,n=Math.floor((i=f+n+65535)/65536),f=i-65536*n,n=Math.floor((i=p+n+65535)/65536),p=i-65536*n,n=Math.floor((i=y+n+65535)/65536),y=i-65536*n,n=Math.floor((i=g+n+65535)/65536),g=i-65536*n,n=Math.floor((i=m+n+65535)/65536),m=i-65536*n,n=Math.floor((i=v+n+65535)/65536),v=i-65536*n,n=Math.floor((i=w+n+65535)/65536),w=i-65536*n,n=Math.floor((i=b+n+65535)/65536),b=i-65536*n,s+=n-1+37*(n-1),t[0]=s,t[1]=o,t[2]=a,t[3]=l,t[4]=u,t[5]=c,t[6]=h,t[7]=d,t[8]=f,t[9]=p,t[10]=y,t[11]=g,t[12]=m,t[13]=v,t[14]=w,t[15]=b}function z(t,e){D(t,e,e)}function H(t,e){var r,n=i();for(r=0;r<16;r++)n[r]=e[r];for(r=253;r>=0;r--)z(n,n),2!==r&&4!==r&&D(n,n,e);for(r=0;r<16;r++)t[r]=n[r]}function j(t,e){var r,n=i();for(r=0;r<16;r++)n[r]=e[r];for(r=250;r>=0;r--)z(n,n),1!==r&&D(n,n,e);for(r=0;r<16;r++)t[r]=n[r]}function F(t,e,r){var n,s,o=new Uint8Array(32),a=new Float64Array(80),l=i(),c=i(),h=i(),d=i(),f=i(),p=i();for(s=0;s<31;s++)o[s]=e[s];for(o[31]=127&e[31]|64,o[0]&=248,q(a,r),s=0;s<16;s++)c[s]=a[s],d[s]=l[s]=h[s]=0;for(s=254,l[0]=d[0]=1;s>=0;--s)R(l,c,n=o[s>>>3]>>>(7&s)&1),R(h,d,n),M(f,l,h),K(l,l,h),M(h,c,d),K(c,c,d),z(d,f),z(p,l),D(l,h,l),D(h,c,f),M(f,l,h),K(l,l,h),z(c,l),K(h,d,p),D(l,h,u),M(l,l,d),D(h,h,l),D(l,d,p),D(d,c,a),z(c,f),R(l,c,n),R(h,d,n);for(s=0;s<16;s++)a[s+16]=l[s],a[s+32]=h[s],a[s+48]=c[s],a[s+64]=d[s];var y=a.subarray(32),g=a.subarray(16);return H(y,y),D(g,g,y),N(t,g),0}function W(t,e){return F(t,e,o)}function $(t,e){return n(e,32),W(t,e)}function J(t,e,r){var i=new Uint8Array(32);return F(i,r,e),b(t,s,i,_)}T.prototype.blocks=function(t,e,r){for(var i,n,s,o,a,l,u,c,h,d,f,p,y,g,m,v,w,b,_,E=this.fin?0:2048,A=this.h[0],S=this.h[1],x=this.h[2],T=this.h[3],k=this.h[4],O=this.h[5],I=this.h[6],P=this.h[7],U=this.h[8],B=this.h[9],R=this.r[0],N=this.r[1],C=this.r[2],L=this.r[3],q=this.r[4],M=this.r[5],K=this.r[6],D=this.r[7],z=this.r[8],H=this.r[9];r>=16;)A+=8191&(i=255&t[e+0]|(255&t[e+1])<<8),S+=(i>>>13|(n=255&t[e+2]|(255&t[e+3])<<8)<<3)&8191,x+=(n>>>10|(s=255&t[e+4]|(255&t[e+5])<<8)<<6)&8191,T+=(s>>>7|(o=255&t[e+6]|(255&t[e+7])<<8)<<9)&8191,k+=(o>>>4|(a=255&t[e+8]|(255&t[e+9])<<8)<<12)&8191,O+=a>>>1&8191,I+=(a>>>14|(l=255&t[e+10]|(255&t[e+11])<<8)<<2)&8191,P+=(l>>>11|(u=255&t[e+12]|(255&t[e+13])<<8)<<5)&8191,U+=(u>>>8|(c=255&t[e+14]|(255&t[e+15])<<8)<<8)&8191,B+=c>>>5|E,h=(d=(h=0)+A*R+5*H*S+5*z*x+5*D*T+5*K*k)>>>13,d&=8191,d+=5*M*O+5*q*I+5*L*P+5*C*U+5*N*B,h+=d>>>13,d&=8191,h=(f=h+A*N+S*R+5*H*x+5*z*T+5*D*k)>>>13,f&=8191,f+=5*K*O+5*M*I+5*q*P+5*L*U+5*C*B,h+=f>>>13,f&=8191,h=(p=h+A*C+S*N+x*R+5*H*T+5*z*k)>>>13,p&=8191,p+=5*D*O+5*K*I+5*M*P+5*q*U+5*L*B,h+=p>>>13,p&=8191,h=(y=h+A*L+S*C+x*N+T*R+5*H*k)>>>13,y&=8191,y+=5*z*O+5*D*I+5*K*P+5*M*U+5*q*B,h+=y>>>13,y&=8191,h=(g=h+A*q+S*L+x*C+T*N+k*R)>>>13,g&=8191,g+=5*H*O+5*z*I+5*D*P+5*K*U+5*M*B,h+=g>>>13,g&=8191,h=(m=h+A*M+S*q+x*L+T*C+k*N)>>>13,m&=8191,m+=O*R+5*H*I+5*z*P+5*D*U+5*K*B,h+=m>>>13,m&=8191,h=(v=h+A*K+S*M+x*q+T*L+k*C)>>>13,v&=8191,v+=O*N+I*R+5*H*P+5*z*U+5*D*B,h+=v>>>13,v&=8191,h=(w=h+A*D+S*K+x*M+T*q+k*L)>>>13,w&=8191,w+=O*C+I*N+P*R+5*H*U+5*z*B,h+=w>>>13,w&=8191,h=(b=h+A*z+S*D+x*K+T*M+k*q)>>>13,b&=8191,b+=O*L+I*C+P*N+U*R+5*H*B,h+=b>>>13,b&=8191,h=(_=h+A*H+S*z+x*D+T*K+k*M)>>>13,_&=8191,_+=O*q+I*L+P*C+U*N+B*R,h+=_>>>13,_&=8191,d=8191&(h=(h=(h<<2)+h|0)+d|0),h>>>=13,f+=h,A=d,S=f,x=p,T=y,k=g,O=m,I=v,P=w,U=b,B=_,e+=16,r-=16;this.h[0]=A,this.h[1]=S,this.h[2]=x,this.h[3]=T,this.h[4]=k,this.h[5]=O,this.h[6]=I,this.h[7]=P,this.h[8]=U,this.h[9]=B},T.prototype.finish=function(t,e){var r,i,n,s,o=new Uint16Array(10);if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=r,r=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this.h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,i=(1^r)-1,s=0;s<10;s++)o[s]&=i;for(s=0,i=~i;s<10;s++)this.h[s]=this.h[s]&i|o[s];for(s=1,this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,n=this.h[0]+this.pad[0],this.h[0]=65535&n;s<8;s++)n=(this.h[s]+this.pad[s]|0)+(n>>>16)|0,this.h[s]=65535&n;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},T.prototype.update=function(t,e,r){var i,n;if(this.leftover){for((n=16-this.leftover)>r&&(n=r),i=0;i<n;i++)this.buffer[this.leftover+i]=t[e+i];if(r-=n,e+=n,this.leftover+=n,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(n=r-r%16,this.blocks(t,e,n),e+=n,r-=n),r){for(i=0;i<r;i++)this.buffer[this.leftover+i]=t[e+i];this.leftover+=r}};var V=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function G(t,e,r,i){for(var n,s,o,a,l,u,c,h,d,f,p,y,g,m,v,w,b,_,E,A,S,x,T,k,O,I,P=new Int32Array(16),U=new Int32Array(16),B=t[0],R=t[1],N=t[2],C=t[3],L=t[4],q=t[5],M=t[6],K=t[7],D=e[0],z=e[1],H=e[2],j=e[3],F=e[4],W=e[5],$=e[6],J=e[7],G=0;i>=128;){for(E=0;E<16;E++)A=8*E+G,P[E]=r[A+0]<<24|r[A+1]<<16|r[A+2]<<8|r[A+3],U[E]=r[A+4]<<24|r[A+5]<<16|r[A+6]<<8|r[A+7];for(E=0;E<80;E++)if(n=B,s=R,o=N,a=C,l=L,u=q,c=M,h=K,d=D,f=z,p=H,y=j,g=F,m=W,v=$,w=J,S=K,T=65535&(x=J),k=x>>>16,O=65535&S,I=S>>>16,S=(L>>>14|F<<18)^(L>>>18|F<<14)^(F>>>9|L<<23),T+=65535&(x=(F>>>14|L<<18)^(F>>>18|L<<14)^(L>>>9|F<<23)),k+=x>>>16,O+=65535&S,I+=S>>>16,S=L&q^~L&M,T+=65535&(x=F&W^~F&$),k+=x>>>16,O+=65535&S,I+=S>>>16,S=V[2*E],T+=65535&(x=V[2*E+1]),k+=x>>>16,O+=65535&S,I+=S>>>16,S=P[E%16],T+=65535&(x=U[E%16]),k+=x>>>16,O+=65535&S,I+=S>>>16,k+=T>>>16,O+=k>>>16,I+=O>>>16,b=65535&O|I<<16,_=65535&T|k<<16,S=b,T=65535&(x=_),k=x>>>16,O=65535&S,I=S>>>16,S=(B>>>28|D<<4)^(D>>>2|B<<30)^(D>>>7|B<<25),T+=65535&(x=(D>>>28|B<<4)^(B>>>2|D<<30)^(B>>>7|D<<25)),k+=x>>>16,O+=65535&S,I+=S>>>16,S=B&R^B&N^R&N,T+=65535&(x=D&z^D&H^z&H),k+=x>>>16,O+=65535&S,I+=S>>>16,k+=T>>>16,O+=k>>>16,I+=O>>>16,h=65535&O|I<<16,w=65535&T|k<<16,S=a,T=65535&(x=y),k=x>>>16,O=65535&S,I=S>>>16,S=b,T+=65535&(x=_),k+=x>>>16,O+=65535&S,I+=S>>>16,k+=T>>>16,O+=k>>>16,I+=O>>>16,a=65535&O|I<<16,y=65535&T|k<<16,R=n,N=s,C=o,L=a,q=l,M=u,K=c,B=h,z=d,H=f,j=p,F=y,W=g,$=m,J=v,D=w,E%16==15)for(A=0;A<16;A++)S=P[A],T=65535&(x=U[A]),k=x>>>16,O=65535&S,I=S>>>16,S=P[(A+9)%16],T+=65535&(x=U[(A+9)%16]),k+=x>>>16,O+=65535&S,I+=S>>>16,S=((b=P[(A+1)%16])>>>1|(_=U[(A+1)%16])<<31)^(b>>>8|_<<24)^b>>>7,T+=65535&(x=(_>>>1|b<<31)^(_>>>8|b<<24)^(_>>>7|b<<25)),k+=x>>>16,O+=65535&S,I+=S>>>16,S=((b=P[(A+14)%16])>>>19|(_=U[(A+14)%16])<<13)^(_>>>29|b<<3)^b>>>6,T+=65535&(x=(_>>>19|b<<13)^(b>>>29|_<<3)^(_>>>6|b<<26)),k+=x>>>16,O+=65535&S,I+=S>>>16,k+=T>>>16,O+=k>>>16,I+=O>>>16,P[A]=65535&O|I<<16,U[A]=65535&T|k<<16;S=B,T=65535&(x=D),k=x>>>16,O=65535&S,I=S>>>16,S=t[0],T+=65535&(x=e[0]),k+=x>>>16,O+=65535&S,I+=S>>>16,k+=T>>>16,O+=k>>>16,I+=O>>>16,t[0]=B=65535&O|I<<16,e[0]=D=65535&T|k<<16,S=R,T=65535&(x=z),k=x>>>16,O=65535&S,I=S>>>16,S=t[1],T+=65535&(x=e[1]),k+=x>>>16,O+=65535&S,I+=S>>>16,k+=T>>>16,O+=k>>>16,I+=O>>>16,t[1]=R=65535&O|I<<16,e[1]=z=65535&T|k<<16,S=N,T=65535&(x=H),k=x>>>16,O=65535&S,I=S>>>16,S=t[2],T+=65535&(x=e[2]),k+=x>>>16,O+=65535&S,I+=S>>>16,k+=T>>>16,O+=k>>>16,I+=O>>>16,t[2]=N=65535&O|I<<16,e[2]=H=65535&T|k<<16,S=C,T=65535&(x=j),k=x>>>16,O=65535&S,I=S>>>16,S=t[3],T+=65535&(x=e[3]),k+=x>>>16,O+=65535&S,I+=S>>>16,k+=T>>>16,O+=k>>>16,I+=O>>>16,t[3]=C=65535&O|I<<16,e[3]=j=65535&T|k<<16,S=L,T=65535&(x=F),k=x>>>16,O=65535&S,I=S>>>16,S=t[4],T+=65535&(x=e[4]),k+=x>>>16,O+=65535&S,I+=S>>>16,k+=T>>>16,O+=k>>>16,I+=O>>>16,t[4]=L=65535&O|I<<16,e[4]=F=65535&T|k<<16,S=q,T=65535&(x=W),k=x>>>16,O=65535&S,I=S>>>16,S=t[5],T+=65535&(x=e[5]),k+=x>>>16,O+=65535&S,I+=S>>>16,k+=T>>>16,O+=k>>>16,I+=O>>>16,t[5]=q=65535&O|I<<16,e[5]=W=65535&T|k<<16,S=M,T=65535&(x=$),k=x>>>16,O=65535&S,I=S>>>16,S=t[6],T+=65535&(x=e[6]),k+=x>>>16,O+=65535&S,I+=S>>>16,k+=T>>>16,O+=k>>>16,I+=O>>>16,t[6]=M=65535&O|I<<16,e[6]=$=65535&T|k<<16,S=K,T=65535&(x=J),k=x>>>16,O=65535&S,I=S>>>16,S=t[7],T+=65535&(x=e[7]),k+=x>>>16,O+=65535&S,I+=S>>>16,k+=T>>>16,O+=k>>>16,I+=O>>>16,t[7]=K=65535&O|I<<16,e[7]=J=65535&T|k<<16,G+=128,i-=128}return i}function Y(t,e,r){var i,n=new Int32Array(8),s=new Int32Array(8),o=new Uint8Array(256),a=r;for(n[0]=1779033703,n[1]=3144134277,n[2]=1013904242,n[3]=2773480762,n[4]=1359893119,n[5]=2600822924,n[6]=528734635,n[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,G(n,s,e,r),r%=128,i=0;i<r;i++)o[i]=e[a-r+i];for(o[r]=128,o[(r=256-128*(r<112?1:0))-9]=0,y(o,r-8,a/536870912|0,a<<3),G(n,s,o,r),i=0;i<8;i++)y(t,8*i,n[i],s[i]);return 0}function Z(t,e){var r=i(),n=i(),s=i(),o=i(),a=i(),l=i(),u=i(),c=i(),d=i();K(r,t[1],t[0]),K(d,e[1],e[0]),D(r,r,d),M(n,t[0],t[1]),M(d,e[0],e[1]),D(n,n,d),D(s,t[3],e[3]),D(s,s,h),D(o,t[2],e[2]),M(o,o,o),K(a,n,r),K(l,o,s),M(u,o,s),M(c,n,r),D(t[0],a,l),D(t[1],c,u),D(t[2],u,l),D(t[3],a,c)}function X(t,e,r){var i;for(i=0;i<4;i++)R(t[i],e[i],r)}function Q(t,e){var r=i(),n=i(),s=i();H(s,e[2]),D(r,e[0],s),D(n,e[1],s),N(t,n),t[31]^=L(r)<<7}function tt(t,e,r){var i,n;for(U(t[0],a),U(t[1],l),U(t[2],l),U(t[3],a),n=255;n>=0;--n)X(t,e,i=r[n/8|0]>>(7&n)&1),Z(e,t),Z(t,t),X(t,e,i)}function te(t,e){var r=[i(),i(),i(),i()];U(r[0],d),U(r[1],f),U(r[2],l),D(r[3],d,f),tt(t,r,e)}function tr(t,e,r){var s,o=new Uint8Array(64),a=[i(),i(),i(),i()];for(r||n(e,32),Y(o,e,32),o[0]&=248,o[31]&=127,o[31]|=64,te(a,o),Q(t,a),s=0;s<32;s++)e[s+32]=t[s];return 0}var ti=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function tn(t,e){var r,i,n,s;for(i=63;i>=32;--i){for(r=0,n=i-32,s=i-12;n<s;++n)e[n]+=r-16*e[i]*ti[n-(i-32)],r=Math.floor((e[n]+128)/256),e[n]-=256*r;e[n]+=r,e[i]=0}for(n=0,r=0;n<32;n++)e[n]+=r-(e[31]>>4)*ti[n],r=e[n]>>8,e[n]&=255;for(n=0;n<32;n++)e[n]-=r*ti[n];for(i=0;i<32;i++)e[i+1]+=e[i]>>8,t[i]=255&e[i]}function ts(t){var e,r=new Float64Array(64);for(e=0;e<64;e++)r[e]=t[e];for(e=0;e<64;e++)t[e]=0;tn(t,r)}function to(t,e,r,n){var s,o,a=new Uint8Array(64),l=new Uint8Array(64),u=new Uint8Array(64),c=new Float64Array(64),h=[i(),i(),i(),i()];for(Y(a,n,32),a[0]&=248,a[31]&=127,a[31]|=64,s=0;s<r;s++)t[64+s]=e[s];for(s=0;s<32;s++)t[32+s]=a[32+s];for(Y(u,t.subarray(32),r+32),ts(u),te(h,u),Q(t,h),s=32;s<64;s++)t[s]=n[s];for(Y(l,t,r+64),ts(l),s=0;s<64;s++)c[s]=0;for(s=0;s<32;s++)c[s]=u[s];for(s=0;s<32;s++)for(o=0;o<32;o++)c[s+o]+=l[s]*a[o];return tn(t.subarray(32),c),r+64}function ta(t,e,r,n){var s,o,u,h,d,f,y,g,m=new Uint8Array(32),w=new Uint8Array(64),b=[i(),i(),i(),i()],_=[i(),i(),i(),i()];if(r<64||(s=i(),o=i(),u=i(),h=i(),d=i(),f=i(),y=i(),(U(_[2],l),q(_[1],n),z(u,_[1]),D(h,u,c),K(u,u,_[2]),M(h,_[2],h),z(d,h),z(f,d),D(y,f,d),D(s,y,u),D(s,s,h),j(s,s),D(s,s,u),D(s,s,h),D(s,s,h),D(_[0],s,h),z(o,_[0]),D(o,o,h),C(o,u)&&D(_[0],_[0],p),z(o,_[0]),D(o,o,h),C(o,u))?-1:(L(_[0])===n[31]>>7&&K(_[0],a,_[0]),D(_[3],_[0],_[1]),0)))return -1;for(g=0;g<r;g++)t[g]=e[g];for(g=0;g<32;g++)t[g+32]=n[g];if(Y(w,t,r),ts(w),tt(b,_,w),te(_,e.subarray(32)),Z(b,_),Q(m,b),r-=64,v(e,0,m,0)){for(g=0;g<r;g++)t[g]=0;return -1}for(g=0;g<r;g++)t[g]=e[g+64];return r}function tl(t,e){if(32!==t.length)throw Error("bad key size");if(24!==e.length)throw Error("bad nonce size")}function tu(){for(var t=0;t<arguments.length;t++)if(!(arguments[t]instanceof Uint8Array))throw TypeError("unexpected type, use Uint8Array")}function tc(t){for(var e=0;e<t.length;e++)t[e]=0}t.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:x,crypto_stream:S,crypto_stream_salsa20_xor:E,crypto_stream_salsa20:A,crypto_onetimeauth:k,crypto_onetimeauth_verify:O,crypto_verify_16:m,crypto_verify_32:v,crypto_secretbox:I,crypto_secretbox_open:P,crypto_scalarmult:F,crypto_scalarmult_base:W,crypto_box_beforenm:J,crypto_box_afternm:I,crypto_box:function(t,e,r,i,n,s){var o=new Uint8Array(32);return J(o,n,s),I(t,e,r,i,o)},crypto_box_open:function(t,e,r,i,n,s){var o=new Uint8Array(32);return J(o,n,s),P(t,e,r,i,o)},crypto_box_keypair:$,crypto_hash:Y,crypto_sign:to,crypto_sign_keypair:tr,crypto_sign_open:ta,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:i,D:c,L:ti,pack25519:N,unpack25519:q,M:D,A:M,S:z,Z:K,pow2523:j,add:Z,set25519:U,modL:tn,scalarmult:tt,scalarbase:te},t.randomBytes=function(t){var e=new Uint8Array(t);return n(e,t),e},t.secretbox=function(t,e,r){tu(t,e,r),tl(r,e);for(var i=new Uint8Array(32+t.length),n=new Uint8Array(i.length),s=0;s<t.length;s++)i[s+32]=t[s];return I(n,i,i.length,e,r),n.subarray(16)},t.secretbox.open=function(t,e,r){tu(t,e,r),tl(r,e);for(var i=new Uint8Array(16+t.length),n=new Uint8Array(i.length),s=0;s<t.length;s++)i[s+16]=t[s];return i.length<32||0!==P(n,i,i.length,e,r)?null:n.subarray(32)},t.secretbox.keyLength=32,t.secretbox.nonceLength=24,t.secretbox.overheadLength=16,t.scalarMult=function(t,e){if(tu(t,e),32!==t.length)throw Error("bad n size");if(32!==e.length)throw Error("bad p size");var r=new Uint8Array(32);return F(r,t,e),r},t.scalarMult.base=function(t){if(tu(t),32!==t.length)throw Error("bad n size");var e=new Uint8Array(32);return W(e,t),e},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,r,i,n){var s=t.box.before(i,n);return t.secretbox(e,r,s)},t.box.before=function(t,e){tu(t,e),function(t,e){if(32!==t.length)throw Error("bad public key size");if(32!==e.length)throw Error("bad secret key size")}(t,e);var r=new Uint8Array(32);return J(r,t,e),r},t.box.after=t.secretbox,t.box.open=function(e,r,i,n){var s=t.box.before(i,n);return t.secretbox.open(e,r,s)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(32);return $(t,e),{publicKey:t,secretKey:e}},t.box.keyPair.fromSecretKey=function(t){if(tu(t),32!==t.length)throw Error("bad secret key size");var e=new Uint8Array(32);return W(e,t),{publicKey:e,secretKey:new Uint8Array(t)}},t.box.publicKeyLength=32,t.box.secretKeyLength=32,t.box.sharedKeyLength=32,t.box.nonceLength=24,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(t,e){if(tu(t,e),64!==e.length)throw Error("bad secret key size");var r=new Uint8Array(64+t.length);return to(r,t,t.length,e),r},t.sign.open=function(t,e){if(tu(t,e),32!==e.length)throw Error("bad public key size");var r=new Uint8Array(t.length),i=ta(r,t,t.length,e);if(i<0)return null;for(var n=new Uint8Array(i),s=0;s<n.length;s++)n[s]=r[s];return n},t.sign.detached=function(e,r){for(var i=t.sign(e,r),n=new Uint8Array(64),s=0;s<n.length;s++)n[s]=i[s];return n},t.sign.detached.verify=function(t,e,r){if(tu(t,e,r),64!==e.length)throw Error("bad signature size");if(32!==r.length)throw Error("bad public key size");var i,n=new Uint8Array(64+t.length),s=new Uint8Array(64+t.length);for(i=0;i<64;i++)n[i]=e[i];for(i=0;i<t.length;i++)n[i+64]=t[i];return ta(s,n,n.length,r)>=0},t.sign.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(64);return tr(t,e),{publicKey:t,secretKey:e}},t.sign.keyPair.fromSecretKey=function(t){if(tu(t),64!==t.length)throw Error("bad secret key size");for(var e=new Uint8Array(32),r=0;r<e.length;r++)e[r]=t[32+r];return{publicKey:e,secretKey:new Uint8Array(t)}},t.sign.keyPair.fromSeed=function(t){if(tu(t),32!==t.length)throw Error("bad seed size");for(var e=new Uint8Array(32),r=new Uint8Array(64),i=0;i<32;i++)r[i]=t[i];return tr(e,r,!0),{publicKey:e,secretKey:r}},t.sign.publicKeyLength=32,t.sign.secretKeyLength=64,t.sign.seedLength=32,t.sign.signatureLength=64,t.hash=function(t){tu(t);var e=new Uint8Array(64);return Y(e,t,t.length),e},t.hash.hashLength=64,t.verify=function(t,e){return tu(t,e),0!==t.length&&0!==e.length&&t.length===e.length&&0===g(t,0,e,0,t.length)},t.setPRNG=function(t){n=t},(e="undefined"!=typeof self?self.crypto||self.msCrypto:null)&&e.getRandomValues?t.setPRNG(function(t,r){var i,n=new Uint8Array(r);for(i=0;i<r;i+=65536)e.getRandomValues(n.subarray(i,i+Math.min(r-i,65536)));for(i=0;i<r;i++)t[i]=n[i];tc(n)}):(e=r(39201))&&e.randomBytes&&t.setPRNG(function(t,r){var i,n=e.randomBytes(r);for(i=0;i<r;i++)t[i]=n[i];tc(n)})}(t.exports?t.exports:self.nacl=self.nacl||{})},93048:function(t,e,r){"use strict";r.d(e,{v4:function(){return u}});for(var i,n=new Uint8Array(16),s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,o=[],a=0;a<256;++a)o.push((a+256).toString(16).substr(1));var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(o[t[e+0]]+o[t[e+1]]+o[t[e+2]]+o[t[e+3]]+"-"+o[t[e+4]]+o[t[e+5]]+"-"+o[t[e+6]]+o[t[e+7]]+"-"+o[t[e+8]]+o[t[e+9]]+"-"+o[t[e+10]]+o[t[e+11]]+o[t[e+12]]+o[t[e+13]]+o[t[e+14]]+o[t[e+15]]).toLowerCase();if(!("string"==typeof r&&s.test(r)))throw TypeError("Stringified UUID is invalid");return r},u=function(t,e,r){var s=(t=t||{}).random||(t.rng||function(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(n)})();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){r=r||0;for(var o=0;o<16;++o)e[r+o]=s[o];return e}return l(s)}},6736:function(t,e,r){"use strict";var i=r(46856).Buffer;let n=r(83879),s=r(42386);class o extends n.EventEmitter{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:n=1e3,max_reconnects:o=5,...a}={},l,u){super(),this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=n,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>++this.rpc_id),u?this.dataPack=u:this.dataPack=new s.DefaultDataPack,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,i){return i||"object"!=typeof r||(i=r,r=null),new Promise((n,s)=>{if(!this.ready)return s(Error("socket not ready"));let o=this.generate_request_id(t,e);this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:t,params:e||void 0,id:o}),i,t=>{if(t)return s(t);this.queue[o]={promise:[n,s]},r&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],s(Error("reply timeout"))},r))})})}async login(t){let e=await this.call("rpc.login",t);if(!e)throw Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,i)=>{if(!this.ready)return i(Error("socket not ready"));this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:t,params:e}),t=>{if(t)return i(t);r()})})}async subscribe(t){"string"==typeof t&&(t=[t]);let e=await this.call("rpc.on",t);if("string"==typeof t&&"ok"!==e[t])throw Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){"string"==typeof t&&(t=[t]);let e=await this.call("rpc.off",t);if("string"==typeof t&&"ok"!==e[t])throw Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=i.from(t).toString());try{t=this.dataPack.decode(t)}catch(t){return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);let e=[t.notification];if(t.params.constructor===Object)e.push(t.params);else for(let r=0;r<t.params.length;r++)e.push(t.params[r]);return Promise.resolve().then(()=>{this.emit.apply(this,e)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}}e.Z=o},81345:function(t,e,r){"use strict";let i=r(83879);class n extends i.EventEmitter{socket;constructor(t,e,r){super(),this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=t=>this.emit("message",t.data),this.socket.onerror=t=>this.emit("error",t),this.socket.onclose=t=>{this.emit("close",t.code,t.reason)}}send(t,e,r){let i=r||e;try{this.socket.send(t),i()}catch(t){i(t)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}}e.Z=function(t,e){return new n(t,e)}},42386:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createError=e.DefaultDataPack=void 0;let r=new Map([[-32e3,"Event not provided"],[-32600,"Invalid Request"],[-32601,"Method not found"],[-32602,"Invalid params"],[-32603,"Internal error"],[-32604,"Params not found"],[-32605,"Method forbidden"],[-32606,"Event forbidden"],[-32700,"Parse error"]]);class i{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}}e.DefaultDataPack=i,e.createError=function(t,e){let i={code:t,message:r.get(t)||"Internal Server Error"};return e&&(i.data=e),i}},23236:function(t,e,r){"use strict";let i;function n(t,e,r,i){return new(r||(r=Promise))(function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?n(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,a)}l((i=i.apply(t,e||[])).next())})}function s(t,e,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(t):i?i.value:e.get(t)}r.d(e,{YN:function(){return eN},j_:function(){return tI}}),"function"==typeof SuppressedError&&SuppressedError;var o,a,l,u,c,h=r(36871),d=r(38067),f=r(81579),p=r(46856).Buffer;let y=t=>p.from(t).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),g=()=>{let t=new Uint8Array(32);return crypto.getRandomValues(t),t.buffer};var m=r(19033);let v={AUTHENTICATOR_TRANSPORT_BLE:m.lfg.Ble,AUTHENTICATOR_TRANSPORT_HYBRID:m.lfg.Hybrid,AUTHENTICATOR_TRANSPORT_INTERNAL:m.lfg.Internal,AUTHENTICATOR_TRANSPORT_NFC:m.lfg.Nfc,AUTHENTICATOR_TRANSPORT_USB:m.lfg.Usb},w=t=>t.map(t=>v[t]);var b=r(79418);let _=["Turnkey error 16: expired api key","Turnkey error 16: could not find public key"],E=["The operation either timed out or was not allowed","The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.","Turnkey error 5: webauthn authenticator not found in organization or parent organization"];class A extends b.Y{error(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];let[n]=r;(null==n?void 0:n.message)&&E.some(t=>n.message.includes(t))?this.warn(t,...r):(b.Y.events.emit("error",t),this.log(b.i.ERROR,t,...r))}constructor(t,e){super(t,e)}}let S=new A("Dynamic embedded wallets",b.i.INFO);var x=r(47769),T=r(9594),k=r(53942),O=r(23849);let I=()=>({createWebauthnStamper:t=>new k.S(t),getWebAuthnAttestation:O.lW});class P{static get implementation(){return s(a,a,"f",l)?s(a,a,"f",l):I()}static set implementation(t){!function(t,e,r,i,n){if("function"==typeof e?t!==e||!n:!e.has(t))throw TypeError("Cannot write private member to an object whose class did not declare it");n?n.value=r:e.set(t,r)}(a,a,t,"f",l)}static get getWebAuthnAttestation(){return a.implementation.getWebAuthnAttestation}static get createWebauthnStamper(){return a.implementation.createWebauthnStamper}}a=P,l={value:void 0};let U="https://api.turnkey.com";class B{get publicKey(){return this.__publicKey}get client(){return this.__client}get recoveryType(){return this.__recoveryType}get recoveryUserId(){return this.__turnkeyRecoveryUserId||""}set recoveryUserId(t){this.__turnkeyRecoveryUserId=t}clear(){var t;null===(t=this.__iframeStamper)||void 0===t||t.clear(),this.__recoveryType=void 0,this.__iframeStamper=void 0,this.__publicKey=void 0,this.__client=void 0,this.__turnkeyRecoveryUserId=void 0,this.__createdAt=void 0}initRecovery(t,e,r,i){return n(this,void 0,void 0,function*(){return this.__recoveryType&&this.clear(),this.__sessionExpiration=i,this.__recoveryType=t,this.__iframeStamper=new x.rr({iframeContainer:e,iframeElementId:r,iframeUrl:"passkey"===t?"https://recovery.turnkey.com":"https://auth.turnkey.com"}),yield this.__iframeStamper.init(),this.__publicKey=this.__iframeStamper.publicKey(),this.__publicKey})}verifyRecoveryCode(t,e){return n(this,void 0,void 0,function*(){if(!this.__iframeStamper)throw new f.kW("Cannot proceed with your request");try{if(yield this.__iframeStamper.injectCredentialBundle(t),this.__client=new T.TF({baseUrl:U},this.__iframeStamper),!e||!this.__turnkeyRecoveryUserId)throw new f.kW("Cannot proceed with your request");if(!(yield this.isValidCode(e)))throw new f.kW("The code is invalid or expired.")}catch(t){if(S.error("Error while verifying recovery code",t),t instanceof f.kW)throw t;throw new f.kW("The code is invalid or expired.")}})}completeRecovery(t){return n(this,arguments,void 0,function*(t){let{attestation:e,challenge:r,turnkeySubOrganizationId:i}=t;if(!this.__client||!this.__turnkeyRecoveryUserId)throw new f.kW("Cannot proceed with your request");try{return this.__client.recoverUser({organizationId:i,parameters:{authenticator:{attestation:e,authenticatorName:"Passkey",challenge:r},userId:this.__turnkeyRecoveryUserId},timestampMs:String(Date.now()),type:"ACTIVITY_TYPE_RECOVER_USER"})}catch(t){throw S.error("[TK] Error while completing recovery process",t),t}})}addPasskeyAuthenticator(t){return n(this,arguments,void 0,function*(t){let{attestation:e,challenge:r,turnkeySubOrganizationId:i}=t;if(!this.__client||!this.__turnkeyRecoveryUserId)throw new f.kW("Cannot proceed with your request");try{return this.__client.createAuthenticators({organizationId:i,parameters:{authenticators:[{attestation:e,authenticatorName:"Passkey",challenge:r}],userId:this.__turnkeyRecoveryUserId},timestampMs:String(Date.now()),type:"ACTIVITY_TYPE_CREATE_AUTHENTICATORS_V2"})}catch(t){throw S.error("[TK] Error while creating new authenticator",t),t}})}addEmailRecovery(t){return n(this,arguments,void 0,function*(t){let{organizationId:e,email:r,turnkeyUserId:i}=t,n=(0,f.KT)();n||(n=f.mi.getHostname());let s=P.createWebauthnStamper({rpId:n}),o=new T.TF({baseUrl:U},s);try{return{signedRequest:yield o.stampUpdateUser({organizationId:e,parameters:{userEmail:r,userId:i,userTagIds:[]},timestampMs:String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_USER"}),userId:i}}catch(t){throw S.error("Error while adding email recovery",t),t}})}constructor(){this.isSessionActive=()=>!!this.__createdAt&&"email"===this.__recoveryType&&(!this.isExpired(this.__createdAt,this.__sessionExpiration||1800)||(this.clear(),!1)),this.isValidCode=t=>n(this,void 0,void 0,function*(){var e,r,i,n;if(!t||!this.__turnkeyRecoveryUserId)throw new f.kW("Cannot proceed with your request");let s=yield null===(e=this.__client)||void 0===e?void 0:e.getUser({organizationId:t,userId:this.__turnkeyRecoveryUserId}),o={email:"CREDENTIAL_TYPE_API_KEY_P256",passkey:"CREDENTIAL_TYPE_RECOVER_USER_KEY_P256"},a=null===(n=null===(i=null===(r=null==s?void 0:s.user)||void 0===r?void 0:r.apiKeys)||void 0===i?void 0:i.filter(t=>t.credential.type===o[this.__recoveryType]))||void 0===n?void 0:n.pop();return!(!a||this.isExpired(parseInt(a.createdAt.seconds,10),900))&&(this.__createdAt=parseInt(a.createdAt.seconds,10),!0)}),this.isExpired=(t,e)=>{let r=new Date(1e3*(t+e));return new Date>=r}}}let R=new B,N="https://api.turnkey.com";class C{get publicKey(){return this.__publicKey}clear(){var t;null===(t=this.__iframeStamper)||void 0===t||t.clear(),this.__iframeStamper=void 0,this.__publicKey=void 0,this.__turnkeyClient=void 0}initExport(t,e){return n(this,void 0,void 0,function*(){if(this.__iframeStamper=new x.rr({iframeContainer:t,iframeElementId:e,iframeUrl:"https://export.turnkey.com"}),yield this.__iframeStamper.init(),this.__publicKey=this.__iframeStamper.publicKey(),R.isSessionActive())this.__turnkeyClient=R.client;else{let t=(0,f.KT)();t||(t=f.mi.getHostname());let e=P.createWebauthnStamper({rpId:t}),r=null==C?void 0:C.apiKeyStamper;this.__turnkeyClient=new T.TF({baseUrl:N},null!=r?r:e)}return this.__publicKey})}verifyExportWallet(t){return n(this,arguments,void 0,function*(t){let{exportBundle:e,organizationId:r}=t;if(!this.__iframeStamper)throw new f.kW("Cannot proceed with your request");try{return yield this.__iframeStamper.injectWalletExportBundle(e,r)}catch(t){throw S.error("Error while verifying export wallet",t),t}})}verifyExportPrivateKey(t){return n(this,arguments,void 0,function*(t){let{exportBundle:e,organizationId:r,chain:i}=t;if(!this.__iframeStamper)throw new f.kW("Cannot proceed with your request");let n="solana"===i||"SOL"===i?x.PX.Solana:x.PX.Hexadecimal;try{return yield this.__iframeStamper.injectKeyExportBundle(e,r,n)}catch(t){throw S.error("Error while verifying export private key",t),t}})}exportPrivateKey(t){return n(this,arguments,void 0,function*(t){let{privateKeyId:e,organizationId:r}=t,i=null==C?void 0:C.apiKeyStamper;if(i&&(this.__turnkeyClient=new T.TF({baseUrl:N},i)),!this.__iframeStamper||!this.__publicKey||!this.__turnkeyClient||!e)throw new f.kW("Cannot proceed with your request");try{return(yield this.__turnkeyClient.exportPrivateKey({organizationId:r,parameters:{privateKeyId:e,targetPublicKey:this.__publicKey},timestampMs:String(Date.now()),type:"ACTIVITY_TYPE_EXPORT_PRIVATE_KEY"})).activity}catch(t){throw S.error("[TK] Error while completing export private key process",t),t}})}exportWallet(t){return n(this,arguments,void 0,function*(t){let{walletId:e,organizationId:r,address:i}=t,n=null==C?void 0:C.apiKeyStamper;if(n&&(this.__turnkeyClient=new T.TF({baseUrl:N},n)),!this.__iframeStamper||!this.__publicKey||!this.__turnkeyClient||!e)throw new f.kW("Cannot proceed with your request");try{if(i)return(yield this.__turnkeyClient.exportWalletAccount({organizationId:r,parameters:{address:i,targetPublicKey:this.__publicKey},timestampMs:String(Date.now()),type:"ACTIVITY_TYPE_EXPORT_WALLET_ACCOUNT"})).activity;return(yield this.__turnkeyClient.exportWallet({organizationId:r,parameters:{targetPublicKey:this.__publicKey,walletId:e},timestampMs:String(Date.now()),type:"ACTIVITY_TYPE_EXPORT_WALLET"})).activity}catch(t){throw S.error("[TK] Error while completing export wallet process",t),t}})}}class L extends d.VY{getWebAuthnAttestation(){return n(this,void 0,void 0,function*(){let t;let e=g(),r=g(),{email:i,passkeyIdentifier:n}=this;if(!i&&!n)throw Error("Email or passkeyIdentifier must be set to register a webauthn credential.");let s=i||"".concat(this.appName," - ").concat(n),o={publicKey:{authenticatorSelection:{authenticatorAttachment:void 0,requireResidentKey:!1,residentKey:"preferred",userVerification:"discouraged"},challenge:e,pubKeyCredParams:[{alg:-7,type:"public-key"}],rp:{id:(0,f.KT)(),name:this.appName},user:{displayName:s,id:r,name:i||"".concat(this.appName," - ").concat(n)}}};try{t=yield P.getWebAuthnAttestation(o)}catch(e){S.warn("Unable to register webauthn credential on the current page's TLD ".concat((0,f.KT)(),". Falling back to using hostname. ").concat(f.mi.getHostname()),e),o.publicKey.rp.id=f.mi.getHostname(),t=yield P.getWebAuthnAttestation(o)}return{attestation:{attestationObject:t.attestationObject,clientDataJson:t.clientDataJson,credentialId:t.credentialId,transports:w(t.transports)},challenge:y(e),displayName:s}})}getAuthenticatorHandler(){return this.__authenticatorMethodHandler}getExportHandler(){return this.__exportHandler}get email(){return this._email}setEmail(t){this._email=t}get phone(){return this._phone}setPhone(t){this._phone=t}get passkeyIdentifier(){return this._passkeyIdentifier}setPasskeyIdentifier(t){this._passkeyIdentifier=t}clearEmail(){this._email=null}getAddress(){return n(this,void 0,void 0,function*(){var t;return null===(t=this.verifiedCredential)||void 0===t?void 0:t.address})}getConnectedAccounts(){return n(this,void 0,void 0,function*(){return(this.verifiedCredentials||[]).map(t=>null==t?void 0:t.address).filter(t=>"string"==typeof t)})}get turnkeyAddress(){var t;let{address:e}=null!==(t=this.verifiedCredential)&&void 0!==t?t:{};return e}get walletProperties(){let{walletProperties:t}=this.verifiedCredential||{};return t}set verifiedCredentials(t){this._verifiedCredentials=t}get verifiedCredentials(){return this._verifiedCredentials}set verifiedCredential(t){this._verifiedCredential=t}get verifiedCredential(){return this._verifiedCredential}setSessionKeyFetcher(t){this.createOrRestoreSessionFetcherFunction=t}setSessionKeyRemoveFunction(t){this.removeSessionKeysFunction=t}createOrRestoreSession(){return n(this,arguments,void 0,function*(){let{ignoreRestore:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isSessionKeyCompatible()||L.isLoadingSession)return;if(!this.createOrRestoreSessionFetcherFunction)throw new f.kW("Cannot register session key to init provider");let{sessionKeys:e}=L;if((null==e?void 0:e.publicKey)&&!(new Date>=new Date(e.expirationDate)))return e.publicKey;try{L.isLoadingSession=!0;let e=yield this.createOrRestoreSessionFetcherFunction({ignoreRestore:t});return L.sessionKeys=e,L.apiKeyStamper=new h.z9({apiPrivateKey:e.privateKey,apiPublicKey:e.publicKey}),C.apiKeyStamper=L.apiKeyStamper,S.setMetaData("sessionApiPublicKey",e.publicKey),e.publicKey}catch(t){throw new f.kW("Failed to create or restore session")}finally{L.isLoadingSession=!1}})}isSessionKeyCompatible(){var t;let e=null===(t=this.verifiedCredential)||void 0===t?void 0:t.walletProperties;return!!(null==e?void 0:e.isSessionKeyCompatible)}isSessionActive(){return n(this,void 0,void 0,function*(){return!!((yield this.getAddress())&&L.sessionKeys&&L.apiKeyStamper)})}get sessionKeys(){return L.sessionKeys}setLoggerMetadata(){var t,e,r;S.setMetaData("turnkeySubOrganizationId",null===(e=null===(t=this._verifiedCredential)||void 0===t?void 0:t.walletProperties)||void 0===e?void 0:e.turnkeySubOrganizationId),S.setMetaData("walletId",null===(r=this._verifiedCredential)||void 0===r?void 0:r.id);let i="Unknown";this.isSessionKeyCompatible()?i="SessionKeys":"passkey"===this.__authenticatorMethodHandler.recoveryType?i="Passkey":"email"===this.__authenticatorMethodHandler.recoveryType&&(i="EmailAuth"),S.setMetaData("authMethod",i)}constructor(t,e){if(super(e),this.requiresNonDynamicEmailOtp=!1,this.isEmbeddedWallet=!0,this.removeSessionKeys=()=>n(this,void 0,void 0,function*(){L.sessionKeys=void 0,L.apiKeyStamper=void 0,C.apiKeyStamper=void 0,"function"==typeof(this===null||void 0===this?void 0:this.removeSessionKeysFunction)&&this.removeSessionKeysFunction()}),!e.appName)throw Error("appName not set");this.name=t.name,this.overrideKey=t.key,this.appName=e.appName,this.__authenticatorMethodHandler=R,this.__exportHandler=new C}}L.isLoadingSession=!1;let q={TurnkeyHD:{key:"turnkeyhd",name:"Turnkey HD"}},M=(t,e)=>null==t?void 0:t.filter(t=>{let{walletName:r,chain:i}=t;return(null==r?void 0:r.startsWith("turnkey"))&&e===i});function K(t,e,r,i){return new(r||(r=Promise))(function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?n(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,a)}l((i=i.apply(t,e||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var D=r(49430),z=r(93692),H=r(46856).Buffer;class j{constructor(t){this.organizationId=t.organizationId,this.client=t.client}async signAllTransactions(t,e){let r=new z.nh(e),i=t.map(t=>this.getMessageToSign(t).toString("hex")),n=await this.signRawPayloads(i,e),s=n.signRawPayloadsResult?.signatures?.map(t=>`${t?.r}${t?.s}`);for(let e in t)t[e]?.addSignature(r,H.from(s[e],"hex"));return t}async addSignature(t,e){let r=new z.nh(e),i=this.getMessageToSign(t),n=await this.signRawPayload(i.toString("hex"),e),s=`${n.signRawPayloadResult?.r}${n.signRawPayloadResult?.s}`;t.addSignature(r,H.from(s,"hex"))}async signMessage(t,e){let r=await this.signRawPayload(H.from(t).toString("hex"),e);return H.from(`${r.signRawPayloadResult?.r}${r.signRawPayloadResult?.s}`,"hex")}async signRawPayload(t,e){let{id:r,status:i,type:n,result:s}=(await this.client.signRawPayload({type:"ACTIVITY_TYPE_SIGN_RAW_PAYLOAD_V2",organizationId:this.organizationId,timestampMs:String(Date.now()),parameters:{signWith:e,payload:t,encoding:"PAYLOAD_ENCODING_HEXADECIMAL",hashFunction:"HASH_FUNCTION_NOT_APPLICABLE"}})).activity;if("ACTIVITY_STATUS_COMPLETED"!==i)throw new T.eM({message:`Expected COMPLETED status, got ${i}`,activityId:r,activityStatus:i,activityType:n});return s}async signRawPayloads(t,e){let{id:r,status:i,type:n,result:s}=(await this.client.signRawPayloads({type:"ACTIVITY_TYPE_SIGN_RAW_PAYLOADS",organizationId:this.organizationId,timestampMs:String(Date.now()),parameters:{signWith:e,payloads:t,encoding:"PAYLOAD_ENCODING_HEXADECIMAL",hashFunction:"HASH_FUNCTION_NOT_APPLICABLE"}})).activity;if("ACTIVITY_STATUS_COMPLETED"!==i)throw new T.eM({message:`Expected COMPLETED status, got ${i}`,activityId:r,activityStatus:i,activityType:n});return s}getMessageToSign(t){return"function"==typeof t.serializeMessage?t.serializeMessage():H.from(t.message.serialize())}}function F(t,e,r,i){return new(r||(r=Promise))(function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?n(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,a)}l((i=i.apply(t,e||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var W=r(45868);class $ extends d.w5{getConnection(){return F(this,void 0,void 0,function*(){return this._connector.getWalletClient()})}getSigner(){return F(this,void 0,void 0,function*(){let t=yield this._connector.getSigner();if(!t)throw Error("unable to retrieve Solana signer");try{var e=this;return(0,f.fK)(t,{signAllTransactions:e=>F(this,void 0,void 0,function*(){return yield this.sync(),t.signAllTransactions(e)}),signAndSendTransaction:function(r){for(var i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return F(e,void 0,void 0,function*(){return yield this.sync(),t.signAndSendTransaction(r,...n)})},signMessage:function(r){for(var i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return F(e,void 0,void 0,function*(){return yield this.sync(),t.signMessage(r,...n)})},signTransaction:e=>F(this,void 0,void 0,function*(){return yield this.sync(),t.signTransaction(e)})})}catch(e){return d.kg.warn("Failed to add logic to auto-sync the wallet. Signer might be out of sync for wallet: ".concat(this._connector.name," (").concat(this.address,")"),e),t}})}}let J=t=>{let e=t.match(/Nonce: (.*)/);if(e&&2===e.length)return e[1]},V=t=>"".concat(t,"_").concat("genesis-hash");var G=r(46856).Buffer;let Y=new D.nh("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr");class Z extends d.VY{getNetwork(){return F(this,void 0,void 0,function*(){let t=this.getWalletClient(),e=localStorage.getItem(V(t.rpcEndpoint));return e||(e=yield t.getGenesisHash(),localStorage.setItem(V(t.rpcEndpoint),e)),"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"===(e=e.substring(0,32))?"mainnet":"EtWTRABZaYq6iMfeYKouRu166VU2xqa1"===e?"devnet":"testnet"})}endSession(){return F(this,void 0,void 0,function*(){localStorage.removeItem(V(this.getWalletClient().rpcEndpoint))})}getWalletClient(){var t;let[e]=this.solNetworks;if(!e)throw new f.kW("No enabled networks");let r=(null===(t=e.privateCustomerRpcUrls)||void 0===t?void 0:t[0])||e.rpcUrls[0];return new D.ew(r,"confirmed")}getPublicClient(){return F(this,void 0,void 0,function*(){var t;if(0===this.solNetworks.length)return;let e={cosmos:[],evm:void 0,solana:this.solNetworks,starknet:void 0};if(!this.chainRpcProviders)return;let r=this.chainRpcProviders.getProviders(e);return null===(t=this.chainRpcProviders.getSolanaProviderByChainId(r,"101"))||void 0===t?void 0:t.provider})}getBalance(t){return F(this,void 0,void 0,function*(){let e=new D.nh(t);return this.lamportsToSol((yield this.getWalletClient().getBalance(e))).toString()})}lamportsToSol(t){return t/1e9}canConnectWithHardwareWallet(){let t=(0,W.IP)(this.walletBook,this.key);return!!t&&!!t.hardwareWallets&&t.hardwareWallets.includes("ledger")}signMessage(t){let e=Object.create(null,{signMessage:{get:()=>super.signMessage}});return F(this,void 0,void 0,function*(){if(this.isHardwareWalletEnabled)throw new f.B8("Message signing is currently not supported on ".concat(this.name," hardware wallet.\n          You can use signMessageViaTransaction instead to achieve similar functionality\n          by signing a transaction with a memo instruction.\n          You can read more about it here https://github.com/solana-labs/solana/issues/21366"));return e.signMessage.call(this,t)})}proveOwnership(t,e){let r=Object.create(null,{proveOwnership:{get:()=>super.proveOwnership}});return F(this,void 0,void 0,function*(){if(yield this.validateActiveWallet(t),this.isHardwareWalletEnabled){let t=J(e);if(!t)throw new f.kW("Nonce missing");return this.signMessageViaTransaction(t)}return r.proveOwnership.call(this,t,e)})}signMessageViaTransaction(t){return F(this,void 0,void 0,function*(){let e=yield this.getAddress();if(!e)throw new f.kW("Address missing");let r=this.buildAuthTx(t);r.feePayer=new D.nh(e),r.recentBlockhash=(yield this.getWalletClient().getLatestBlockhash()).blockhash;let i=yield this.getSigner();if(!i)throw new f.kW("Signer not found");return JSON.stringify({signedTransaction:{data:Array.from((yield i.signTransaction(r)).serialize()),type:"Buffer"}})})}buildAuthTx(t){let e=new D.YW;return e.add(new D.Sl({data:G.from(t,"utf8"),keys:[],programId:Y})),e}setVerifiedCredentials(t){this.verifiedCredentials=t}isLedgerAddress(t){return(0,f.XP)(t,this.verifiedCredentials)}constructor(t){var e;super(t),this.isHardwareWalletEnabled=!1,this.verifiedCredentials=[],this.ChainWallet=$,this.supportedChains=["SOL"],this.connectedChain="SOL",this.solNetworks=t.solNetworks,this.chainRpcProviders=t.chainRpcProviders,null===(e=this.chainRpcProviders)||void 0===e||e.registerSolanaProviders()}}var X=r(59443);X.lC.getSolanaProviderByChainId=(t,e)=>{var r;return null===(r=t.solana)||void 0===r?void 0:r.find(t=>t.chainId===e)},X.lC.registerSolanaProviders=()=>{X.lC.registerChainProviders(X.r0.SOLANA,t=>{let e={};return(null==t?void 0:t.solana)&&(e.solana=t.solana.map(t=>{var e;let r=(null===(e=t.privateCustomerRpcUrls)||void 0===e?void 0:e[0])||t.rpcUrls[0],i=new D.ew(r);return{chainId:t.chainId.toString(),chainName:t.name,provider:i}})),e.solana})};var Q=r(44205),tt=r(29877);let te=t=>({decode:t.decode.bind(t),encode:t.encode.bind(t)});var tr=r(46856).Buffer;let ti=t=>e=>{let r=(0,Q.Ik)(t,e),{encode:i,decode:n}=te(r);return r.decode=(t,e)=>{let r=n(t,e);return(0,tt.oU)(tr.from(r))},r.encode=(e,r,n)=>i((0,tt.k$)(e,t),r,n),r},tn=t=>e=>{let r=(0,Q.Ik)(t,e),{encode:i,decode:n}=te(r);return r.decode=(t,e)=>{let r=n(t,e);return(0,tt.Q5)(tr.from(r))},r.encode=(e,r,n)=>i((0,tt.zP)(e,t),r,n),r},ts=ti(8);tn(8),ti(16),tn(16),ti(24),tn(24),ti(32),tn(32);var to=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ta=Math.ceil,tl=Math.floor,tu="[BigNumber Error] ",tc=tu+"Number primitive has more than 15 significant digits: ",th=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function td(t){var e=0|t;return t>0||t===e?e:e-1}function tf(t){for(var e,r,i=1,n=t.length,s=t[0]+"";i<n;){for(r=14-(e=t[i++]+"").length;r--;e="0"+e);s+=e}for(n=s.length;48===s.charCodeAt(--n););return s.slice(0,n+1||1)}function tp(t,e){var r,i,n=t.c,s=e.c,o=t.s,a=e.s,l=t.e,u=e.e;if(!o||!a)return null;if(r=n&&!n[0],i=s&&!s[0],r||i)return r?i?0:-a:o;if(o!=a)return o;if(r=o<0,i=l==u,!n||!s)return i?0:!n^r?1:-1;if(!i)return l>u^r?1:-1;for(o=0,a=(l=n.length)<(u=s.length)?l:u;o<a;o++)if(n[o]!=s[o])return n[o]>s[o]^r?1:-1;return l==u?0:l>u^r?1:-1}function ty(t,e,r,i){if(t<e||t>r||t!==tl(t))throw Error(tu+(i||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function tg(t){var e=t.c.length-1;return td(t.e/14)==e&&t.c[e]%2!=0}function tm(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function tv(t,e,r){var i,n;if(e<0){for(n=r+".";++e;n+=r);t=n+t}else if(i=t.length,++e>i){for(n=r,e-=i;--e;n+=r);t+=n}else e<i&&(t=t.slice(0,e)+"."+t.slice(e));return t}new(function t(e){var r,i,n,s,o,a,l,u,c,h=x.prototype={constructor:x,toString:null,valueOf:null},d=new x(1),f=20,p=4,y=-7,g=21,m=-1e7,v=1e7,w=!1,b=1,_=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},A="0123456789abcdefghijklmnopqrstuvwxyz",S=!0;function x(t,e){var r,i,n,s,o,a,l,h,d=this;if(!(d instanceof x))return new x(t,e);if(null==e){if(t&&!0===t._isBigNumber){d.s=t.s,!t.c||t.e>v?d.c=d.e=null:t.e<m?d.c=[d.e=0]:(d.e=t.e,d.c=t.c.slice());return}if((a="number"==typeof t)&&0*t==0){if(d.s=1/t<0?(t=-t,-1):1,t===~~t){for(s=0,o=t;o>=10;o/=10,s++);s>v?d.c=d.e=null:(d.e=s,d.c=[t]);return}h=String(t)}else{if(!to.test(h=String(t)))return c(d,h,a);d.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(s=h.indexOf("."))>-1&&(h=h.replace(".","")),(o=h.search(/e/i))>0?(s<0&&(s=o),s+=+h.slice(o+1),h=h.substring(0,o)):s<0&&(s=h.length)}else{if(ty(e,2,A.length,"Base"),10==e&&S)return I(d=new x(t),f+d.e+1,p);if(h=String(t),a="number"==typeof t){if(0*t!=0)return c(d,h,a,e);if(d.s=1/t<0?(h=h.slice(1),-1):1,x.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(tc+t)}else d.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(r=A.slice(0,e),s=o=0,l=h.length;o<l;o++)if(0>r.indexOf(i=h.charAt(o))){if("."==i){if(o>s){s=l;continue}}else if(!n&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){n=!0,o=-1,s=0;continue}return c(d,String(t),a,e)}a=!1,(s=(h=u(h,e,10,d.s)).indexOf("."))>-1?h=h.replace(".",""):s=h.length}for(o=0;48===h.charCodeAt(o);o++);for(l=h.length;48===h.charCodeAt(--l););if(h=h.slice(o,++l)){if(l-=o,a&&x.DEBUG&&l>15&&(t>9007199254740991||t!==tl(t)))throw Error(tc+d.s*t);if((s=s-o-1)>v)d.c=d.e=null;else if(s<m)d.c=[d.e=0];else{if(d.e=s,d.c=[],o=(s+1)%14,s<0&&(o+=14),o<l){for(o&&d.c.push(+h.slice(0,o)),l-=14;o<l;)d.c.push(+h.slice(o,o+=14));o=14-(h=h.slice(o)).length}else o-=l;for(;o--;h+="0");d.c.push(+h)}}else d.c=[d.e=0]}function T(t,e,r,i){var n,s,o,a,l;if(null==r?r=p:ty(r,0,8),!t.c)return t.toString();if(n=t.c[0],o=t.e,null==e)l=tf(t.c),l=1==i||2==i&&(o<=y||o>=g)?tm(l,o):tv(l,o,"0");else if(s=(t=I(new x(t),e,r)).e,a=(l=tf(t.c)).length,1==i||2==i&&(e<=s||s<=y)){for(;a<e;l+="0",a++);l=tm(l,s)}else if(e-=o,l=tv(l,s,"0"),s+1>a){if(--e>0)for(l+=".";e--;l+="0");}else if((e+=s-a)>0)for(s+1==a&&(l+=".");e--;l+="0");return t.s<0&&n?"-"+l:l}function k(t,e){for(var r,i,n=1,s=new x(t[0]);n<t.length;n++)(i=new x(t[n])).s&&(r=tp(s,i))!==e&&(0!==r||s.s!==e)||(s=i);return s}function O(t,e,r){for(var i=1,n=e.length;!e[--n];e.pop());for(n=e[0];n>=10;n/=10,i++);return(r=i+14*r-1)>v?t.c=t.e=null:r<m?t.c=[t.e=0]:(t.e=r,t.c=e),t}function I(t,e,r,i){var n,s,o,a,l,u,c,h=t.c;if(h){t:{for(n=1,a=h[0];a>=10;a/=10,n++);if((s=e-n)<0)s+=14,o=e,c=tl((l=h[u=0])/th[n-o-1]%10);else if((u=ta((s+1)/14))>=h.length){if(i){for(;h.length<=u;h.push(0));l=c=0,n=1,s%=14,o=s-14+1}else break t}else{for(n=1,l=a=h[u];a>=10;a/=10,n++);s%=14,c=(o=s-14+n)<0?0:tl(l/th[n-o-1]%10)}if(i=i||e<0||null!=h[u+1]||(o<0?l:l%th[n-o-1]),i=r<4?(c||i)&&(0==r||r==(t.s<0?3:2)):c>5||5==c&&(4==r||i||6==r&&(s>0?o>0?l/th[n-o]:0:h[u-1])%10&1||r==(t.s<0?8:7)),e<1||!h[0])return h.length=0,i?(e-=t.e+1,h[0]=th[(14-e%14)%14],t.e=-e||0):h[0]=t.e=0,t;if(0==s?(h.length=u,a=1,u--):(h.length=u+1,a=th[14-s],h[u]=o>0?tl(l/th[n-o]%th[o])*a:0),i)for(;;){if(0==u){for(s=1,o=h[0];o>=10;o/=10,s++);for(o=h[0]+=a,a=1;o>=10;o/=10,a++);s!=a&&(t.e++,1e14==h[0]&&(h[0]=1));break}if(h[u]+=a,1e14!=h[u])break;h[u--]=0,a=1}for(s=h.length;0===h[--s];h.pop());}t.e>v?t.c=t.e=null:t.e<m&&(t.c=[t.e=0])}return t}function P(t){var e,r=t.e;return null===r?t.toString():(e=tf(t.c),e=r<=y||r>=g?tm(e,r):tv(e,r,"0"),t.s<0?"-"+e:e)}return x.clone=t,x.ROUND_UP=0,x.ROUND_DOWN=1,x.ROUND_CEIL=2,x.ROUND_FLOOR=3,x.ROUND_HALF_UP=4,x.ROUND_HALF_DOWN=5,x.ROUND_HALF_EVEN=6,x.ROUND_HALF_CEIL=7,x.ROUND_HALF_FLOOR=8,x.EUCLID=9,x.config=x.set=function(t){var e,r;if(null!=t){if("object"==typeof t){if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(ty(r=t[e],0,1e9,e),f=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(ty(r=t[e],0,8,e),p=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((r=t[e])&&r.pop?(ty(r[0],-1e9,0,e),ty(r[1],0,1e9,e),y=r[0],g=r[1]):(ty(r,-1e9,1e9,e),y=-(g=r<0?-r:r))),t.hasOwnProperty(e="RANGE")){if((r=t[e])&&r.pop)ty(r[0],-1e9,-1,e),ty(r[1],1,1e9,e),m=r[0],v=r[1];else if(ty(r,-1e9,1e9,e),r)m=-(v=r<0?-r:r);else throw Error(tu+e+" cannot be zero: "+r)}if(t.hasOwnProperty(e="CRYPTO")){if(!!(r=t[e])===r){if(r){if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))w=r;else throw w=!r,Error(tu+"crypto unavailable")}else w=r}else throw Error(tu+e+" not true or false: "+r)}if(t.hasOwnProperty(e="MODULO_MODE")&&(ty(r=t[e],0,9,e),b=r),t.hasOwnProperty(e="POW_PRECISION")&&(ty(r=t[e],0,1e9,e),_=r),t.hasOwnProperty(e="FORMAT")){if("object"==typeof(r=t[e]))E=r;else throw Error(tu+e+" not an object: "+r)}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(tu+e+" invalid: "+r);S="0123456789"==r.slice(0,10),A=r}}else throw Error(tu+"Object expected: "+t)}return{DECIMAL_PLACES:f,ROUNDING_MODE:p,EXPONENTIAL_AT:[y,g],RANGE:[m,v],CRYPTO:w,MODULO_MODE:b,POW_PRECISION:_,FORMAT:E,ALPHABET:A}},x.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!x.DEBUG)return!0;var e,r,i=t.c,n=t.e,s=t.s;t:if("[object Array]"==({}).toString.call(i)){if((1===s||-1===s)&&n>=-1e9&&n<=1e9&&n===tl(n)){if(0===i[0]){if(0===n&&1===i.length)return!0;break t}if((e=(n+1)%14)<1&&(e+=14),String(i[0]).length==e){for(e=0;e<i.length;e++)if((r=i[e])<0||r>=1e14||r!==tl(r))break t;if(0!==r)return!0}}}else if(null===i&&null===n&&(null===s||1===s||-1===s))return!0;throw Error(tu+"Invalid BigNumber: "+t)},x.maximum=x.max=function(){return k(arguments,-1)},x.minimum=x.min=function(){return k(arguments,1)},x.random=(r=9007199254740992*Math.random()&2097151?function(){return tl(9007199254740992*Math.random())}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)},function(t){var e,i,n,s,o,a=0,l=[],u=new x(d);if(null==t?t=f:ty(t,0,1e9),s=ta(t/14),w){if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(s*=2));a<s;)(o=131072*e[a]+(e[a+1]>>>11))>=9e15?(i=crypto.getRandomValues(new Uint32Array(2)),e[a]=i[0],e[a+1]=i[1]):(l.push(o%1e14),a+=2);a=s/2}else if(crypto.randomBytes){for(e=crypto.randomBytes(s*=7);a<s;)(o=(31&e[a])*281474976710656+1099511627776*e[a+1]+4294967296*e[a+2]+16777216*e[a+3]+(e[a+4]<<16)+(e[a+5]<<8)+e[a+6])>=9e15?crypto.randomBytes(7).copy(e,a):(l.push(o%1e14),a+=7);a=s/7}else throw w=!1,Error(tu+"crypto unavailable")}if(!w)for(;a<s;)(o=r())<9e15&&(l[a++]=o%1e14);for(s=l[--a],t%=14,s&&t&&(o=th[14-t],l[a]=tl(s/o)*o);0===l[a];l.pop(),a--);if(a<0)l=[n=0];else{for(n=-1;0===l[0];l.splice(0,1),n-=14);for(a=1,o=l[0];o>=10;o/=10,a++);a<14&&(n-=14-a)}return u.e=n,u.c=l,u}),x.sum=function(){for(var t=1,e=arguments,r=new x(e[0]);t<e.length;)r=r.plus(e[t++]);return r},u=function(){var t="0123456789";function e(t,e,r,i){for(var n,s,o=[0],a=0,l=t.length;a<l;){for(s=o.length;s--;o[s]*=e);for(o[0]+=i.indexOf(t.charAt(a++)),n=0;n<o.length;n++)o[n]>r-1&&(null==o[n+1]&&(o[n+1]=0),o[n+1]+=o[n]/r|0,o[n]%=r)}return o.reverse()}return function(r,i,n,s,o){var a,u,c,h,d,y,g,m,v=r.indexOf("."),w=f,b=p;for(v>=0&&(h=_,_=0,r=r.replace(".",""),y=(m=new x(i)).pow(r.length-v),_=h,m.c=e(tv(tf(y.c),y.e,"0"),10,n,t),m.e=m.c.length),c=h=(g=e(r,i,n,o?(a=A,t):(a=t,A))).length;0==g[--h];g.pop());if(!g[0])return a.charAt(0);if(v<0?--c:(y.c=g,y.e=c,y.s=s,g=(y=l(y,m,w,b,n)).c,d=y.r,c=y.e),v=g[u=c+w+1],h=n/2,d=d||u<0||null!=g[u+1],d=b<4?(null!=v||d)&&(0==b||b==(y.s<0?3:2)):v>h||v==h&&(4==b||d||6==b&&1&g[u-1]||b==(y.s<0?8:7)),u<1||!g[0])r=d?tv(a.charAt(1),-w,a.charAt(0)):a.charAt(0);else{if(g.length=u,d)for(--n;++g[--u]>n;)g[u]=0,u||(++c,g=[1].concat(g));for(h=g.length;!g[--h];);for(v=0,r="";v<=h;r+=a.charAt(g[v++]));r=tv(r,c,a.charAt(0))}return r}}(),l=function(){function t(t,e,r){var i,n,s,o,a=0,l=t.length,u=e%1e7,c=e/1e7|0;for(t=t.slice();l--;)i=c*(s=t[l]%1e7)+(o=t[l]/1e7|0)*u,a=((n=u*s+i%1e7*1e7+a)/r|0)+(i/1e7|0)+c*o,t[l]=n%r;return a&&(t=[a].concat(t)),t}function e(t,e,r,i){var n,s;if(r!=i)s=r>i?1:-1;else for(n=s=0;n<r;n++)if(t[n]!=e[n]){s=t[n]>e[n]?1:-1;break}return s}function r(t,e,r,i){for(var n=0;r--;)t[r]-=n,n=t[r]<e[r]?1:0,t[r]=n*i+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(i,n,s,o,a){var l,u,c,h,d,f,p,y,g,m,v,w,b,_,E,A,S,T=i.s==n.s?1:-1,k=i.c,O=n.c;if(!k||!k[0]||!O||!O[0])return new x(i.s&&n.s&&(k?!O||k[0]!=O[0]:O)?k&&0==k[0]||!O?0*T:T/0:NaN);for(g=(y=new x(T)).c=[],T=s+(u=i.e-n.e)+1,a||(a=1e14,u=td(i.e/14)-td(n.e/14),T=T/14|0),c=0;O[c]==(k[c]||0);c++);if(O[c]>(k[c]||0)&&u--,T<0)g.push(1),h=!0;else{for(_=k.length,A=O.length,c=0,T+=2,(d=tl(a/(O[0]+1)))>1&&(O=t(O,d,a),k=t(k,d,a),A=O.length,_=k.length),b=A,v=(m=k.slice(0,A)).length;v<A;m[v++]=0);S=[0].concat(S=O.slice()),E=O[0],O[1]>=a/2&&E++;do{if(d=0,(l=e(O,m,A,v))<0){if(w=m[0],A!=v&&(w=w*a+(m[1]||0)),(d=tl(w/E))>1)for(d>=a&&(d=a-1),p=(f=t(O,d,a)).length,v=m.length;1==e(f,m,p,v);)d--,r(f,A<p?S:O,p,a),p=f.length,l=1;else 0==d&&(l=d=1),p=(f=O.slice()).length;if(p<v&&(f=[0].concat(f)),r(m,f,v,a),v=m.length,-1==l)for(;1>e(O,m,A,v);)d++,r(m,A<v?S:O,v,a),v=m.length}else 0===l&&(d++,m=[0]);g[c++]=d,m[0]?m[v++]=k[b]||0:(m=[k[b]],v=1)}while((b++<_||null!=m[0])&&T--);h=null!=m[0],g[0]||g.splice(0,1)}if(1e14==a){for(c=1,T=g[0];T>=10;T/=10,c++);I(y,s+(y.e=c+14*u-1)+1,o,h)}else y.e=u,y.r=+h;return y}}(),i=/^(-?)0([xbo])(?=\w[\w.]*$)/i,n=/^([^.]+)\.$/,s=/^\.([^.]+)$/,o=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g,c=function(t,e,r,l){var u,c=r?e:e.replace(a,"");if(o.test(c))t.s=isNaN(c)?null:c<0?-1:1;else{if(!r&&(c=c.replace(i,function(t,e,r){return u="x"==(r=r.toLowerCase())?16:"b"==r?2:8,l&&l!=u?t:e}),l&&(u=l,c=c.replace(n,"$1").replace(s,"0.$1")),e!=c))return new x(c,u);if(x.DEBUG)throw Error(tu+"Not a"+(l?" base "+l:"")+" number: "+e);t.s=null}t.c=t.e=null},h.absoluteValue=h.abs=function(){var t=new x(this);return t.s<0&&(t.s=1),t},h.comparedTo=function(t,e){return tp(this,new x(t,e))},h.decimalPlaces=h.dp=function(t,e){var r,i,n;if(null!=t)return ty(t,0,1e9),null==e?e=p:ty(e,0,8),I(new x(this),t+this.e+1,e);if(!(r=this.c))return null;if(i=((n=r.length-1)-td(this.e/14))*14,n=r[n])for(;n%10==0;n/=10,i--);return i<0&&(i=0),i},h.dividedBy=h.div=function(t,e){return l(this,new x(t,e),f,p)},h.dividedToIntegerBy=h.idiv=function(t,e){return l(this,new x(t,e),0,1)},h.exponentiatedBy=h.pow=function(t,e){var r,i,n,s,o,a,l,u,c,h=this;if((t=new x(t)).c&&!t.isInteger())throw Error(tu+"Exponent not an integer: "+P(t));if(null!=e&&(e=new x(e)),a=t.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!t.c||!t.c[0])return c=new x(Math.pow(+P(h),a?t.s*(2-tg(t)):+P(t))),e?c.mod(e):c;if(l=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new x(NaN);(i=!l&&h.isInteger()&&e.isInteger())&&(h=h.mod(e))}else{if(t.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||a&&h.c[1]>=24e7:h.c[0]<8e13||a&&h.c[0]<=9999975e7)))return s=h.s<0&&tg(t)?-0:0,h.e>-1&&(s=1/s),new x(l?1/s:s);_&&(s=ta(_/14+2))}for(a?(r=new x(.5),l&&(t.s=1),u=tg(t)):u=(n=Math.abs(+P(t)))%2,c=new x(d);;){if(u){if(!(c=c.times(h)).c)break;s?c.c.length>s&&(c.c.length=s):i&&(c=c.mod(e))}if(n){if(0===(n=tl(n/2)))break;u=n%2}else if(I(t=t.times(r),t.e+1,1),t.e>14)u=tg(t);else{if(0==(n=+P(t)))break;u=n%2}h=h.times(h),s?h.c&&h.c.length>s&&(h.c.length=s):i&&(h=h.mod(e))}return i?c:(l&&(c=d.div(c)),e?c.mod(e):s?I(c,_,p,o):c)},h.integerValue=function(t){var e=new x(this);return null==t?t=p:ty(t,0,8),I(e,e.e+1,t)},h.isEqualTo=h.eq=function(t,e){return 0===tp(this,new x(t,e))},h.isFinite=function(){return!!this.c},h.isGreaterThan=h.gt=function(t,e){return tp(this,new x(t,e))>0},h.isGreaterThanOrEqualTo=h.gte=function(t,e){return 1===(e=tp(this,new x(t,e)))||0===e},h.isInteger=function(){return!!this.c&&td(this.e/14)>this.c.length-2},h.isLessThan=h.lt=function(t,e){return 0>tp(this,new x(t,e))},h.isLessThanOrEqualTo=h.lte=function(t,e){return -1===(e=tp(this,new x(t,e)))||0===e},h.isNaN=function(){return!this.s},h.isNegative=function(){return this.s<0},h.isPositive=function(){return this.s>0},h.isZero=function(){return!!this.c&&0==this.c[0]},h.minus=function(t,e){var r,i,n,s,o=this.s;if(e=(t=new x(t,e)).s,!o||!e)return new x(NaN);if(o!=e)return t.s=-e,this.plus(t);var a=this.e/14,l=t.e/14,u=this.c,c=t.c;if(!a||!l){if(!u||!c)return u?(t.s=-e,t):new x(c?this:NaN);if(!u[0]||!c[0])return c[0]?(t.s=-e,t):new x(u[0]?this:3==p?-0:0)}if(a=td(a),l=td(l),u=u.slice(),o=a-l){for((s=o<0)?(o=-o,n=u):(l=a,n=c),n.reverse(),e=o;e--;n.push(0));n.reverse()}else for(i=(s=(o=u.length)<(e=c.length))?o:e,o=e=0;e<i;e++)if(u[e]!=c[e]){s=u[e]<c[e];break}if(s&&(n=u,u=c,c=n,t.s=-t.s),(e=(i=c.length)-(r=u.length))>0)for(;e--;u[r++]=0);for(e=1e14-1;i>o;){if(u[--i]<c[i]){for(r=i;r&&!u[--r];u[r]=e);--u[r],u[i]+=1e14}u[i]-=c[i]}for(;0==u[0];u.splice(0,1),--l);return u[0]?O(t,u,l):(t.s=3==p?-1:1,t.c=[t.e=0],t)},h.modulo=h.mod=function(t,e){var r,i;return(t=new x(t,e),this.c&&t.s&&(!t.c||t.c[0]))?t.c&&(!this.c||this.c[0])?(9==b?(i=t.s,t.s=1,r=l(this,t,0,3),t.s=i,r.s*=i):r=l(this,t,0,b),(t=this.minus(r.times(t))).c[0]||1!=b||(t.s=this.s),t):new x(this):new x(NaN)},h.multipliedBy=h.times=function(t,e){var r,i,n,s,o,a,l,u,c,h,d,f,p,y=this.c,g=(t=new x(t,e)).c;if(!y||!g||!y[0]||!g[0])return this.s&&t.s&&(!y||y[0]||g)&&(!g||g[0]||y)?(t.s*=this.s,y&&g?(t.c=[0],t.e=0):t.c=t.e=null):t.c=t.e=t.s=null,t;for(i=td(this.e/14)+td(t.e/14),t.s*=this.s,(l=y.length)<(h=g.length)&&(p=y,y=g,g=p,n=l,l=h,h=n),n=l+h,p=[];n--;p.push(0));for(n=h;--n>=0;){for(r=0,d=g[n]%1e7,f=g[n]/1e7|0,s=n+(o=l);s>n;)a=f*(u=y[--o]%1e7)+(c=y[o]/1e7|0)*d,r=((u=d*u+a%1e7*1e7+p[s]+r)/1e14|0)+(a/1e7|0)+f*c,p[s--]=u%1e14;p[s]=r}return r?++i:p.splice(0,1),O(t,p,i)},h.negated=function(){var t=new x(this);return t.s=-t.s||null,t},h.plus=function(t,e){var r,i=this.s;if(e=(t=new x(t,e)).s,!i||!e)return new x(NaN);if(i!=e)return t.s=-e,this.minus(t);var n=this.e/14,s=t.e/14,o=this.c,a=t.c;if(!n||!s){if(!o||!a)return new x(i/0);if(!o[0]||!a[0])return a[0]?t:new x(o[0]?this:0*i)}if(n=td(n),s=td(s),o=o.slice(),i=n-s){for(i>0?(s=n,r=a):(i=-i,r=o),r.reverse();i--;r.push(0));r.reverse()}for((i=o.length)-(e=a.length)<0&&(r=a,a=o,o=r,e=i),i=0;e;)i=(o[--e]=o[e]+a[e]+i)/1e14|0,o[e]=1e14===o[e]?0:o[e]%1e14;return i&&(o=[i].concat(o),++s),O(t,o,s)},h.precision=h.sd=function(t,e){var r,i,n;if(null!=t&&!!t!==t)return ty(t,1,1e9),null==e?e=p:ty(e,0,8),I(new x(this),t,e);if(!(r=this.c))return null;if(i=14*(n=r.length-1)+1,n=r[n]){for(;n%10==0;n/=10,i--);for(n=r[0];n>=10;n/=10,i++);}return t&&this.e+1>i&&(i=this.e+1),i},h.shiftedBy=function(t){return ty(t,-9007199254740991,9007199254740991),this.times("1e"+t)},h.squareRoot=h.sqrt=function(){var t,e,r,i,n,s=this.c,o=this.s,a=this.e,u=f+4,c=new x("0.5");if(1!==o||!s||!s[0])return new x(!o||o<0&&(!s||s[0])?NaN:s?this:1/0);if(0==(o=Math.sqrt(+P(this)))||o==1/0?(((e=tf(s)).length+a)%2==0&&(e+="0"),o=Math.sqrt(+e),a=td((a+1)/2)-(a<0||a%2),r=new x(e=o==1/0?"5e"+a:(e=o.toExponential()).slice(0,e.indexOf("e")+1)+a)):r=new x(o+""),r.c[0]){for((o=(a=r.e)+u)<3&&(o=0);;)if(n=r,r=c.times(n.plus(l(this,n,u,1))),tf(n.c).slice(0,o)===(e=tf(r.c)).slice(0,o)){if(r.e<a&&--o,"9999"!=(e=e.slice(o-3,o+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(I(r,r.e+f+2,1),t=!r.times(r).eq(this));break}if(!i&&(I(n,n.e+f+2,0),n.times(n).eq(this))){r=n;break}u+=4,o+=4,i=1}}return I(r,r.e+f+1,p,t)},h.toExponential=function(t,e){return null!=t&&(ty(t,0,1e9),t++),T(this,t,e,1)},h.toFixed=function(t,e){return null!=t&&(ty(t,0,1e9),t=t+this.e+1),T(this,t,e)},h.toFormat=function(t,e,r){var i;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=E;else if("object"!=typeof r)throw Error(tu+"Argument not an object: "+r);if(i=this.toFixed(t,e),this.c){var n,s=i.split("."),o=+r.groupSize,a=+r.secondaryGroupSize,l=r.groupSeparator||"",u=s[0],c=s[1],h=this.s<0,d=h?u.slice(1):u,f=d.length;if(a&&(n=o,o=a,a=n,f-=n),o>0&&f>0){for(n=f%o||o,u=d.substr(0,n);n<f;n+=o)u+=l+d.substr(n,o);a>0&&(u+=l+d.slice(n)),h&&(u="-"+u)}i=c?u+(r.decimalSeparator||"")+((a=+r.fractionGroupSize)?c.replace(RegExp("\\d{"+a+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):c):u}return(r.prefix||"")+i+(r.suffix||"")},h.toFraction=function(t){var e,r,i,n,s,o,a,u,c,h,f,y,g=this.c;if(null!=t&&(!(a=new x(t)).isInteger()&&(a.c||1!==a.s)||a.lt(d)))throw Error(tu+"Argument "+(a.isInteger()?"out of range: ":"not an integer: ")+P(a));if(!g)return new x(this);for(e=new x(d),c=r=new x(d),i=u=new x(d),y=tf(g),s=e.e=y.length-this.e-1,e.c[0]=th[(o=s%14)<0?14+o:o],t=!t||a.comparedTo(e)>0?s>0?e:c:a,o=v,v=1/0,a=new x(y),u.c[0]=0;h=l(a,e,0,1),1!=(n=r.plus(h.times(i))).comparedTo(t);)r=i,i=n,c=u.plus(h.times(n=c)),u=n,e=a.minus(h.times(n=e)),a=n;return n=l(t.minus(r),i,0,1),u=u.plus(n.times(c)),r=r.plus(n.times(i)),u.s=c.s=this.s,s*=2,f=1>l(c,i,s,p).minus(this).abs().comparedTo(l(u,r,s,p).minus(this).abs())?[c,i]:[u,r],v=o,f},h.toNumber=function(){return+P(this)},h.toPrecision=function(t,e){return null!=t&&ty(t,1,1e9),T(this,t,e,2)},h.toString=function(t){var e,r=this,i=r.s,n=r.e;return null===n?i?(e="Infinity",i<0&&(e="-"+e)):e="NaN":(null==t?e=n<=y||n>=g?tm(tf(r.c),n):tv(tf(r.c),n,"0"):10===t&&S?e=tv(tf((r=I(new x(r),f+n+1,p)).c),r.e,"0"):(ty(t,2,A.length,"Base"),e=u(tv(tf(r.c),n,"0"),10,t,i,!0)),i<0&&r.c[0]&&(e="-"+e)),e},h.valueOf=h.toJSON=function(){return P(this)},h._isBigNumber=!0,h[Symbol.toStringTag]="BigNumber",h[Symbol.for("nodejs.util.inspect.custom")]=h.valueOf,null!=e&&x.set(e),x}())("1e+18");let tw=t=>{let e=(0,Q.Ik)(32,t),{encode:r,decode:i}=te(e);return e.decode=(t,e)=>{let r=i(t,e);return new z.nh(r)},e.encode=(t,e,i)=>r(t.toBuffer(),e,i),e},tb=new D.nh("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new D.nh("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");let t_=new D.nh("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new D.nh("So11111111111111111111111111111111111111112"),new D.nh("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");class tE extends Error{constructor(t){super(t)}}class tA extends tE{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}async function tS(t,e,r=!1,i=tb,n=t_){if(!r&&!D.nh.isOnCurve(e.toBuffer()))throw new tA;let[s]=await D.nh.findProgramAddress([e.toBuffer(),i.toBuffer(),t.toBuffer()],n);return s}r(46856).Buffer,(0,Q.n_)([(0,Q.Jq)("mintAuthorityOption"),tw("mintAuthority"),ts("supply"),(0,Q.u8)("decimals"),(t=>{let e=(0,Q.u8)(t),{encode:r,decode:i}=te(e);return e.decode=(t,e)=>!!i(t,e),e.encode=(t,e,i)=>r(Number(t),e,i),e})("isInitialized"),(0,Q.Jq)("freezeAuthorityOption"),tw("freezeAuthority")]).span;var tx=r(46856).Buffer;(o=u||(u={}))[o.InitializeMint=0]="InitializeMint",o[o.InitializeAccount=1]="InitializeAccount",o[o.InitializeMultisig=2]="InitializeMultisig",o[o.Transfer=3]="Transfer",o[o.Approve=4]="Approve",o[o.Revoke=5]="Revoke",o[o.SetAuthority=6]="SetAuthority",o[o.MintTo=7]="MintTo",o[o.Burn=8]="Burn",o[o.CloseAccount=9]="CloseAccount",o[o.FreezeAccount=10]="FreezeAccount",o[o.ThawAccount=11]="ThawAccount",o[o.TransferChecked=12]="TransferChecked",o[o.ApproveChecked=13]="ApproveChecked",o[o.MintToChecked=14]="MintToChecked",o[o.BurnChecked=15]="BurnChecked",o[o.InitializeAccount2=16]="InitializeAccount2",o[o.SyncNative=17]="SyncNative",o[o.InitializeAccount3=18]="InitializeAccount3",o[o.InitializeMultisig2=19]="InitializeMultisig2",o[o.InitializeMint2=20]="InitializeMint2",o[o.GetAccountDataSize=21]="GetAccountDataSize",o[o.InitializeImmutableOwner=22]="InitializeImmutableOwner",o[o.AmountToUiAmount=23]="AmountToUiAmount",o[o.UiAmountToAmount=24]="UiAmountToAmount",o[o.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",o[o.TransferFeeExtension=26]="TransferFeeExtension",o[o.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",o[o.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",o[o.Reallocate=29]="Reallocate",o[o.MemoTransferExtension=30]="MemoTransferExtension",o[o.CreateNativeMint=31]="CreateNativeMint",o[o.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",o[o.InterestBearingMintExtension=33]="InterestBearingMintExtension",o[o.CpiGuardExtension=34]="CpiGuardExtension",o[o.InitializePermanentDelegate=35]="InitializePermanentDelegate",o[o.TransferHookExtension=36]="TransferHookExtension",o[o.MetadataPointerExtension=39]="MetadataPointerExtension",o[o.GroupPointerExtension=40]="GroupPointerExtension",o[o.GroupMemberPointerExtension=41]="GroupMemberPointerExtension";var tT=r(46856).Buffer;let tk=(0,Q.n_)([(0,Q.u8)("instruction"),ts("amount")]);class tO{parse(t){return BigInt(Math.round(1e9*parseFloat(t)))}parseNonNativeToken(t,e){return BigInt(Math.floor(Number(t)*Math.pow(10,e)))}format(t){let{precision:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(Number(t)/1e9).toLocaleString("fullwide",{maximumFractionDigits:20,minimumFractionDigits:0,useGrouping:!1});return(0,f.EZ)(r,{precision:e})}submit(){return F(this,void 0,void 0,function*(){let t=yield this.createTransaction();return this.onSubmit(t)})}getBalance(){return F(this,void 0,void 0,function*(){let t=new D.nh(this.from);return BigInt((yield this.connection.getBalance(t)))})}validateAddressFormat(t){return"dyn_send_transaction.multiple_recipients"===t||/^[1-9A-HJ-NP-Za-km-z]{32,44}$/.test(t)}fetchFee(){return F(this,void 0,void 0,function*(){let t;if(this.fee.gas)return;let e=yield this.createTransactionSafe();if(!e)return;let{blockhash:r}=yield this.connection.getLatestBlockhash();if("version"in e?(e.message.recentBlockhash=r,t=e.message):(e.recentBlockhash=r,e.feePayer=new D.nh(this.from),t=e.compileMessage()),!t)throw Error("Invalid transaction");let i=yield this.connection.getFeeForMessage(t),n=0;for(;null===i.value&&n<5;)i=yield this.connection.getFeeForMessage(t),n++;this.fee.gas=i.value?BigInt(i.value):void 0,!this.feeDeducted&&this.fee.gas&&this.value&&(this.value=this.value-this.fee.gas,this.feeDeducted=!0)})}createTransaction(){return F(this,void 0,void 0,function*(){var t;let{value:e,to:r,nonNativeAddress:i,nonNativeValue:n}=this;if(!r)throw Error("Destination is required");if(this.originalTransaction)return this.originalTransaction;let s=new D.YW,o=new D.nh(this.from),a=new D.nh(r);if(i&&n){let e;let r=new D.nh(i),l=null===(t=(yield this.connection.getTokenAccountsByOwner(o,{mint:r})).value[0])||void 0===t?void 0:t.pubkey;if(!l)throw Error("Source token account not found");try{e=yield tS(r,a),yield this.connection.getTokenAccountBalance(e)}catch(t){e=yield tS(r,a),s.add(function(t,e,r,i,n=tb,s=t_){return function(t,e,r,i,n,s=tb,o=t_){let a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:D.yc.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new D.Sl({keys:a,programId:o,data:n})}(t,e,r,i,tx.alloc(0),n,s)}(o,e,a,r))}s.add(function(t,e,r,i,n=[],s=tb){let o=function(t,e,r){if(r.length)for(let i of(t.push({pubkey:e,isSigner:!1,isWritable:!1}),r))t.push({pubkey:i instanceof D.nh?i:i.publicKey,isSigner:!0,isWritable:!1});else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],r,n),a=tT.alloc(tk.span);return tk.encode({instruction:u.Transfer,amount:BigInt(i)},a),new D.Sl({keys:o,programId:s,data:a})}(l,e,o,n))}else{let t=null!=e?e:BigInt(0);s.add(D.yc.transfer({fromPubkey:o,lamports:t,toPubkey:a}))}return s})}createTransactionSafe(){return F(this,void 0,void 0,function*(){try{return yield this.createTransaction()}catch(t){return}})}constructor({onSubmit:t,from:e,connection:r,originalTransaction:i}){this.chain="SOL",this.data=void 0,this.fee={gas:void 0},this.feeDeducted=!1,this.formatNonNativeToken=(t,e)=>(Number(t)/Number(Math.pow(10,e))).toString(),this.from=e,this.onSubmit=t,this.connection=r,this.originalTransaction=i}}r(46856).Buffer,r(46856).Buffer;let tI=t=>"SOL"===t.chain,tP=(t,e)=>{if(!t)throw Error("rpcUrl is required");return new D.ew(t,e)};var tU=r(46856).Buffer;let tB=(t,e,r)=>K(void 0,void 0,void 0,function*(){var i,n,s,o,a,l;let u;u="version"in t?yield e.simulateTransaction(t,{accounts:{addresses:[r],encoding:"base64"},replaceRecentBlockhash:!0}):yield e.simulateTransaction(t,void 0,[new D.nh(r)]);let c=yield e.getBalance(new D.nh(r));if(!(null===(s=null===(n=null===(i=null==u?void 0:u.value)||void 0===i?void 0:i.accounts)||void 0===n?void 0:n[0])||void 0===s?void 0:s.lamports)){d.kg.debug("Transaction simulation failed",u);let t=JSON.stringify({InstructionError:[0,{Custom:1}]}),e=JSON.stringify({InsufficientFundsForRent:{account_index:0}});if(JSON.stringify(null==u?void 0:u.value.err)===t||JSON.stringify(null==u?void 0:u.value.err)===e)throw Error("Insufficient funds");return}return BigInt(c-(null===(l=null===(a=null===(o=null==u?void 0:u.value)||void 0===o?void 0:o.accounts)||void 0===a?void 0:a[0])||void 0===l?void 0:l.lamports))}),tR=(t,e,r)=>K(void 0,void 0,void 0,function*(){var i;if(!t)throw new f.kW("Transaction is required");try{let n=[];if("version"in t){let r=t.message.addressTableLookups.map(t=>new D.nh(t.accountKey));if(r.length>0){let i=(yield Promise.all(r.map(t=>e.getAddressLookupTable(t)))).filter(t=>null!==t).map(t=>t.value);i.length>0&&(n=D.$Z.decompile(t.message,{addressLookupTableAccounts:i}).instructions)}else n=D.$Z.decompile(t.message).instructions}else n=t.instructions?t.instructions:null===(i=D.YW.from(tU.from(t.serialize())))||void 0===i?void 0:i.instructions;if(!(null==n?void 0:n.length))throw new f.kW("Bad formatted instruction");let s=n.filter(t=>t.programId.equals(D.yc.programId));if(s.length>0)return s.map(t=>{let e;try{e=D.vU.decodeTransfer(t)}catch(t){return{from:r,to:"Unknown"}}return{from:null==e?void 0:e.fromPubkey.toBase58(),to:null==e?void 0:e.toPubkey.toBase58()}});let o=yield Promise.all(n.map(t=>K(void 0,void 0,void 0,function*(){var i,n,s,o,a,l,u;if(t.programId.equals(tb)){let{source:c,destination:h}=function({programId:t,keys:[e,r,i,...n],data:s}){return{programId:t,keys:{source:e,destination:r,owner:i,multiSigners:n},data:tk.decode(s)}}(t).keys;if(h){if((null==h?void 0:h.pubkey.toBase58())===r)return{from:r,to:null==c?void 0:c.pubkey.toBase58()};let t=yield e.getParsedAccountInfo(h.pubkey),d=((null===(s=null===(n=null===(i=t.value)||void 0===i?void 0:i.data)||void 0===n?void 0:n.parsed)||void 0===s?void 0:s.type)==="account"?null===(u=null===(l=null===(a=null===(o=t.value)||void 0===o?void 0:o.data)||void 0===a?void 0:a.parsed)||void 0===l?void 0:l.info)||void 0===u?void 0:u.owner:null)||(null==h?void 0:h.pubkey.toBase58());return{from:r,to:d}}}return null})));if(null==(o=o.filter(t=>null!==t))?void 0:o.length)return o;let a=n.map(t=>({from:r,to:t.programId.toBase58()}));if(a.length)return a;return[{from:r,to:"Unknown"}]}catch(t){return d.kg.warn("[decodeTransaction]",t),[{from:r,to:"Unknown"}]}}),tN=t=>{let e=new Set;return t.forEach(t=>{t&&t.to&&e.add(t.to)}),1===e.size?e.values().next().value:"Multiple"},tC=new b.Y("DynamicSDK"),tL=()=>{var t,e,r,i;let n=null!==(t=f.V1.getItem("dynamic_store"))&&void 0!==t?t:f.V1.getItem("dynamic_store_demo");if(!(n=null===(e=null==n?void 0:n.settings)||void 0===e?void 0:e.security))return!1;let s=((null===(r=n.auth)||void 0===r?void 0:r.storage)||[]).includes(m.EEP.Cookie),o=!!(null===(i=n.externalAuth)||void 0===i?void 0:i.cookieName);return s||o},tq=t=>{var e;if(!t)return;let r=null===(e=t.split(".")[1])||void 0===e?void 0:e.replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(r&&decodeURIComponent(atob(r).split("").map(t=>"%".concat("00".concat(t.charCodeAt(0).toString(16)).slice(-2))).join("")))},tM=t=>{try{let e=tq(t);if(!e)return;return(0,m.fU_)(e)}catch(t){tC.error(t);return}},tK=()=>{var t;if("undefined"==typeof window)return;let e=null!==(t=f.V1.getItem("dynamic_min_authentication_token",{priority:["secureStorage","localStorage"]}))&&void 0!==t?t:f.V1.getItem("dynamic_min_authentication_token_demo",{priority:["secureStorage","localStorage"]});if(!(!e||tD(e)))return e},tD=t=>tz(tM(t)),tz=t=>{if(!t||!t.exp)return!0;let e=new Date(1e3*t.exp).getTime();return new Date().getTime()>=e};class tH{}tH.getBaseUrl=()=>{if(!tH.__defined__)throw Error("ApiEndpoint Base URL has not been initialized");return tH.__baseUrl__},tH.setBaseUrl=t=>{if(tH.__defined__){if(!t&&tH.__defined__)return;if(tH.__baseUrl__!==t)throw Error("ApiEndpoint baseUrl is already set to ".concat(tH.__baseUrl__,", cannot change it to ").concat(t))}else t?tH.__baseUrl__=t:tH.__baseUrl__=new m.VKt().basePath,tH.__defined__=!0;Object.freeze(tH)};let tj={"@dynamic-labs/sdk-api-core":"0.0.529","@dynamic-labs/utils":"3.0.2","@dynamic-labs/logger":"3.0.2","@dynamic-labs/types":"3.0.2",eventemitter3:"5.0.1","@solana/spl-token":"0.4.6","@solana/web3.js":"1.92.1","@turnkey/http":"2.12.2","@turnkey/iframe-stamper":"2.0.0","@turnkey/solana":"0.3.9","@turnkey/webauthn-stamper":"0.5.0"}["@dynamic-labs/sdk-api-core"];var tF=r(28070);let tW=()=>{let t=tF.env.API_BASE_URL||tF.env.NX_API_BASE_URL||"https://app.dynamic.xyz/api/v0";tH.setBaseUrl(t);let e={basePath:tH.getBaseUrl(),headers:{"Content-Type":"application/json"}},r=tK();r&&(e.headers.Authorization="Bearer ".concat(r));let i=tL()?"include":void 0;return e.headers["x-dyn-version"]="WalletKit/".concat("3.0.2"),e.headers["x-dyn-api-version"]="API/".concat(tj),new m.Pzx(new m.VKt(Object.assign(Object.assign({},e),{credentials:i,fetchApi:f.rX.fetch})))};var t$=r(46856).Buffer;let tJ=t=>t instanceof D.GS?t$.from(t.serialize()).toString("base64"):t$.from(t.serialize({verifySignatures:!1})).toString("base64"),tV=t=>{let e=t$.from(t,"base64");return D.GS.deserialize(e)},tG=(t,e,r)=>K(void 0,void 0,void 0,function*(){let i=tJ(e);return tV((yield tW().optimizeTransaction({environmentId:t,solanaTransactionOptimizationRequest:{address:r,transaction:i}})).transaction)});class tY{signMessage(t){return K(this,void 0,void 0,function*(){return{signature:yield this.walletConnector.signUint8ArrayMessage(t)}})}signTransaction(t){return K(this,void 0,void 0,function*(){return this.walletConnector.signTransaction(t)})}signAllTransactions(t){return K(this,void 0,void 0,function*(){throw Error("Method not available for embedded wallet")})}signAndSendTransaction(t,e){return K(this,void 0,void 0,function*(){return{signature:yield this.walletConnector.signAndSendTransaction(t,e)}})}connect(t){return K(this,void 0,void 0,function*(){return{address:this.turnkeyAddress,publicKey:this.publicKey}})}disconnect(){return K(this,void 0,void 0,function*(){})}constructor({walletConnector:t}){this.isConnected=!0,this.providers=[this],this.walletConnector=t,this.turnkeyAddress=this.walletConnector.turnkeyAddress,this.publicKey=this.turnkeyAddress?new D.nh(this.turnkeyAddress):void 0}}var tZ=r(46856).Buffer;class tX extends L{getRpcUrl(){var t;let[e]=this.solNetworks;if(!e)throw new f.kW("No enabled networks");return(null===(t=e.privateCustomerRpcUrls)||void 0===t?void 0:t[0])||e.rpcUrls[0]}getConnection(t){if(!this._connectionClient){let e=this.getRpcUrl();if(!e)throw new f.kW("No rpcUrl");this._connectionClient=tP(e,t)}return this._connectionClient}getWalletClient(){return this.getConnection()}getNetwork(){return K(this,void 0,void 0,function*(){let t=this.getConnection(),e=localStorage.getItem(V(t.rpcEndpoint));return(e||(e=yield t.getGenesisHash(),localStorage.setItem(V(t.rpcEndpoint),e)),"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"===(e=e.substring(0,32)))?"mainnet":"EtWTRABZaYq6iMfeYKouRu166VU2xqa1"===e?"devnet":"testnet"})}getPublicClient(){return K(this,void 0,void 0,function*(){var t;if(0===this.solNetworks.length)return;let e={cosmos:[],evm:void 0,solana:this.solNetworks,starknet:void 0};if(!this.chainRpcProviders)return;let r=this.chainRpcProviders.getProviders(e);return null===(t=this.chainRpcProviders.getSolanaProviderByChainId(r,"101"))||void 0===t?void 0:t.provider})}supportsNetworkSwitching(){return!1}setVerifiedCredentials(t){let e=M(t,X.r0.SOLANA),[r]=e;JSON.stringify(this.verifiedCredentials)!==JSON.stringify(e)&&(this.verifiedCredential=r,this.verifiedCredentials=e,this.refreshTurnkeyAccount())}validateActiveWallet(t){return K(this,void 0,void 0,function*(){var e,r;let i=(null===(e=this.verifiedCredential)||void 0===e?void 0:e.address)||"";if(!(0,d.Wr)(i,t,this.connectedChain)){let e=null===(r=this.verifiedCredentials)||void 0===r?void 0:r.find(e=>(null==e?void 0:e.address)===t);if(!e)throw new f.kW("Account not found");this.verifiedCredential=e,this.refreshTurnkeyAccount()}})}getAccount(){return this.turnkeyAddress}endSession(){return K(this,void 0,void 0,function*(){localStorage.removeItem(V(this.getRpcUrl()))})}refreshTurnkeyAccount(){return K(this,void 0,void 0,function*(){return this._turnkeyAccount=void 0,this.getTurnkeyAccount()})}getTurnkeyClient(){var t;let e=(0,f.KT)();e||(e=f.mi.getHostname());let r=P.createWebauthnStamper({rpId:e}),i=null==L?void 0:L.apiKeyStamper;return this.__turnkeyClient=null!==(t=this.getAuthenticatorHandler().client)&&void 0!==t?t:new T.TF({baseUrl:"https://api.turnkey.com"},null!=i?i:r),this.__turnkeyClient}createTurnkeyAccount(t){return K(this,arguments,void 0,function*(t){let{organizationId:e}=t;return new j({client:this.getTurnkeyClient(),organizationId:e})})}getTurnkeyAccount(){return K(this,void 0,void 0,function*(){var t,e,r,i;if(this._turnkeyAccount&&("passkey"===this.getAuthenticatorHandler().recoveryType&&(null===(t=this.__turnkeyClient)||void 0===t?void 0:t.stamper)instanceof k.S||"email"===this.getAuthenticatorHandler().recoveryType&&(null===(e=this.__turnkeyClient)||void 0===e?void 0:e.stamper)instanceof x.rr)&&this.__turnkeyClient===this.getAuthenticatorHandler().client)return this._turnkeyAccount;let{turnkeySubOrganizationId:n}=null!==(r=this.walletProperties)&&void 0!==r?r:{},{address:s}=null!==(i=this.verifiedCredential)&&void 0!==i?i:{};if(n&&s)return this._turnkeyAccount=yield this.createTurnkeyAccount({organizationId:n}),this.setLoggerMetadata(),this._turnkeyAccount})}getSigner(){return K(this,void 0,void 0,function*(){return new tY({walletConnector:this})})}getBalance(t){return K(this,void 0,void 0,function*(){let e=this.getConnection(),r=new D.nh(t),i=yield e.getBalance(r);return this.lamportsToSol(i).toString()})}signUint8ArrayMessage(t){return K(this,void 0,void 0,function*(){let e;if(!this.turnkeyAddress)throw new f.kW("No turnkey account");let r=this.turnkeyAddress;if(yield this.createOrRestoreSession(),yield this.walletUiUtils.signMessage({handler:()=>K(this,void 0,void 0,function*(){let i=yield this.getTurnkeyAccount();try{e=yield null==i?void 0:i.signMessage(t,r)}catch(n){yield this.removeSessionKeys(),yield this.createOrRestoreSession({ignoreRestore:!0}),i=yield this.getTurnkeyAccount(),e=yield null==i?void 0:i.signMessage(t,r)}return(0,f.h$)(e||tZ.from([]))}),message:new TextDecoder().decode(t)}),!e)throw Error("Failed to sign message");return e})}signMessage(t){return K(this,void 0,void 0,function*(){let e=new TextEncoder().encode(t),r=yield this.signUint8ArrayMessage(e);return(0,f.h$)(r)})}signTransaction(t){return K(this,void 0,void 0,function*(){yield this.createOrRestoreSession();let e=yield this.getTurnkeyAccount(),r=this.turnkeyAddress;if(!e||!r)throw Error("No turnkey account");try{yield e.addSignature(t,r)}catch(i){if(_.some(t=>i.message.includes(t)))yield this.removeSessionKeys(),yield this.createOrRestoreSession({ignoreRestore:!0}),e=yield this.getTurnkeyAccount(),yield e.addSignature(t,r);else throw S.error("[TK] failed to perform SignTransaction activity",i),i}return t})}internalSignAndSendTransaction(t,e){return K(this,void 0,void 0,function*(){var r;if(!this.turnkeyAddress)throw new f.kW("Solana wallet not found");let i=this.getConnection("confirmed"),n=yield i.getLatestBlockhash();"version"in t?t.message.recentBlockhash=n.blockhash:(t.recentBlockhash=n.blockhash,t.feePayer=null!==(r=t.feePayer)&&void 0!==r?r:new D.nh(this.turnkeyAddress));let s=yield this.signTransaction(t),o=yield i.sendRawTransaction(tZ.from(s.serialize()),e);return new Promise((t,e)=>{let r=setTimeout(()=>{e(new f.kW("Transaction timed out"))},6e4);i.onSignature(o,i=>{clearTimeout(r),i.err?e(new f.kW("Transaction failed")):t(o)},"confirmed")})})}signAndSendTransaction(t,e){return K(this,void 0,void 0,function*(){var r;let i;if(!this.turnkeyAddress)throw new f.kW("Solana wallet not found");let n=t;try{(yield this.getNetwork())==="mainnet"&&(n=yield tG(this.getEnvId(),t,null!==(r=this.turnkeyAddress)&&void 0!==r?r:""))}catch(t){S.warn("Failed to optimize transaction",t)}let s=yield tR(n,this.getConnection(),this.turnkeyAddress);if(!(null==s?void 0:s.length))throw new f.kW("Incorrectly formatted transaction instructions");let o=!1;try{i=yield tB(n,this.getConnection(),this.turnkeyAddress)}catch(t){"Insufficient funds"===t.message&&(o=!0)}let a=tN(s),l=new tO({connection:this.getConnection(),from:this.turnkeyAddress,onSubmit:()=>K(this,void 0,void 0,function*(){return this.internalSignAndSendTransaction(n,e)}),originalTransaction:n});return l.to=a,l.value=i,o&&(l.notEnoughFundsError=!0),this.walletUiUtils.sendTransaction(this,l)})}sendTransaction(t,e){return K(this,arguments,void 0,function*(t,e){var r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.turnkeyAddress)throw new f.kW("Solana wallet not found");if(!t||!e)throw new f.kW("Transaction and connection are required");let{signers:n}=i,s=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)0>e.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}(i,["signers"]),o=yield e.getLatestBlockhash({commitment:i.preflightCommitment,minContextSlot:i.minContextSlot});"version"in t?(null==n?void 0:n.length)&&t.sign(n):(t.feePayer=t.feePayer||new D.nh(this.turnkeyAddress),t.recentBlockhash=t.recentBlockhash||o.blockhash,(null==n?void 0:n.length)&&t.partialSign(...n)),s.preflightCommitment=s.preflightCommitment||e.commitment;let a=yield e.sendRawTransaction(t.serialize(),i),l={blockhash:o.blockhash,lastValidBlockHeight:o.lastValidBlockHeight,signature:a},u=yield null==e?void 0:e.confirmTransaction(l);return(null===(r=null==u?void 0:u.value)||void 0===r?void 0:r.err)?JSON.stringify(u.value.err):a})}lamportsToSol(t){return t/D.j5}createUiTransaction(t){return K(this,void 0,void 0,function*(){yield this.validateActiveWallet(t);let e=new tO({connection:this.getConnection(),from:t,onSubmit:t=>K(this,void 0,void 0,function*(){return this.internalSignAndSendTransaction(t)})});return e.feeDeducted=!0,e})}constructor(t,e){var r;super(t,e),this.ChainWallet=$,this.connectedChain="SOL",this.supportedChains=["SOL"],this.verifiedCredentialChain="solana",this.getEnvId=()=>{let t=localStorage.getItem("dynamic_nonce");if(t){let e=JSON.parse(t);if(e&&e.environmentId)return e.environmentId}let e=localStorage.getItem("dynamic_nonce_demo");if(e){let t=JSON.parse(e);if(t&&t.environmentId)return t.environmentId}throw Error("Failed to get environment id")},this.stampCreateWalletAccountRequest=t=>K(this,[t],void 0,function*(t){let{request:e}=t;return yield this.createOrRestoreSession(),this.getTurnkeyClient().stampCreateWalletAccounts(e)}),this.solNetworks=e.solNetworks,this.walletUiUtils=e.walletUiUtils,this._turnkeyAccount=void 0,this._connectionClient=void 0,this.chainRpcProviders=e.chainRpcProviders,null===(r=this.chainRpcProviders)||void 0===r||r.registerSolanaProviders(),this.__turnkeyClient=this.getTurnkeyClient()}}let tQ=t=>{var e;return(null===(e=t.apiProviders)||void 0===e?void 0:e.turnkey)?[tX.bind(null,q.TurnkeyHD)]:[]};function t0(t,e,r,i){return new(r||(r=Promise))(function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?n(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,a)}l((i=i.apply(t,e||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var t1=r(21678),t5=r(32489),t2=r(46856).Buffer;let t6=(t,e)=>"https://phantom.app/ul/v1/".concat(t,"?").concat(e.toString()),t3=(t,e,r)=>{let i=t1.box.open.after(t5.decode(t),t5.decode(e),r);if(!i)throw Error("Unable to decrypt data");return JSON.parse(t2.from(i).toString("utf8"))},t8=(t,e)=>{let r=t1.randomBytes(24),i=t1.box.after(t2.from(JSON.stringify(t)),r,e);return[r,i]},t4={"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3zQawwpjk2NsNY":"testnet","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdpKuc147dw2N9d":"mainnet-beta",EtWTRABZaYq6iMfeYKouRu166VU2xqa1wcaWoxPkrZBG:"devnet"},t9=t=>t0(void 0,void 0,void 0,function*(){try{let{result:e}=yield(yield fetch(t,{body:JSON.stringify({id:1,jsonrpc:"2.0",method:"getGenesisHash"}),headers:{"Content-Type":"application/json"},method:"POST"})).json();return t4[e]}catch(t){return"mainnet-beta"}}),t7={address:{get:()=>{var t;return null!==(t=localStorage.getItem("dynamic_phantom_wallet_address"))&&void 0!==t?t:void 0},remove:()=>{localStorage.removeItem("dynamic_phantom_wallet_address")},set:t=>{localStorage.setItem("dynamic_phantom_wallet_address",t.toString())}},encryptionPublicKey:{get:()=>{let t=localStorage.getItem("dynamic_phantom_public_key");if(t)return new Uint8Array(JSON.parse(t))},remove:()=>{localStorage.removeItem("dynamic_phantom_public_key")},set:t=>{localStorage.setItem("dynamic_phantom_public_key",JSON.stringify([...t]))}},encryptionSecretKey:{get:()=>{let t=localStorage.getItem("dynamic_phantom_secret_key");if(t)return new Uint8Array(JSON.parse(t))},remove:()=>{localStorage.removeItem("dynamic_phantom_secret_key")},set:t=>{localStorage.setItem("dynamic_phantom_secret_key",JSON.stringify([...t]))}},message:{get:()=>{var t;return null!==(t=localStorage.getItem("dynamic_phantom_message_to_sign"))&&void 0!==t?t:void 0},remove:()=>{localStorage.removeItem("dynamic_phantom_message_to_sign")},set:t=>{localStorage.setItem("dynamic_phantom_message_to_sign",t)}},method:{get:()=>{var t;return null!==(t=localStorage.getItem("dynamic_phantom_method"))&&void 0!==t?t:void 0},remove:()=>{localStorage.removeItem("dynamic_phantom_method")},set:t=>{localStorage.setItem("dynamic_phantom_method",t)}},session:{get:()=>{var t;return null!==(t=localStorage.getItem("dynamic_phantom_session"))&&void 0!==t?t:void 0},remove:()=>{localStorage.removeItem("dynamic_phantom_session")},set:t=>{localStorage.setItem("dynamic_phantom_session",t)}},sharedSecret:{get:()=>{let t=localStorage.getItem("dynamic_phantom_shared_secret");if(t)return new Uint8Array(JSON.parse(t))},remove:()=>{localStorage.removeItem("dynamic_phantom_shared_secret")},set:t=>{localStorage.setItem("dynamic_phantom_shared_secret",JSON.stringify([...t]))}}},et=()=>{for(let t in t7)t7[t].remove()};var ee=r(46856).Buffer;class er extends Z{getMethod(){throw Error("Method not implemented.")}getAddress(){return t0(this,void 0,void 0,function*(){let t=t7.address.get();if(t)return t;yield this.connect()})}connect(){return t0(this,void 0,void 0,function*(){var t,e;let r=t1.box.keyPair();t7.encryptionPublicKey.set(r.publicKey),t7.encryptionSecretKey.set(r.secretKey);let i=window.location.href.includes("localhost")||window.location.href.includes("0.0.0.0")||window.location.href.includes("127.0.0.1"),n=null!==(e=null===(t=this.solNetworks[0].privateCustomerRpcUrls)||void 0===t?void 0:t[0])&&void 0!==e?e:this.solNetworks[0].rpcUrls[0],s=t6("connect",new URLSearchParams({app_url:i?"https://demo.dynamic.xyz":window.location.href,cluster:yield t9(n),dapp_encryption_public_key:t5.encode(r.publicKey),redirect_link:window.location.href}));window.location.href=s})}getSession(){return t0(this,void 0,void 0,function*(){let t=new URLSearchParams(window.location.search),{data:e,nonce:r,phantom_encryption_public_key:i,encryptionSecretKey:n}=this.getInputsOrThrow("getSession",["data","nonce","phantom_encryption_public_key"],["encryptionSecretKey"]),s=t1.box.before(t5.decode(i),n);t7.sharedSecret.set(s);let o=t3(e,r,s);return t7.session.set(o.session),t7.address.set(new D.nh(o.public_key)),t.delete("phantom_encryption_public_key"),t.delete("data"),t.delete("nonce"),history.replaceState(null,"","".concat(window.location.origin).concat(window.location.pathname,"?").concat(t.toString())),o.public_key})}signMessage(t){return t0(this,void 0,void 0,function*(){let{session:e,sharedSecret:r,encryptionPublicKey:i}=this.getInputsOrThrow("signMessage",[],["session","sharedSecret","encryptionPublicKey"]);t7.message.set(t);let[n,s]=t8({message:t5.encode(ee.from(t)),session:e},r),o=t6("signMessage",new URLSearchParams({dapp_encryption_public_key:t5.encode(i),nonce:t5.encode(n),payload:t5.encode(s),redirect_link:window.location.href}));throw t7.method.set("signMessage"),window.location.href=o,Error("ignore")})}extractSignature(){let t=new URLSearchParams(window.location.search),{data:e,nonce:r,sharedSecret:i,message:n}=this.getInputsOrThrow("extractSignature",["data","nonce"],["sharedSecret","message"]),s=t3(e,r,i);return t.delete("data"),t.delete("nonce"),history.replaceState(null,"","".concat(window.location.origin).concat(window.location.pathname,"?").concat(t.toString())),{message:n,signature:s.signature}}extractTransactions(){let t=new URLSearchParams(window.location.search),{data:e,nonce:r,sharedSecret:i}=this.getInputsOrThrow("extractTransactions",["data","nonce"],["sharedSecret"]),n=t3(e,r,i).transactions.map(t=>D.YW.from(t5.decode(t)));return t.delete("data"),t.delete("nonce"),history.replaceState(null,"","".concat(window.location.origin).concat(window.location.pathname,"?").concat(t.toString())),n}extractTransaction(){let t=new URLSearchParams(window.location.search),{data:e,nonce:r,sharedSecret:i}=this.getInputsOrThrow("extractTransaction",["data","nonce"],["sharedSecret"]),n=t3(e,r,i),s=D.YW.from(t5.decode(n.transaction));return t.delete("data"),t.delete("nonce"),history.replaceState(null,"","".concat(window.location.origin).concat(window.location.pathname,"?").concat(t.toString())),s}consumeMethod(){let t=t7.method.get();return t7.method.remove(),t}getSigner(){return t0(this,void 0,void 0,function*(){let t=t7.address.get();if(t)return{addListener:()=>{throw Error("Not implemented")},connect:()=>{throw Error("Not implemented")},disconnect:()=>{throw Error("Not implemented")},emit:()=>{throw Error("Not implemented")},eventNames:()=>{throw Error("Not implemented")},isBackpack:!1,isBraveWallet:!1,isConnected:!0,isExodus:!1,isGlow:!1,isMagicEden:!1,isPhantom:!0,isSolflare:!1,listenerCount:()=>{throw Error("Not implemented")},listeners:()=>{throw Error("Not implemented")},off:()=>{throw Error("Not implemented")},on:()=>{throw Error("Not implemented")},once:()=>{throw Error("Not implemented")},providers:[],publicKey:new D.nh(t),removeAllListeners:()=>{throw Error("Not implemented")},removeListener:()=>{throw Error("Not implemented")},signAllTransactions:t=>t0(this,void 0,void 0,function*(){let e=t.map(t=>t5.encode(t.serialize({requireAllSignatures:!1}))),{session:r,sharedSecret:i,encryptionPublicKey:n}=this.getInputsOrThrow("signAllTransactions",[],["session","sharedSecret","encryptionPublicKey"]),[s,o]=t8({session:r,transactions:e},i),a=t6("signAllTransactions",new URLSearchParams({dapp_encryption_public_key:t5.encode(n),nonce:t5.encode(s),payload:t5.encode(o),redirect_link:window.location.href}));return window.location.href=a,[]}),signAndSendTransaction:(t,e)=>t0(this,void 0,void 0,function*(){let{session:r,sharedSecret:i,encryptionPublicKey:n}=this.getInputsOrThrow("signAndSendTransaction",[],["session","sharedSecret","encryptionPublicKey"]),[s,o]=t8({options:e,session:r,transaction:t5.encode(t.serialize({requireAllSignatures:!1}))},i),a=t6("signAndSendTransaction",new URLSearchParams({dapp_encryption_public_key:t5.encode(n),nonce:t5.encode(s),payload:t5.encode(o),redirect_link:window.location.href}));return t7.method.set("signAndSendTransaction"),window.location.href=a,{signature:""}}),signMessage:t=>t0(this,void 0,void 0,function*(){let{session:e,sharedSecret:r,encryptionPublicKey:i}=this.getInputsOrThrow("signMessage",[],["session","sharedSecret","encryptionPublicKey"]),[n,s]=t8({message:t5.encode(ee.from(t)),session:e},r),o=t6("signMessage",new URLSearchParams({dapp_encryption_public_key:t5.encode(i),nonce:t5.encode(n),payload:t5.encode(s),redirect_link:window.location.href}));return window.location.href=o,{signature:ee.from("")}}),signTransaction:t=>t0(this,void 0,void 0,function*(){let e=t5.encode(t.serialize({requireAllSignatures:!1})),{session:r,sharedSecret:i,encryptionPublicKey:n}=this.getInputsOrThrow("signTransaction",[],["session","sharedSecret","encryptionPublicKey"]),[s,o]=t8({session:r,transaction:e},i),a=t6("signTransaction",new URLSearchParams({dapp_encryption_public_key:t5.encode(n),nonce:t5.encode(s),payload:t5.encode(o),redirect_link:window.location.href}));return window.location.href=a,t})}})}getConnectedAccounts(){return t0(this,void 0,void 0,function*(){let t=t7.address.get();return t?[t]:[]})}endSession(){return t0(this,void 0,void 0,function*(){let t=t7.address.get(),e=t7.session.get(),r=t7.sharedSecret.get(),i=t7.encryptionPublicKey.get();if(et(),!t||!e||!i||!r)return;let[n,s]=t8({session:e},r),o=t6("disconnect",new URLSearchParams({dapp_encryption_public_key:t5.encode(i),nonce:t5.encode(n),payload:t5.encode(s),redirect_link:window.location.href}));window.location.href=o})}getInputsOrThrow(t,e,r){let i={},n=new URLSearchParams(window.location.search);return e.forEach(e=>{let r=n.get(e);if(!r)throw Error("[PhantomRedirect] ".concat(t," called, but required input '").concat(e,"' not found in query params"));i[e]=r}),r.forEach(e=>{let r=t7[e].get();if(!r)throw Error("[PhantomRedirect] ".concat(t," called, but required input '").concat(e,"' not found in local storage"));i[e]=r}),i}constructor(t){super(Object.assign({},t)),this.name="Phantom",this.overrideKey="phantom"}}let ei=t=>!!t&&void 0!==t.signature;var en=function(t,e,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(t,r):n?n.value=r:e.set(t,r),r},es=function(t,e,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(t):i?i.value:e.get(t)};let eo=new Set,ea={};function el(){if(i||(i=Object.freeze({register:eu,get:ec,on:eh}),"undefined"==typeof window))return i;let t=Object.freeze({register:eu});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(t){console.error("wallet-standard:register-wallet event listener could not be added\n",t)}try{window.dispatchEvent(new ef(t))}catch(t){console.error("wallet-standard:app-ready event could not be dispatched\n",t)}return i}function eu(...t){return(t=t.filter(t=>!eo.has(t))).length?(t.forEach(t=>eo.add(t)),ea.register?.forEach(e=>ed(()=>e(...t))),function(){t.forEach(t=>eo.delete(t)),ea.unregister?.forEach(e=>ed(()=>e(...t)))}):()=>{}}function ec(){return[...eo]}function eh(t,e){return ea[t]?.push(e)||(ea[t]=[e]),function(){ea[t]=ea[t]?.filter(t=>e!==t)}}function ed(t){try{t()}catch(t){console.error(t)}}class ef extends Event{constructor(t){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),c.set(this,void 0),en(this,c,t,"f")}get detail(){return es(this,c,"f")}get type(){return"wallet-standard:app-ready"}preventDefault(){throw Error("preventDefault cannot be called")}stopImmediatePropagation(){throw Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw Error("stopPropagation cannot be called")}}c=new WeakMap;let ep=t=>{let{walletStandardLocators:e}=t;if(!e||0===e.length)return;let r=el().get();return e.reduce((t,e)=>{if(t)return t;let i=r.find(t=>t.name===e.name);if(i)return(0,f.U2)(i,e.locator)},void 0)};class ey{getInjectedConfig(){if(!this.wallet||!this.wallet.injectedConfig)return;let{injectedConfig:t}=this.wallet;return t.find(t=>"sol"===t.chain)}getInstalledProvider(){let t=this.getInjectedConfig();if(t&&t.extensionLocators)return this.installedProviderLookup(t.extensionLocators)}installedProviders(){var t,e;let r=this.getInjectedConfig();if(!r)return[];let i=[];if(r.windowLocations)for(let t of r.windowLocations){let e=(0,f.vj)(t);e&&e.length&&i.push(...e)}if(0!==r.extensionLocators.length&&window.solana&&(window.solana.providers?window.solana.providers.forEach(t=>i.push(t)):i.push(window.solana)),(null!==(e=null===(t=r.walletStandardLocators)||void 0===t?void 0:t.length)&&void 0!==e?e:0)>0){let t=ep(r);t&&i.push(t)}return i}installedProviderLookup(t){let e=this.installedProviders();return 0===t.length?e[0]:(0,d.VN)(e,t)}findProvider(){return this.getInstalledProvider()}isInstalledHelper(){return void 0!==this.findProvider()}getAddress(){return t0(this,void 0,void 0,function*(){var t;let e=this.findProvider();if(e)return yield e.connect(),null===(t=e.publicKey)||void 0===t?void 0:t.toString()})}connect(){return t0(this,void 0,void 0,function*(){let t=this.findProvider();if(t)try{return t.isConnected||(yield t.connect()),t}catch(t){return}})}signMessage(t){return t0(this,void 0,void 0,function*(){if(!(yield this.getAddress()))return;let e=this.findProvider();if(!e)return;let r=new TextEncoder().encode(t),i=yield e.signMessage(r,"utf8");if(i)return(0,f.h$)(ei(i)?i.signature:i)})}handleAccountChange(t,e,r){return t0(this,void 0,void 0,function*(){var i;if(!r){yield null==e?void 0:e.connect(),(null===(i=null==e?void 0:e.publicKey)||void 0===i?void 0:i.toString())&&t.emit("accountChange",{accounts:[e.publicKey.toString()]});return}r.toString()&&t.emit("accountChange",{accounts:[r.toString()]})})}_setupEventListeners(t){let e=this.findProvider();null==e||e.on("accountChanged",r=>this.handleAccountChange(t,e,r)),null==e||e.on("disconnect",()=>t.emit("disconnect"))}_teardownEventListeners(){let t=this.findProvider();t&&t.removeAllListeners()}getConnectedAccounts(){return t0(this,void 0,void 0,function*(){var t,e;let r;let i=this.findProvider();if(!i)return[];try{i.isConnected||(r=yield i.connect({onlyIfTrusted:!0}))}catch(t){return[]}let n=null==r?void 0:r.address,s=null!==(t=null==r?void 0:r.publicKey)&&void 0!==t?t:null===(e=i.publicKey)||void 0===e?void 0:e.toString();return n?[n]:s?[null==s?void 0:s.toString()]:[]})}constructor(t){this.wallet=t}}class eg extends f.B8{constructor(t){super("Message signing is currently not supported on ".concat(t," hardware wallet.\n    You can use signMessageViaTransaction instead to achieve similar functionality\n    by signing a transaction with a memo instruction.\n    You can read more about it here https://github.com/solana-labs/solana/issues/21366"))}}class em extends Z{getSolProviderHelper(){return this.wallet||(this.wallet=(0,W.IP)(this.walletBook,this.key)),this.wallet&&!this.solProviderHelper&&(this.solProviderHelper=new ey(this.wallet)),this.solProviderHelper}getProvider(){var t;return null===(t=this.getSolProviderHelper())||void 0===t?void 0:t.getInstalledProvider()}setupEventListeners(){var t;null===(t=this.getSolProviderHelper())||void 0===t||t._setupEventListeners(this)}teardownEventListeners(){var t;null===(t=this.getSolProviderHelper())||void 0===t||t._teardownEventListeners()}connect(){return t0(this,void 0,void 0,function*(){var t;yield null===(t=this.getSolProviderHelper())||void 0===t?void 0:t.connect()})}getSigner(){return t0(this,void 0,void 0,function*(){var t;return null===(t=this.getSolProviderHelper())||void 0===t?void 0:t.connect()})}createUiTransaction(t){return t0(this,void 0,void 0,function*(){yield this.validateActiveWallet(t);let e=new tO({connection:this.getWalletClient(),from:t,onSubmit:t=>t0(this,void 0,void 0,function*(){var e;let r=yield this.getSigner();if(!r)throw Error("Signer not found");let i=yield this.getWalletClient().getLatestBlockhash();if("version"in t)t.message.recentBlockhash=i.blockhash;else{let r=yield this.getAddress();if(!r)throw Error("User address not found");t.recentBlockhash=i.blockhash,t.feePayer=null!==(e=t.feePayer)&&void 0!==e?e:new D.nh(r)}return(yield r.signAndSendTransaction(t)).signature})});return e.feeDeducted=!0,e})}isInstalledOnBrowser(){var t;return!!(null===(t=this.getSolProviderHelper())||void 0===t?void 0:t.isInstalledHelper())}getAddress(){return t0(this,void 0,void 0,function*(){var t,e;if(!this.isInstalledOnBrowser()){if((0,f.tq)()&&(null===(t=this.wallet)||void 0===t?void 0:t.mobile)&&this.wallet.mobile.inAppBrowser&&"in-app-browser"===this.mobileExperience){let t=(0,f.XK)(this.wallet.mobile.inAppBrowser)({encodedDappURI:encodeURIComponent(window.location.toString())});window.location.assign(t)}return}return null===(e=this.getSolProviderHelper())||void 0===e?void 0:e.getAddress()})}signMessage(t){return t0(this,void 0,void 0,function*(){var e,r;let i=yield null===(e=this.getSolProviderHelper())||void 0===e?void 0:e.getAddress();if(i&&this.isLedgerAddress(i))throw new eg(this.name);return null===(r=this.getSolProviderHelper())||void 0===r?void 0:r.signMessage(t)})}getConnectedAccounts(){return t0(this,void 0,void 0,function*(){var t,e;return null!==(e=null===(t=this.getSolProviderHelper())||void 0===t?void 0:t.getConnectedAccounts())&&void 0!==e?e:[]})}}class ev extends em{getAddress(){let t=Object.create(null,{getAddress:{get:()=>super.getAddress}});return t0(this,void 0,void 0,function*(){if(this.isInstalledOnBrowser())return t.getAddress.call(this);(0,f.tq)()&&(0,f.Rc)({nativeLink:"phantom://browse",universalLink:"https://phantom.app/ul/browse"})})}canGetChainAddress(){var t,e;return(null===(e=null===(t=this.getSolProviderHelper())||void 0===t?void 0:t.findProvider())||void 0===e?void 0:e.publicKey)!==null}constructor(t){super(t),this.name="Phantom",this.overrideKey="phantom",this.wallet=(0,W.IP)(this.walletBook,this.key)}}class ew extends Z{connect(){return t0(this,void 0,void 0,function*(){yield this.getMobileOrInstalledWallet().connect()})}getSigner(){return t0(this,void 0,void 0,function*(){return this.getMobileOrInstalledWallet().getSigner()})}getMobileOrInstalledWallet(){let t=new ev(this.constructorProps);return!(0,f.tq)()||t.isInstalledOnBrowser()?t:"redirect"===this.mobileExperience?new er(this.constructorProps):new ev(this.constructorProps)}constructor(t){super(t),this.name="Phantom",this.overrideKey="phantom",this.wallet=(0,W.IP)(this.walletBook,this.key)}}let eb=t=>!("instructions"in t),e_=(t,e)=>{let r=t.features,i=()=>t0(void 0,void 0,void 0,function*(){let r=yield e.getAddress(),i=t.accounts.find(t=>t.address===r);if(!i)throw Error("Account not found");return i}),n=()=>t0(void 0,void 0,void 0,function*(){var t,r;let i=null!==(r=null===(t=e.solNetworks[0].privateCustomerRpcUrls)||void 0===t?void 0:t[0])&&void 0!==r?r:e.solNetworks[0].rpcUrls[0],n=yield t9(i);return"solana:".concat(n)}),s=t=>t0(void 0,void 0,void 0,function*(){let e=yield i(),s=yield r["solana:signTransaction"].signTransaction({account:e,chain:yield n(),transaction:t.serialize({requireAllSignatures:!1})});return eb(t)?D.GS.deserialize(s[0].signedTransaction):D.YW.from(s[0].signedTransaction)});return{addListener:()=>{throw Error("Not implemented")},connect:()=>{throw Error("Not implemented")},disconnect:()=>e.endSession(),emit:()=>{throw Error("Not implemented")},eventNames:()=>{throw Error("Not implemented")},isBackpack:!1,isBraveWallet:!1,isConnected:!0,isExodus:!1,isGlow:!1,isMagicEden:!1,isPhantom:!1,isSolflare:!1,listenerCount:()=>{throw Error("Not implemented")},listeners:()=>{throw Error("Not implemented")},off:()=>{throw Error("Not implemented")},on:()=>{throw Error("Not implemented")},once:()=>{throw Error("Not implemented")},providers:[],get publicKey(){return new D.nh(t.accounts[0].publicKey)},removeAllListeners:()=>{throw Error("Not implemented")},removeListener:()=>{throw Error("Not implemented")},send:()=>{throw Error("Not implemented")},signAllTransactions:t=>t0(void 0,void 0,void 0,function*(){return Promise.all(t.map(s))}),signAndSendTransaction:t=>t0(void 0,void 0,void 0,function*(){let e=yield i(),[{signature:s}]=yield r["solana:signAndSendTransaction"].signAndSendTransaction({account:e,chain:yield n(),transaction:t.serialize()});return{signature:new TextDecoder().decode(s)}}),signMessage:t=>t0(void 0,void 0,void 0,function*(){let e=yield i();return{signature:(yield r["solana:signMessage"].signMessage({account:e,message:t}))[0].signature}}),signTransaction:s}};var eE=r(46856).Buffer;let eA=new TextEncoder;class eS extends Z{get wallet(){let t=eS.getWallet(this.walletBook,this.key);if(!t)throw Error("Wallet not found");return t}get walletFeatures(){return this.wallet.features}connect(){return t0(this,void 0,void 0,function*(){yield this.walletFeatures["standard:connect"].connect()})}endSession(){return t0(this,void 0,void 0,function*(){yield this.walletFeatures["standard:disconnect"].disconnect()})}isInstalledOnBrowser(){return!0}getAddress(){return t0(this,void 0,void 0,function*(){yield this.connect();let[t]=yield this.getConnectedAccounts();return t})}getConnectedAccounts(){return t0(this,void 0,void 0,function*(){return this.wallet.accounts.map(t=>t.address)})}signMessage(t){return t0(this,void 0,void 0,function*(){let e=yield this.getSigner();if(!e)throw Error("Signer not found");let r=eA.encode(t),i=yield e.signMessage(r);if(!(i instanceof Uint8Array))throw Error("Signature not found");return eE.from(i).toString("base64")})}getSigner(){return t0(this,void 0,void 0,function*(){let{wallet:t}=this;return e_(t,this)})}static getWallet(t,e){var r,i;let n=el().get(),s=null===(r=t.wallets[e].injectedConfig)||void 0===r?void 0:r.find(t=>"sol"===t.chain);if(!s)return;let{features:o}=null!==(i=s.walletStandard)&&void 0!==i?i:{};if(o)return n.find(t=>{var e;return t.name===(null===(e=s.walletStandard)||void 0===e?void 0:e.name)&&o.reduce((e,r)=>{let i=Object.keys(t.features);return!!e&&i.includes(r)},!0)})}constructor(t){super(t),this.connectedChain="SOL",this.supportedChains=["SOL"]}}class ex extends em{getSigner(){return t0(this,void 0,void 0,function*(){var t;return null===(t=this.getSolProviderHelper())||void 0===t?void 0:t.connect()})}signMessage(t){return t0(this,void 0,void 0,function*(){let e=yield this.getAddress();if(!e)return;let r=yield this.getSigner();if(!r)return;let i=new TextEncoder().encode(t),n=yield r.signMessage(i,e);if(n)return(0,f.h$)(ei(n)?n.signature:n)})}constructor(t){super(t),this.name="CoinbaseSolana",this.overrideKey="coinbasesolana",this.wallet=(0,W.IP)(this.walletBook,this.key)}}class eT extends em{getAddress(){return t0(this,void 0,void 0,function*(){var t,e,r,i,n;if((0,f.tq)()&&!this.isInstalledOnBrowser()){(0,f.Rc)({nativeLink:(null===(e=null===(t=this.wallet)||void 0===t?void 0:t.mobile)||void 0===e?void 0:e.native)||"solflare://ul/v1/browse",universalLink:(null===(i=null===(r=this.wallet)||void 0===r?void 0:r.mobile)||void 0===i?void 0:i.universal)||"https://solflare.com/ul/v1/browse"});return}return null===(n=this.getSolProviderHelper())||void 0===n?void 0:n.getAddress()})}signMessage(t){return t0(this,void 0,void 0,function*(){if(!(yield this.getAddress()))return;let e=yield this.getSigner();if(!e)return;let r=new TextEncoder().encode(t);yield e.connect(),yield new Promise(t=>{setTimeout(t,100)});let i=yield e.signMessage(r,"utf8");return void 0!==i.signature?(0,f.h$)(i.signature):void 0})}constructor(t){super(t),this.name="Solflare",this.overrideKey="solflare",this.wallet=(0,W.IP)(this.walletBook,this.key)}}var ek=r(46856).Buffer;class eO extends em{getSigner(){return t0(this,void 0,void 0,function*(){var t;return null===(t=this.getSolProviderHelper())||void 0===t?void 0:t.connect()})}signMessage(t){return t0(this,void 0,void 0,function*(){if(!(yield this.getAddress()))return;let e=yield this.getSigner();if(!e)return;let r=yield e.signMessage(ek.from(t,"utf8"));return r?"object"==typeof r&&"signature"in r?(0,f.h$)(r.signature):(0,f.h$)(r):void 0})}constructor(t){super(t),this.name="Backpack",this.overrideKey="backpacksol",this.wallet=(0,W.IP)(this.walletBook,this.key)}}let eI=[ex,eO,eT],eP=["coinbasesolana","phantom","phantomledger","backpacksol","solflare"],eU=t=>{var e;let{walletBook:r}=t;return Object.entries(null!==(e=null==r?void 0:r.wallets)&&void 0!==e?e:{}).filter(t=>{var e;let[r,i]=t,n=!!(null===(e=i.injectedConfig)||void 0===e?void 0:e.find(t=>"sol"===t.chain)),s=eP.includes(r);return n&&!s}).map(t=>{var e;let[i,n]=t,{shortName:s}=n,o=s||n.name;return(null===(e=n.injectedConfig)||void 0===e?void 0:e.find(t=>t.walletStandard))&&eS.getWallet(r,i)?class extends eS{constructor(t){super(Object.assign({},t)),this.name=o,this.overrideKey=i}}:class extends em{constructor(t){super(Object.assign({},t)),this.name=o,this.wallet=n,this.overrideKey=i}}})};class eB extends em{isInstalledOnBrowser(){return!1}constructor(t){super(t),this.name="Unknown",this.overrideKey="unknown",this.wallet=(0,W.IP)(this.walletBook,this.key)}}class eR extends em{isInstalledOnBrowser(){return!1}constructor(t){super(t),this.name="Fallback Connector",this.overrideKey="fallbackconnector",this.isAvailable=!1,this.wallet=(0,W.IP)(this.walletBook,this.key)}}let eN=t=>[...eI,...eU(t),...tQ(t),ew,eB,eR]},23849:function(t,e,r){"use strict";r.d(e,{lW:function(){return v}});class i extends Error{constructor(){super("Webauthn is not supported on this device")}}function n(t,e,r,i){return new(r||(r=Promise))(function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?n(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,a)}l((i=i.apply(t,e||[])).next())})}function s(t){let e=new Uint8Array(t),r="";for(let t of e)r+=String.fromCharCode(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function o(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4,i=atob(e.padEnd(e.length+r,"=")),n=new ArrayBuffer(i.length),s=new Uint8Array(n);for(let t=0;t<i.length;t++)s[t]=i.charCodeAt(t);return n}function a(){return window?.PublicKeyCredential!==void 0&&"function"==typeof window.PublicKeyCredential}function l(t){let{id:e}=t;return{...t,id:o(e),transports:t.transports}}"function"==typeof SuppressedError&&SuppressedError;class u extends Error{constructor({message:t,code:e,cause:r,name:i}){super(t,{cause:r}),this.name=i??r.name,this.code=e}}class c{createNewAbortSignal(){if(this.controller){let t=Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}let h=new c,d=["cross-platform","platform"];async function f(t){var e;let r,i,n,c,f;if(!a())throw Error("WebAuthn is not supported in this browser");let y={publicKey:{...t,challenge:o(t.challenge),user:{...t.user,id:(e=t.user.id,new TextEncoder().encode(e))},excludeCredentials:t.excludeCredentials?.map(l)}};y.signal=h.createNewAbortSignal();try{r=await navigator.credentials.create(y)}catch(t){throw function({error:t,options:e}){let{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(e.signal instanceof AbortSignal)return new u({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(r.authenticatorSelection?.requireResidentKey===!0)return new u({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(r.authenticatorSelection?.userVerification==="required")return new u({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else if("InvalidStateError"===t.name)return new u({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});else if("NotAllowedError"===t.name)return new u({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});else if("NotSupportedError"===t.name)return new u(0===r.pubKeyCredParams.filter(t=>"public-key"===t.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});else if("SecurityError"===t.name){let e=window.location.hostname;if(!("localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)))return new u({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(r.rp.id!==e)return new u({message:`The RP ID "${r.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(r.user.id.byteLength<1||r.user.id.byteLength>64)return new u({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new u({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t});return t}({error:t,options:y})}if(!r)throw Error("Registration was not completed");let{id:g,rawId:m,response:v,type:w}=r;if("function"==typeof v.getTransports&&(n=v.getTransports()),"function"==typeof v.getPublicKeyAlgorithm)try{c=v.getPublicKeyAlgorithm()}catch(t){p("getPublicKeyAlgorithm()",t)}if("function"==typeof v.getPublicKey)try{let t=v.getPublicKey();null!==t&&(f=s(t))}catch(t){p("getPublicKey()",t)}if("function"==typeof v.getAuthenticatorData)try{i=s(v.getAuthenticatorData())}catch(t){p("getAuthenticatorData()",t)}return{id:g,rawId:s(m),response:{attestationObject:s(v.attestationObject),clientDataJSON:s(v.clientDataJSON),transports:n,publicKeyAlgorithm:c,publicKey:f,authenticatorData:i},type:w,clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:function(t){if(!(!t||0>d.indexOf(t)))return t}(r.authenticatorAttachment)}}function p(t,e){console.warn(`The browser extension that intercepted this WebAuthn API call incorrectly implemented ${t}. You should report this error to them.
`,e)}let y=new(r(79418)).Y("Webauthn"),g=t=>n(void 0,void 0,void 0,function*(){let e;if(!a())throw new i;try{e=yield f(t)}catch(t){throw y.debug("Failed to create webauthn credential",t),t}return e}),m=t=>{switch(t){case"internal":return"AUTHENTICATOR_TRANSPORT_INTERNAL";case"usb":return"AUTHENTICATOR_TRANSPORT_USB";case"nfc":return"AUTHENTICATOR_TRANSPORT_NFC";case"ble":return"AUTHENTICATOR_TRANSPORT_BLE";case"hybrid":return"AUTHENTICATOR_TRANSPORT_HYBRID";default:throw Error("unsupported transport format "+t)}},v=t=>n(void 0,void 0,void 0,function*(){var e,r;if(!t.publicKey)throw Error("Invalid options. Public key attribute must be defined");let i=Object.assign(Object.assign({},t.publicKey),{challenge:w(t.publicKey.challenge),excludeCredentials:null===(e=t.publicKey.excludeCredentials)||void 0===e?void 0:e.map(t=>Object.assign(Object.assign({},t),{id:w(t.id)})),user:Object.assign(Object.assign({},t.publicKey.user),{id:w(t.publicKey.user.id)})}),n=yield g(i);return{attestationObject:n.response.attestationObject,clientDataJson:n.response.clientDataJSON,credentialId:n.rawId,transports:(null===(r=n.response.transports)||void 0===r?void 0:r.map(m))||[]}}),w=t=>t instanceof ArrayBuffer?s(t):s(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},23084:function(t,e,r){"use strict";r.d(e,{_:function(){return m}});var i=r(10467),n=r(31791);class s extends n.kb{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,(0,i.vp)(t);let r=(0,n.O0)(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?t.create().update(r).digest():r);for(let t=0;t<o.length;t++)o[t]^=54;this.iHash.update(o),this.oHash=t.create();for(let t=0;t<o.length;t++)o[t]^=106;this.oHash.update(o),o.fill(0)}update(t){return(0,i.Gg)(this),this.iHash.update(t),this}digestInto(t){(0,i.Gg)(this),(0,i.aI)(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return t.finished=i,t.destroyed=n,t.blockLen=s,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let o=(t,e,r)=>new s(t,e).update(r).digest();o.create=(t,e)=>new s(t,e);var a=r(3358),l=r(72147),u=r(57127);function c(t){void 0!==t.lowS&&(0,u.uw)("lowS",t.lowS),void 0!==t.prehash&&(0,u.uw)("prehash",t.prehash)}let{bytesToNumberBE:h,hexToBytes:d}=u,f={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(t,e)=>{let{Err:r}=f;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(1&e.length)throw new r("tlv.encode: unpadded data");let i=e.length/2,n=u.uz(i);if(n.length/2&128)throw new r("tlv.encode: long form length too big");let s=i>127?u.uz(n.length/2|128):"";return`${u.uz(t)}${s}${n}${e}`},decode(t,e){let{Err:r}=f,i=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[i++]!==t)throw new r("tlv.decode: wrong tlv");let n=e[i++],s=0;if(128&n){let t=127&n;if(!t)throw new r("tlv.decode(long): indefinite length not supported");if(t>4)throw new r("tlv.decode(long): byte length is too big");let o=e.subarray(i,i+t);if(o.length!==t)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(let t of o)s=s<<8|t;if(i+=t,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=n;let o=e.subarray(i,i+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:e.subarray(i+s)}}},_int:{encode(t){let{Err:e}=f;if(t<p)throw new e("integer: negative integers are not allowed");let r=u.uz(t);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new e("unexpected assertion");return r},decode(t){let{Err:e}=f;if(128&t[0])throw new e("Invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("Invalid signature integer: unnecessary leading zero");return h(t)}},toSig(t){let{Err:e,_int:r,_tlv:i}=f,n="string"==typeof t?d(t):t;u.gk(n);let{v:s,l:o}=i.decode(48,n);if(o.length)throw new e("Invalid signature: left bytes after parsing");let{v:a,l:l}=i.decode(2,s),{v:c,l:h}=i.decode(2,l);if(h.length)throw new e("Invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(c)}},hexFromSig(t){let{_tlv:e,_int:r}=f,i=`${e.encode(2,r.encode(t.r))}${e.encode(2,r.encode(t.s))}`;return e.encode(48,i)}},p=BigInt(0),y=BigInt(1),g=(BigInt(2),BigInt(3));function m(t,e){let r=e=>(function(t){let e=function(t){let e=(0,a.Kd)(t);return u.FF(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:r,n:i}=e,n=r.BYTES+1,s=2*r.BYTES+1;function o(t){return l.wQ(t,i)}function h(t){return l.U_(t,i)}let{ProjectivePoint:d,normPrivateKeyToScalar:m,weierstrassEquation:v,isWithinCurveOrder:w}=function(t){let e=function(t){let e=(0,a.Kd)(t);u.FF(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:n}=e;if(r){if(!i.eql(n,i.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,i=l.gN(e.n,e.nBitLength),n=e.toBytes||((t,e,i)=>{let n=e.toAffine();return u.eV(Uint8Array.from([4]),r.toBytes(n.x),r.toBytes(n.y))}),s=e.fromBytes||(t=>{let e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}});function o(t){let{a:i,b:n}=e,s=r.sqr(t),o=r.mul(s,t);return r.add(r.add(o,r.mul(t,i)),n)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw Error("bad generator point: equation left != right");function c(t){let r;let{allowedPrivateKeyLengths:i,nByteLength:n,wrapPrivateKey:s,n:o}=e;if(i&&"bigint"!=typeof t){if(u._t(t)&&(t=u.ci(t)),"string"!=typeof t||!i.includes(t.length))throw Error("Invalid key");t=t.padStart(2*n,"0")}try{r="bigint"==typeof t?t:u.bytesToNumberBE((0,u.ql)("private key",t,n))}catch(e){throw Error(`private key must be ${n} bytes, hex or bigint, not ${typeof t}`)}return s&&(r=l.wQ(r,o)),u.Fy("private key",r,y,o),r}function h(t){if(!(t instanceof m))throw Error("ProjectivePoint expected")}let d=(0,u.H9)((t,e)=>{let{px:i,py:n,pz:s}=t;if(r.eql(s,r.ONE))return{x:i,y:n};let o=t.is0();null==e&&(e=o?r.ONE:r.inv(s));let a=r.mul(i,e),l=r.mul(n,e),u=r.mul(s,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw Error("invZ was invalid");return{x:a,y:l}}),f=(0,u.H9)(t=>{if(t.is0()){if(e.allowInfinityPoint&&!r.is0(t.py))return;throw Error("bad point: ZERO")}let{x:i,y:n}=t.toAffine();if(!r.isValid(i)||!r.isValid(n))throw Error("bad point: x or y not FE");let s=r.sqr(n),a=o(i);if(!r.eql(s,a))throw Error("bad point: equation left != right");if(!t.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class m{constructor(t,e,i){if(this.px=t,this.py=e,this.pz=i,null==t||!r.isValid(t))throw Error("x required");if(null==e||!r.isValid(e))throw Error("y required");if(null==i||!r.isValid(i))throw Error("z required");Object.freeze(this)}static fromAffine(t){let{x:e,y:i}=t||{};if(!t||!r.isValid(e)||!r.isValid(i))throw Error("invalid affine point");if(t instanceof m)throw Error("projective point not allowed");let n=t=>r.eql(t,r.ZERO);return n(e)&&n(i)?m.ZERO:new m(e,i,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){let e=r.invertBatch(t.map(t=>t.pz));return t.map((t,r)=>t.toAffine(e[r])).map(m.fromAffine)}static fromHex(t){let e=m.fromAffine(s((0,u.ql)("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return m.BASE.multiply(c(t))}static msm(t,e){return(0,a.D1)(m,i,t,e)}_setWindowSize(t){w.setWindowSize(this,t)}assertValidity(){f(this)}hasEvenY(){let{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw Error("Field doesn't support isOdd")}equals(t){h(t);let{px:e,py:i,pz:n}=this,{px:s,py:o,pz:a}=t,l=r.eql(r.mul(e,a),r.mul(s,n)),u=r.eql(r.mul(i,a),r.mul(o,n));return l&&u}negate(){return new m(this.px,r.neg(this.py),this.pz)}double(){let{a:t,b:i}=e,n=r.mul(i,g),{px:s,py:o,pz:a}=this,l=r.ZERO,u=r.ZERO,c=r.ZERO,h=r.mul(s,s),d=r.mul(o,o),f=r.mul(a,a),p=r.mul(s,o);return p=r.add(p,p),c=r.mul(s,a),c=r.add(c,c),l=r.mul(t,c),u=r.mul(n,f),u=r.add(l,u),l=r.sub(d,u),u=r.add(d,u),u=r.mul(l,u),l=r.mul(p,l),c=r.mul(n,c),f=r.mul(t,f),p=r.sub(h,f),p=r.mul(t,p),p=r.add(p,c),c=r.add(h,h),h=r.add(c,h),h=r.add(h,f),h=r.mul(h,p),u=r.add(u,h),f=r.mul(o,a),f=r.add(f,f),h=r.mul(f,p),l=r.sub(l,h),c=r.mul(f,d),c=r.add(c,c),new m(l,u,c=r.add(c,c))}add(t){h(t);let{px:i,py:n,pz:s}=this,{px:o,py:a,pz:l}=t,u=r.ZERO,c=r.ZERO,d=r.ZERO,f=e.a,p=r.mul(e.b,g),y=r.mul(i,o),v=r.mul(n,a),w=r.mul(s,l),b=r.add(i,n),_=r.add(o,a);b=r.mul(b,_),_=r.add(y,v),b=r.sub(b,_),_=r.add(i,s);let E=r.add(o,l);return _=r.mul(_,E),E=r.add(y,w),_=r.sub(_,E),E=r.add(n,s),u=r.add(a,l),E=r.mul(E,u),u=r.add(v,w),E=r.sub(E,u),d=r.mul(f,_),u=r.mul(p,w),d=r.add(u,d),u=r.sub(v,d),d=r.add(v,d),c=r.mul(u,d),v=r.add(y,y),v=r.add(v,y),w=r.mul(f,w),_=r.mul(p,_),v=r.add(v,w),w=r.sub(y,w),w=r.mul(f,w),_=r.add(_,w),y=r.mul(v,_),c=r.add(c,y),y=r.mul(E,_),u=r.mul(b,u),u=r.sub(u,y),y=r.mul(b,v),d=r.mul(E,d),new m(u,c,d=r.add(d,y))}subtract(t){return this.add(t.negate())}is0(){return this.equals(m.ZERO)}wNAF(t){return w.wNAFCached(this,t,m.normalizeZ)}multiplyUnsafe(t){u.Fy("scalar",t,p,e.n);let i=m.ZERO;if(t===p)return i;if(t===y)return this;let{endo:n}=e;if(!n)return w.unsafeLadder(this,t);let{k1neg:s,k1:o,k2neg:a,k2:l}=n.splitScalar(t),c=i,h=i,d=this;for(;o>p||l>p;)o&y&&(c=c.add(d)),l&y&&(h=h.add(d)),d=d.double(),o>>=y,l>>=y;return s&&(c=c.negate()),a&&(h=h.negate()),h=new m(r.mul(h.px,n.beta),h.py,h.pz),c.add(h)}multiply(t){let i,n;let{endo:s,n:o}=e;if(u.Fy("scalar",t,y,o),s){let{k1neg:e,k1:o,k2neg:a,k2:l}=s.splitScalar(t),{p:u,f:c}=this.wNAF(o),{p:h,f:d}=this.wNAF(l);u=w.constTimeNegate(e,u),h=w.constTimeNegate(a,h),h=new m(r.mul(h.px,s.beta),h.py,h.pz),i=u.add(h),n=c.add(d)}else{let{p:e,f:r}=this.wNAF(t);i=e,n=r}return m.normalizeZ([i,n])[0]}multiplyAndAddUnsafe(t,e,r){let i=m.BASE,n=(t,e)=>e!==p&&e!==y&&t.equals(i)?t.multiply(e):t.multiplyUnsafe(e),s=n(this,e).add(n(t,r));return s.is0()?void 0:s}toAffine(t){return d(this,t)}isTorsionFree(){let{h:t,isTorsionFree:r}=e;if(t===y)return!0;if(r)return r(m,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:t,clearCofactor:r}=e;return t===y?this:r?r(m,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return(0,u.uw)("isCompressed",t),this.assertValidity(),n(m,this,t)}toHex(t=!0){return(0,u.uw)("isCompressed",t),u.ci(this.toRawBytes(t))}}m.BASE=new m(e.Gx,e.Gy,r.ONE),m.ZERO=new m(r.ZERO,r.ONE,r.ZERO);let v=e.nBitLength,w=(0,a.Mx)(m,e.endo?Math.ceil(v/2):v);return{CURVE:e,ProjectivePoint:m,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:function(t){return u.Z2(t,y,e.n)}}}({...e,toBytes(t,e,i){let n=e.toAffine(),s=r.toBytes(n.x),o=u.eV;return((0,u.uw)("isCompressed",i),i)?o(Uint8Array.from([e.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(n.y))},fromBytes(t){let e=t.length,i=t[0],o=t.subarray(1);if(e===n&&(2===i||3===i)){let t;let e=u.bytesToNumberBE(o);if(!u.Z2(e,y,r.ORDER))throw Error("Point is not on curve");let n=v(e);try{t=r.sqrt(n)}catch(t){throw Error("Point is not on curve"+(t instanceof Error?": "+t.message:""))}return(1&i)==1!=((t&y)===y)&&(t=r.neg(t)),{x:e,y:t}}if(e===s&&4===i)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${e} was invalid. Expected ${n} compressed bytes or ${s} uncompressed bytes`)}}),b=t=>u.ci(u.tL(t,e.nByteLength)),_=(t,e,r)=>u.bytesToNumberBE(t.slice(e,r));class E{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){let r=e.nByteLength;return new E(_(t=(0,u.ql)("compactSignature",t,2*r),0,r),_(t,r,2*r))}static fromDER(t){let{r:e,s:r}=f.toSig((0,u.ql)("DER",t));return new E(e,r)}assertValidity(){u.Fy("r",this.r,y,i),u.Fy("s",this.s,y,i)}addRecoveryBit(t){return new E(this.r,this.s,t)}recoverPublicKey(t){let{r:i,s:n,recovery:s}=this,a=x((0,u.ql)("msgHash",t));if(null==s||![0,1,2,3].includes(s))throw Error("recovery id invalid");let l=2===s||3===s?i+e.n:i;if(l>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&s)==0?"02":"03",f=d.fromHex(c+b(l)),p=h(l),y=o(-a*p),g=o(n*p),m=d.BASE.multiplyAndAddUnsafe(f,y,g);if(!m)throw Error("point at infinify");return m.assertValidity(),m}hasHighS(){return this.s>i>>y}normalizeS(){return this.hasHighS()?new E(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return u.hexToBytes(this.toDERHex())}toDERHex(){return f.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return u.hexToBytes(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}function A(t){let e=u._t(t),r="string"==typeof t,i=(e||r)&&t.length;return e?i===n||i===s:r?i===2*n||i===2*s:t instanceof d}let S=e.bits2int||function(t){let r=u.bytesToNumberBE(t),i=8*t.length-e.nBitLength;return i>0?r>>BigInt(i):r},x=e.bits2int_modN||function(t){return o(S(t))},T=u.dQ(e.nBitLength);function k(t){return u.Fy(`num < 2^${e.nBitLength}`,t,p,T),u.tL(t,e.nByteLength)}let O={lowS:e.lowS,prehash:!1},I={lowS:e.lowS,prehash:!1};return d.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return d.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(A(t))throw Error("first arg must be private key");if(!A(e))throw Error("second arg must be public key");return d.fromHex(e).multiply(m(t)).toRawBytes(r)},sign:function(t,n,s=O){let{seed:a,k2sig:l}=function(t,n,s=O){if(["recovered","canonical"].some(t=>t in s))throw Error("sign() legacy options not supported");let{hash:a,randomBytes:l}=e,{lowS:f,prehash:g,extraEntropy:v}=s;null==f&&(f=!0),t=(0,u.ql)("msgHash",t),c(s),g&&(t=(0,u.ql)("prehashed msgHash",a(t)));let b=x(t),_=m(n),A=[k(_),k(b)];if(null!=v&&!1!==v){let t=!0===v?l(r.BYTES):v;A.push((0,u.ql)("extraEntropy",t))}return{seed:u.eV(...A),k2sig:function(t){let e=S(t);if(!w(e))return;let r=h(e),n=d.BASE.multiply(e).toAffine(),s=o(n.x);if(s===p)return;let a=o(r*o(b+s*_));if(a===p)return;let l=(n.x===s?0:2)|Number(n.y&y),u=a;if(f&&a>i>>y)u=a>i>>y?o(-a):a,l^=1;return new E(s,u,l)}}}(t,n,s);return u.n$(e.hash.outputLen,e.nByteLength,e.hmac)(a,l)},verify:function(t,r,i,n=I){let s,a;if(r=(0,u.ql)("msgHash",r),i=(0,u.ql)("publicKey",i),"strict"in n)throw Error("options.strict was renamed to lowS");c(n);let{lowS:l,prehash:p}=n;try{if("string"==typeof t||u._t(t))try{a=E.fromDER(t)}catch(e){if(!(e instanceof f.Err))throw e;a=E.fromCompact(t)}else if("object"==typeof t&&"bigint"==typeof t.r&&"bigint"==typeof t.s){let{r:e,s:r}=t;a=new E(e,r)}else throw Error("PARSE");s=d.fromHex(i)}catch(t){if("PARSE"===t.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&a.hasHighS())return!1;p&&(r=e.hash(r));let{r:y,s:g}=a,m=x(r),v=h(g),w=o(m*v),b=o(y*v),_=d.BASE.multiplyAndAddUnsafe(s,w,b)?.toAffine();return!!_&&o(_.x)===y},ProjectivePoint:d,Signature:E,utils:{isValidPrivateKey(t){try{return m(t),!0}catch(t){return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{let t=l.PS(e.n);return l.Us(e.randomBytes(t),e.n)},precompute:(t=8,e=d.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)}}})({...t,hash:e,hmac:(t,...r)=>o(e,t,(0,n.eV)(...r)),randomBytes:n.O6});return Object.freeze({...r(e),create:r})}BigInt(4)},3358:function(t,e,r){"use strict";r.d(e,{D1:function(){return c},Kd:function(){return h},Mx:function(){return u}});var i=r(72147),n=r(57127);let s=BigInt(0),o=BigInt(1),a=new WeakMap,l=new WeakMap;function u(t,e){let r=(t,e)=>{let r=e.negate();return t?r:e},i=t=>{if(!Number.isSafeInteger(t)||t<=0||t>e)throw Error(`Wrong window size=${t}, should be [1..${e}]`)},n=t=>(i(t),{windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:r,unsafeLadder(e,r){let i=t.ZERO,n=e;for(;r>s;)r&o&&(i=i.add(n)),n=n.double(),r>>=o;return i},precomputeWindow(t,e){let{windows:r,windowSize:i}=n(e),s=[],o=t,a=o;for(let t=0;t<r;t++){a=o,s.push(a);for(let t=1;t<i;t++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,i,s){let{windows:a,windowSize:l}=n(e),u=t.ZERO,c=t.BASE,h=BigInt(2**e-1),d=2**e,f=BigInt(e);for(let t=0;t<a;t++){let e=t*l,n=Number(s&h);s>>=f,n>l&&(n-=d,s+=o);let a=e+Math.abs(n)-1,p=t%2!=0,y=n<0;0===n?c=c.add(r(p,i[e])):u=u.add(r(y,i[a]))}return{p:u,f:c}},wNAFCached(t,e,r){let i=l.get(t)||1,n=a.get(t);return n||(n=this.precomputeWindow(t,i),1!==i&&a.set(t,r(n))),this.wNAF(i,n,e)},setWindowSize(t,e){i(e),l.set(t,e),a.delete(t)}}}function c(t,e,r,i){if(!Array.isArray(r)||!Array.isArray(i)||i.length!==r.length)throw Error("arrays of points and scalars must have equal length");i.forEach((t,r)=>{if(!e.isValid(t))throw Error(`wrong scalar at index ${r}`)}),r.forEach((e,r)=>{if(!(e instanceof t))throw Error(`wrong point at index ${r}`)});let s=(0,n.Dd)(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=Array(a+1).fill(t.ZERO),u=Math.floor((e.BITS-1)/o)*o,c=t.ZERO;for(let e=u;e>=0;e-=o){l.fill(t.ZERO);for(let t=0;t<i.length;t++){let n=Number(i[t]>>BigInt(e)&BigInt(a));l[n]=l[n].add(r[t])}let n=t.ZERO;for(let e=l.length-1,r=t.ZERO;e>0;e--)r=r.add(l[e]),n=n.add(r);if(c=c.add(n),0!==e)for(let t=0;t<o;t++)c=c.double()}return c}function h(t){return(0,i.OP)(t.Fp),(0,n.FF)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,i.kK)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}},72147:function(t,e,r){"use strict";r.d(e,{OP:function(){return g},PS:function(){return b},Tu:function(){return p},U_:function(){return f},Us:function(){return _},gN:function(){return v},kK:function(){return m},oA:function(){return d},wQ:function(){return h}});var i=r(57127);let n=BigInt(0),s=BigInt(1),o=BigInt(2),a=BigInt(3),l=BigInt(4),u=BigInt(5),c=BigInt(8);function h(t,e){let r=t%e;return r>=n?r:e+r}function d(t,e,r){let i=t;for(;e-- >n;)i*=i,i%=r;return i}function f(t,e){if(t===n||e<=n)throw Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=h(t,e),i=e,o=n,a=s,l=s,u=n;for(;r!==n;){let t=i/r,e=i%r,n=o-l*t,s=a-u*t;i=r,r=e,o=l,a=u,l=n,u=s}if(i!==s)throw Error("invert: does not exist");return h(o,e)}BigInt(9),BigInt(16);let p=(t,e)=>(h(t,e)&s)===s,y=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function g(t){let e=y.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,i.FF)(t,e)}function m(t,e){let r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function v(t,e,r=!1,d={}){if(t<=n)throw Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:p,nByteLength:y}=m(t,e);if(y>2048)throw Error("Field lengths over 2048 bytes are not supported");let g=function(t){if(t%l===a){let e=(t+s)/l;return function(t,r){let i=t.pow(r,e);if(!t.eql(t.sqr(i),r))throw Error("Cannot find square root");return i}}if(t%c===u){let e=(t-u)/c;return function(t,r){let i=t.mul(r,o),n=t.pow(i,e),s=t.mul(r,n),a=t.mul(t.mul(s,o),n),l=t.mul(s,t.sub(a,t.ONE));if(!t.eql(t.sqr(l),r))throw Error("Cannot find square root");return l}}return function(t){let e,r,i;let a=(t-s)/o;for(e=t-s,r=0;e%o===n;e/=o,r++);for(i=o;i<t&&function(t,e,r){if(r<=n||e<n)throw Error("Expected power/modulo > 0");if(r===s)return n;let i=s;for(;e>n;)e&s&&(i=i*t%r),t=t*t%r,e>>=s;return i}(i,a,t)!==t-s;i++);if(1===r){let e=(t+s)/l;return function(t,r){let i=t.pow(r,e);if(!t.eql(t.sqr(i),r))throw Error("Cannot find square root");return i}}let u=(e+s)/o;return function(t,n){if(t.pow(n,a)===t.neg(t.ONE))throw Error("Cannot find square root");let o=r,l=t.pow(t.mul(t.ONE,i),e),c=t.pow(n,u),h=t.pow(n,e);for(;!t.eql(h,t.ONE);){if(t.eql(h,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(h);e<o&&!t.eql(r,t.ONE);e++)r=t.sqr(r);let r=t.pow(l,s<<BigInt(o-e-1));l=t.sqr(r),c=t.mul(c,r),h=t.mul(h,l),o=e}return c}}(t)}(t),v=Object.freeze({ORDER:t,BITS:p,BYTES:y,MASK:(0,i.dQ)(p),ZERO:n,ONE:s,create:e=>h(e,t),isValid:e=>{if("bigint"!=typeof e)throw Error(`Invalid field element: expected bigint, got ${typeof e}`);return n<=e&&e<t},is0:t=>t===n,isOdd:t=>(t&s)===s,neg:e=>h(-e,t),eql:(t,e)=>t===e,sqr:e=>h(e*e,t),add:(e,r)=>h(e+r,t),sub:(e,r)=>h(e-r,t),mul:(e,r)=>h(e*r,t),pow:(t,e)=>(function(t,e,r){if(r<n)throw Error("Expected power > 0");if(r===n)return t.ONE;if(r===s)return e;let i=t.ONE,o=e;for(;r>n;)r&s&&(i=t.mul(i,o)),o=t.sqr(o),r>>=s;return i})(v,t,e),div:(e,r)=>h(e*f(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>f(e,t),sqrt:d.sqrt||(t=>g(v,t)),invertBatch:t=>(function(t,e){let r=Array(e.length),i=e.reduce((e,i,n)=>t.is0(i)?e:(r[n]=e,t.mul(e,i)),t.ONE),n=t.inv(i);return e.reduceRight((e,i,n)=>t.is0(i)?e:(r[n]=t.mul(e,r[n]),t.mul(e,i)),n),r})(v,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?(0,i.S5)(t,y):(0,i.tL)(t,y),fromBytes:t=>{if(t.length!==y)throw Error(`Fp.fromBytes: expected ${y}, got ${t.length}`);return r?(0,i.ty)(t):(0,i.bytesToNumberBE)(t)}});return Object.freeze(v)}function w(t){if("bigint"!=typeof t)throw Error("field order must be bigint");return Math.ceil(t.toString(2).length/8)}function b(t){let e=w(t);return e+Math.ceil(e/2)}function _(t,e,r=!1){let n=t.length,o=w(e),a=b(e);if(n<16||n<a||n>1024)throw Error(`expected ${a}-1024 bytes of input, got ${n}`);let l=h(r?(0,i.bytesToNumberBE)(t):(0,i.ty)(t),e-s)+s;return r?(0,i.S5)(l,o):(0,i.tL)(l,o)}},57127:function(t,e,r){"use strict";r.d(e,{Dd:function(){return x},FF:function(){return U},Fy:function(){return S},H9:function(){return B},S5:function(){return w},Z2:function(){return A},_t:function(){return o},bytesToNumberBE:function(){return g},ci:function(){return c},dQ:function(){return T},eV:function(){return _},gk:function(){return a},hexToBytes:function(){return y},n$:function(){return I},ql:function(){return b},tL:function(){return v},ty:function(){return m},uw:function(){return l},uz:function(){return h}});let i=BigInt(0),n=BigInt(1),s=BigInt(2);function o(t){return t instanceof Uint8Array||null!=t&&"object"==typeof t&&"Uint8Array"===t.constructor.name}function a(t){if(!o(t))throw Error("Uint8Array expected")}function l(t,e){if("boolean"!=typeof e)throw Error(`${t} must be valid boolean, got "${e}".`)}let u=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function c(t){a(t);let e="";for(let r=0;r<t.length;r++)e+=u[t[r]];return e}function h(t){let e=t.toString(16);return 1&e.length?`0${e}`:e}function d(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}let f={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function p(t){return t>=f._0&&t<=f._9?t-f._0:t>=f._A&&t<=f._F?t-(f._A-10):t>=f._a&&t<=f._f?t-(f._a-10):void 0}function y(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw Error("padded hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(r);for(let e=0,n=0;e<r;e++,n+=2){let r=p(t.charCodeAt(n)),s=p(t.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(t[n]+t[n+1])+'" at index '+n);i[e]=16*r+s}return i}function g(t){return d(c(t))}function m(t){return a(t),d(c(Uint8Array.from(t).reverse()))}function v(t,e){return y(t.toString(16).padStart(2*e,"0"))}function w(t,e){return v(t,e).reverse()}function b(t,e,r){let i;if("string"==typeof e)try{i=y(e)}catch(r){throw Error(`${t} must be valid hex string, got "${e}". Cause: ${r}`)}else if(o(e))i=Uint8Array.from(e);else throw Error(`${t} must be hex string or Uint8Array`);let n=i.length;if("number"==typeof r&&n!==r)throw Error(`${t} expected ${r} bytes, got ${n}`);return i}function _(...t){let e=0;for(let r=0;r<t.length;r++){let i=t[r];a(i),e+=i.length}let r=new Uint8Array(e);for(let e=0,i=0;e<t.length;e++){let n=t[e];r.set(n,i),i+=n.length}return r}let E=t=>"bigint"==typeof t&&i<=t;function A(t,e,r){return E(t)&&E(e)&&E(r)&&e<=t&&t<r}function S(t,e,r,i){if(!A(e,r,i))throw Error(`expected valid ${t}: ${r} <= n < ${i}, got ${typeof e} ${e}`)}function x(t){let e;for(e=0;t>i;t>>=n,e+=1);return e}let T=t=>(s<<BigInt(t-1))-n,k=t=>new Uint8Array(t),O=t=>Uint8Array.from(t);function I(t,e,r){if("number"!=typeof t||t<2)throw Error("hashLen must be a number");if("number"!=typeof e||e<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=k(t),n=k(t),s=0,o=()=>{i.fill(1),n.fill(0),s=0},a=(...t)=>r(n,i,...t),l=(t=k())=>{n=a(O([0]),t),i=a(),0!==t.length&&(n=a(O([1]),t),i=a())},u=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let t=0,r=[];for(;t<e;){let e=(i=a()).slice();r.push(e),t+=i.length}return _(...r)};return(t,e)=>{let r;for(o(),l(t);!(r=e(u()));)l();return o(),r}}let P={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||o(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function U(t,e,r={}){let i=(e,r,i)=>{let n=P[r];if("function"!=typeof n)throw Error(`Invalid validator "${r}", expected function`);let s=t[e];if((!i||void 0!==s)&&!n(s,t))throw Error(`Invalid param ${String(e)}=${s} (${typeof s}), expected ${r}`)};for(let[t,r]of Object.entries(e))i(t,r,!1);for(let[t,e]of Object.entries(r))i(t,e,!0);return t}function B(t){let e=new WeakMap;return(r,...i)=>{let n=e.get(r);if(void 0!==n)return n;let s=t(r,...i);return e.set(r,s),s}}},74591:function(t,e,r){"use strict";r.d(e,{UN:function(){return I}});var i=r(94208),n=r(80997),s=r(31791);let[o,a]=n.ZP.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),l=new Uint32Array(80),u=new Uint32Array(80);class c extends i.VR{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:e,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:l,El:u,Fh:c,Fl:h,Gh:d,Gl:f,Hh:p,Hl:y}=this;return[t,e,r,i,n,s,o,a,l,u,c,h,d,f,p,y]}set(t,e,r,i,n,s,o,a,l,u,c,h,d,f,p,y){this.Ah=0|t,this.Al=0|e,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|l,this.El=0|u,this.Fh=0|c,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|y}process(t,e){for(let r=0;r<16;r++,e+=4)l[r]=t.getUint32(e),u[r]=t.getUint32(e+=4);for(let t=16;t<80;t++){let e=0|l[t-15],r=0|u[t-15],i=n.ZP.rotrSH(e,r,1)^n.ZP.rotrSH(e,r,8)^n.ZP.shrSH(e,r,7),s=n.ZP.rotrSL(e,r,1)^n.ZP.rotrSL(e,r,8)^n.ZP.shrSL(e,r,7),o=0|l[t-2],a=0|u[t-2],c=n.ZP.rotrSH(o,a,19)^n.ZP.rotrBH(o,a,61)^n.ZP.shrSH(o,a,6),h=n.ZP.rotrSL(o,a,19)^n.ZP.rotrBL(o,a,61)^n.ZP.shrSL(o,a,6),d=n.ZP.add4L(s,h,u[t-7],u[t-16]),f=n.ZP.add4H(d,i,c,l[t-7],l[t-16]);l[t]=0|f,u[t]=0|d}let{Ah:r,Al:i,Bh:s,Bl:c,Ch:h,Cl:d,Dh:f,Dl:p,Eh:y,El:g,Fh:m,Fl:v,Gh:w,Gl:b,Hh:_,Hl:E}=this;for(let t=0;t<80;t++){let e=n.ZP.rotrSH(y,g,14)^n.ZP.rotrSH(y,g,18)^n.ZP.rotrBH(y,g,41),A=n.ZP.rotrSL(y,g,14)^n.ZP.rotrSL(y,g,18)^n.ZP.rotrBL(y,g,41),S=y&m^~y&w,x=g&v^~g&b,T=n.ZP.add5L(E,A,x,a[t],u[t]),k=n.ZP.add5H(T,_,e,S,o[t],l[t]),O=0|T,I=n.ZP.rotrSH(r,i,28)^n.ZP.rotrBH(r,i,34)^n.ZP.rotrBH(r,i,39),P=n.ZP.rotrSL(r,i,28)^n.ZP.rotrBL(r,i,34)^n.ZP.rotrBL(r,i,39),U=r&s^r&h^s&h,B=i&c^i&d^c&d;_=0|w,E=0|b,w=0|m,b=0|v,m=0|y,v=0|g,({h:y,l:g}=n.ZP.add(0|f,0|p,0|k,0|O)),f=0|h,p=0|d,h=0|s,d=0|c,s=0|r,c=0|i;let R=n.ZP.add3L(O,P,B);r=n.ZP.add3H(R,k,I,U),i=0|R}({h:r,l:i}=n.ZP.add(0|this.Ah,0|this.Al,0|r,0|i)),({h:s,l:c}=n.ZP.add(0|this.Bh,0|this.Bl,0|s,0|c)),({h:h,l:d}=n.ZP.add(0|this.Ch,0|this.Cl,0|h,0|d)),({h:f,l:p}=n.ZP.add(0|this.Dh,0|this.Dl,0|f,0|p)),({h:y,l:g}=n.ZP.add(0|this.Eh,0|this.El,0|y,0|g)),({h:m,l:v}=n.ZP.add(0|this.Fh,0|this.Fl,0|m,0|v)),({h:w,l:b}=n.ZP.add(0|this.Gh,0|this.Gl,0|w,0|b)),({h:_,l:E}=n.ZP.add(0|this.Hh,0|this.Hl,0|_,0|E)),this.set(r,i,s,c,h,d,f,p,y,g,m,v,w,b,_,E)}roundClean(){l.fill(0),u.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let h=(0,s.hE)(()=>new c);var d=r(3358),f=r(72147),p=r(57127);let y=BigInt(0),g=BigInt(1),m=BigInt(2),v=BigInt(8),w={zip215:!0},b=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),_=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),E=BigInt(0),A=BigInt(1),S=BigInt(2);BigInt(3);let x=BigInt(5),T=BigInt(8);function k(t,e){let r=(0,f.wQ)(e*e*e,b),i=function(t){let e=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=t*t%b*t%b,o=(0,f.oA)(s,S,b)*s%b,a=(0,f.oA)(o,A,b)*t%b,l=(0,f.oA)(a,x,b)*a%b,u=(0,f.oA)(l,e,b)*l%b,c=(0,f.oA)(u,r,b)*u%b,h=(0,f.oA)(c,i,b)*c%b,d=(0,f.oA)(h,n,b)*h%b,p=(0,f.oA)(d,n,b)*h%b,y=(0,f.oA)(p,e,b)*l%b;return{pow_p_5_8:(0,f.oA)(y,S,b)*t%b,b2:s}}(t*(0,f.wQ)(r*r*e,b)).pow_p_5_8,n=(0,f.wQ)(t*r*i,b),s=(0,f.wQ)(e*n*n,b),o=n,a=(0,f.wQ)(n*_,b),l=s===t,u=s===(0,f.wQ)(-t,b),c=s===(0,f.wQ)(-t*_,b);return l&&(n=o),(u||c)&&(n=a),(0,f.Tu)(n,b)&&(n=(0,f.wQ)(-n,b)),{isValid:l||u,value:n}}let O=(0,f.gN)(b,void 0,!0),I=function(t){let e=function(t){let e=(0,d.Kd)(t);return p.FF(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}(t),{Fp:r,n:i,prehash:n,hash:s,randomBytes:o,nByteLength:a,h:l}=e,u=m<<BigInt(8*a)-g,c=r.create,h=(0,f.gN)(e.n,e.nBitLength),b=e.uvRatio||((t,e)=>{try{return{isValid:!0,value:r.sqrt(t*r.inv(e))}}catch(t){return{isValid:!1,value:y}}}),_=e.adjustScalarBytes||(t=>t),E=e.domain||((t,e,r)=>{if((0,p.uw)("phflag",r),e.length||r)throw Error("Contexts/pre-hash are not supported");return t});function A(t,e){p.Fy("coordinate "+t,e,y,u)}function S(t){if(!(t instanceof k))throw Error("ExtendedPoint expected")}let x=(0,p.H9)((t,e)=>{let{ex:i,ey:n,ez:s}=t,o=t.is0();null==e&&(e=o?v:r.inv(s));let a=c(i*e),l=c(n*e),u=c(s*e);if(o)return{x:y,y:g};if(u!==g)throw Error("invZ was invalid");return{x:a,y:l}}),T=(0,p.H9)(t=>{let{a:r,d:i}=e;if(t.is0())throw Error("bad point: ZERO");let{ex:n,ey:s,ez:o,et:a}=t,l=c(n*n),u=c(s*s),h=c(o*o),d=c(h*h),f=c(l*r);if(c(h*c(f+u))!==c(d+c(i*c(l*u))))throw Error("bad point: equation left != right (1)");if(c(n*s)!==c(o*a))throw Error("bad point: equation left != right (2)");return!0});class k{constructor(t,e,r,i){this.ex=t,this.ey=e,this.ez=r,this.et=i,A("x",t),A("y",e),A("z",r),A("t",i),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(t){if(t instanceof k)throw Error("extended point not allowed");let{x:e,y:r}=t||{};return A("x",e),A("y",r),new k(e,r,g,c(e*r))}static normalizeZ(t){let e=r.invertBatch(t.map(t=>t.ez));return t.map((t,r)=>t.toAffine(e[r])).map(k.fromAffine)}static msm(t,e){return(0,d.D1)(k,h,t,e)}_setWindowSize(t){P.setWindowSize(this,t)}assertValidity(){T(this)}equals(t){S(t);let{ex:e,ey:r,ez:i}=this,{ex:n,ey:s,ez:o}=t,a=c(e*o),l=c(n*i),u=c(r*o),h=c(s*i);return a===l&&u===h}is0(){return this.equals(k.ZERO)}negate(){return new k(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){let{a:t}=e,{ex:r,ey:i,ez:n}=this,s=c(r*r),o=c(i*i),a=c(m*c(n*n)),l=c(t*s),u=r+i,h=c(c(u*u)-s-o),d=l+o,f=d-a,p=l-o,y=c(h*f),g=c(d*p),v=c(h*p);return new k(y,g,c(f*d),v)}add(t){S(t);let{a:r,d:i}=e,{ex:n,ey:s,ez:o,et:a}=this,{ex:l,ey:u,ez:h,et:d}=t;if(r===BigInt(-1)){let t=c((s-n)*(u+l)),e=c((s+n)*(u-l)),r=c(e-t);if(r===y)return this.double();let i=c(o*m*d),f=c(a*m*h),p=f+i,g=e+t,v=f-i,w=c(p*r),b=c(g*v),_=c(p*v);return new k(w,b,c(r*g),_)}let f=c(n*l),p=c(s*u),g=c(a*i*d),v=c(o*h),w=c((n+s)*(l+u)-f-p),b=v-g,_=v+g,E=c(p-r*f),A=c(w*b),x=c(_*E),T=c(w*E);return new k(A,x,c(b*_),T)}subtract(t){return this.add(t.negate())}wNAF(t){return P.wNAFCached(this,t,k.normalizeZ)}multiply(t){p.Fy("scalar",t,g,i);let{p:e,f:r}=this.wNAF(t);return k.normalizeZ([e,r])[0]}multiplyUnsafe(t){return(p.Fy("scalar",t,y,i),t===y)?I:this.equals(I)||t===g?this:this.equals(O)?this.wNAF(t).p:P.unsafeLadder(this,t)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return P.unsafeLadder(this,i).is0()}toAffine(t){return x(this,t)}clearCofactor(){let{h:t}=e;return t===g?this:this.multiplyUnsafe(t)}static fromHex(t,i=!1){let{d:n,a:s}=e,o=r.BYTES;t=(0,p.ql)("pointHex",t,o),(0,p.uw)("zip215",i);let a=t.slice(),l=t[o-1];a[o-1]=-129&l;let h=p.ty(a),d=i?u:r.ORDER;p.Fy("pointHex.y",h,y,d);let f=c(h*h),{isValid:m,value:v}=b(c(f-g),c(n*f-s));if(!m)throw Error("Point.fromHex: invalid y coordinate");let w=(v&g)===g,_=(128&l)!=0;if(!i&&v===y&&_)throw Error("Point.fromHex: x=0 and x_0=1");return _!==w&&(v=c(-v)),k.fromAffine({x:v,y:h})}static fromPrivateKey(t){return B(t).point}toRawBytes(){let{x:t,y:e}=this.toAffine(),i=p.S5(e,r.BYTES);return i[i.length-1]|=t&g?128:0,i}toHex(){return p.ci(this.toRawBytes())}}k.BASE=new k(e.Gx,e.Gy,g,c(e.Gx*e.Gy)),k.ZERO=new k(y,g,g,y);let{BASE:O,ZERO:I}=k,P=(0,d.Mx)(k,8*a);function U(t){var e;return e=p.ty(t),(0,f.wQ)(e,i)}function B(t){t=(0,p.ql)("private key",t,a);let e=(0,p.ql)("hashed private key",s(t),2*a),r=_(e.slice(0,a)),i=e.slice(a,2*a),n=U(r),o=O.multiply(n),l=o.toRawBytes();return{head:r,prefix:i,scalar:n,point:o,pointBytes:l}}function R(t=new Uint8Array,...e){return U(s(E(p.eV(...e),(0,p.ql)("context",t),!!n)))}return O._setWindowSize(8),{CURVE:e,getPublicKey:function(t){return B(t).pointBytes},sign:function(t,e,s={}){var o;t=(0,p.ql)("message",t),n&&(t=n(t));let{prefix:l,scalar:u,pointBytes:c}=B(e),h=R(s.context,l,t),d=O.multiply(h).toRawBytes(),g=(o=h+R(s.context,d,c,t)*u,(0,f.wQ)(o,i));p.Fy("signature.s",g,y,i);let m=p.eV(d,p.S5(g,r.BYTES));return(0,p.ql)("result",m,2*a)},verify:function(t,e,i,s=w){let o,a,l;let{context:u,zip215:c}=s,h=r.BYTES;t=(0,p.ql)("signature",t,2*h),e=(0,p.ql)("message",e),void 0!==c&&(0,p.uw)("zip215",c),n&&(e=n(e));let d=p.ty(t.slice(h,2*h));try{o=k.fromHex(i,c),a=k.fromHex(t.slice(0,h),c),l=O.multiplyUnsafe(d)}catch(t){return!1}if(!c&&o.isSmallOrder())return!1;let f=R(u,a.toRawBytes(),o.toRawBytes(),e);return a.add(o.multiplyUnsafe(f)).subtract(l).clearCofactor().equals(k.ZERO)},ExtendedPoint:k,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(r.BYTES),precompute:(t=8,e=k.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)}}}({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:O,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:T,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:h,randomBytes:s.O6,adjustScalarBytes:function(t){return t[0]&=248,t[31]&=127,t[31]|=64,t},uvRatio:k});function P(t){if(!(t instanceof N))throw Error("RistrettoPoint expected")}let U=t=>k(A,t),B=t=>I.CURVE.Fp.create(null&bytesToNumberLE(t));function R(t){let{d:e}=I.CURVE,r=I.CURVE.Fp.ORDER,i=I.CURVE.Fp.create,n=i(null*t*t),s=i((n+A)*null),o=BigInt(-1),a=i((o-e*n)*i(n+e)),{isValid:l,value:u}=k(s,a),c=i(u*t);isNegativeLE(c,r)||(c=i(-c)),l||(u=c),l||(o=n);let h=i(o*(n-A)*null-a),d=u*u,f=i((u+u)*a),p=i(null*h),y=i(A-d),g=i(A+d);return new I.ExtendedPoint(i(f*g),i(y*p),i(p*g),i(f*y))}class N{constructor(t){this.ep=t}static fromAffine(t){return new N(I.ExtendedPoint.fromAffine(t))}static hashToCurve(t){let e=R(B((t=ensureBytes("ristrettoHash",t,64)).slice(0,32))),r=R(B(t.slice(32,64)));return new N(e.add(r))}static fromHex(t){t=ensureBytes("ristrettoHex",t,32);let{a:e,d:r}=I.CURVE,i=I.CURVE.Fp.ORDER,n=I.CURVE.Fp.create,s="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=B(t);if(!equalBytes(numberToBytesLE(o,32),t)||isNegativeLE(o,i))throw Error(s);let a=n(o*o),l=n(A+e*a),u=n(A-e*a),c=n(l*l),h=n(u*u),d=n(e*r*c-h),{isValid:f,value:p}=U(n(d*h)),y=n(p*u),g=n(p*y*d),m=n((o+o)*y);isNegativeLE(m,i)&&(m=n(-m));let v=n(l*g),w=n(m*v);if(!f||isNegativeLE(w,i)||v===E)throw Error(s);return new N(new I.ExtendedPoint(m,v,A,w))}toRawBytes(){let t,{ex:e,ey:r,ez:i,et:n}=this.ep,s=I.CURVE.Fp.ORDER,o=I.CURVE.Fp.create,a=o(o(i+r)*o(i-r)),l=o(e*r),u=o(l*l),{value:c}=U(o(a*u)),h=o(c*a),d=o(c*l),f=o(h*d*n);if(isNegativeLE(n*f,s)){let i=o(null*r),n=o(null*e);e=i,r=n,t=o(null*h)}else t=d;isNegativeLE(e*f,s)&&(r=o(-r));let p=o((i-r)*t);return isNegativeLE(p,s)&&(p=o(-p)),numberToBytesLE(p,32)}toHex(){return bytesToHex(this.toRawBytes())}toString(){return this.toHex()}equals(t){P(t);let{ex:e,ey:r}=this.ep,{ex:i,ey:n}=t.ep,s=I.CURVE.Fp.create,o=s(e*n)===s(r*i),a=s(r*n)===s(e*i);return o||a}add(t){return P(t),new N(this.ep.add(t.ep))}subtract(t){return P(t),new N(this.ep.subtract(t.ep))}multiply(t){return new N(this.ep.multiply(t))}multiplyUnsafe(t){return new N(this.ep.multiplyUnsafe(t))}double(){return new N(this.ep.double())}negate(){return new N(this.ep.negate())}}},68491:function(t,e,r){"use strict";r.d(e,{kA:function(){return d}});var i=r(87980),n=r(23084),s=r(72147);let o=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),a=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),l=BigInt(1),u=BigInt(2),c=(t,e)=>(t+e/u)/e,h=(0,s.gN)(o,void 0,void 0,{sqrt:function(t){let e=BigInt(3),r=BigInt(6),i=BigInt(11),n=BigInt(22),a=BigInt(23),l=BigInt(44),c=BigInt(88),d=t*t*t%o,f=d*d*t%o,p=(0,s.oA)(f,e,o)*f%o,y=(0,s.oA)(p,e,o)*f%o,g=(0,s.oA)(y,u,o)*d%o,m=(0,s.oA)(g,i,o)*g%o,v=(0,s.oA)(m,n,o)*m%o,w=(0,s.oA)(v,l,o)*v%o,b=(0,s.oA)(w,c,o)*w%o,_=(0,s.oA)(b,l,o)*v%o,E=(0,s.oA)(_,e,o)*f%o,A=(0,s.oA)(E,a,o)*m%o,S=(0,s.oA)(A,r,o)*d%o,x=(0,s.oA)(S,u,o);if(!h.eql(h.sqr(x),t))throw Error("Cannot find square root");return x}}),d=(0,n._)({a:BigInt(0),b:BigInt(7),Fp:h,n:a,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-l*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),n=BigInt("0x100000000000000000000000000000000"),o=c(e*t,a),u=c(-r*t,a),h=(0,s.wQ)(t-o*e-u*i,a),d=(0,s.wQ)(-o*r-u*e,a),f=h>n,p=d>n;if(f&&(h=a-h),p&&(d=a-d),h>n||d>n)throw Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:h,k2neg:p,k2:d}}}},i.JQ);BigInt(0),d.ProjectivePoint},10467:function(t,e,r){"use strict";function i(t){if(!Number.isSafeInteger(t)||t<0)throw Error(`positive integer expected, not ${t}`)}function n(t,...e){if(!(t instanceof Uint8Array||null!=t&&"object"==typeof t&&"Uint8Array"===t.constructor.name))throw Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function s(t){if("function"!=typeof t||"function"!=typeof t.create)throw Error("Hash should be wrapped by utils.wrapConstructor");i(t.outputLen),i(t.blockLen)}function o(t,e=!0){if(t.destroyed)throw Error("Hash instance has been destroyed");if(e&&t.finished)throw Error("Hash#digest() has already been called")}function a(t,e){n(t);let r=e.outputLen;if(t.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}r.d(e,{Gg:function(){return o},J8:function(){return a},Rx:function(){return i},aI:function(){return n},vp:function(){return s}})},94208:function(t,e,r){"use strict";r.d(e,{VR:function(){return a},bc:function(){return s},l3:function(){return o}});var i=r(10467),n=r(31791);let s=(t,e,r)=>t&e^~t&r,o=(t,e,r)=>t&e^t&r^e&r;class a extends n.kb{constructor(t,e,r,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,n.GL)(this.buffer)}update(t){(0,i.Gg)(this);let{view:e,buffer:r,blockLen:s}=this,o=(t=(0,n.O0)(t)).length;for(let i=0;i<o;){let a=Math.min(s-this.pos,o-i);if(a===s){let e=(0,n.GL)(t);for(;s<=o-i;i+=s)this.process(e,i);continue}r.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,i.Gg)(this),(0,i.J8)(t,this),this.finished=!0;let{buffer:e,view:r,blockLen:s,isLE:o}=this,{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let t=a;t<s;t++)e[t]=0;(function(t,e,r,i){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,u=i?0:4;t.setUint32(e+l,o,i),t.setUint32(e+u,a,i)})(r,s-8,BigInt(8*this.length),o),this.process(r,0);let l=(0,n.GL)(t),u=this.outputLen;if(u%4)throw Error("_sha2: outputLen should be aligned to 32bit");let c=u/4,h=this.get();if(c>h.length)throw Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)l.setUint32(4*t,h[t],o)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return t.length=i,t.pos=o,t.finished=n,t.destroyed=s,i%e&&t.buffer.set(r),t}}},80997:function(t,e,r){"use strict";r.d(e,{EP:function(){return a},SD:function(){return u},Vl:function(){return o},gm:function(){return l},mk:function(){return c}});let i=BigInt(4294967296-1),n=BigInt(32);function s(t,e=!1){return e?{h:Number(t&i),l:Number(t>>n&i)}:{h:0|Number(t>>n&i),l:0|Number(t&i)}}function o(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){let{h:o,l:a}=s(t[n],e);[r[n],i[n]]=[o,a]}return[r,i]}let a=(t,e,r)=>t<<r|e>>>32-r,l=(t,e,r)=>e<<r|t>>>32-r,u=(t,e,r)=>e<<r-32|t>>>64-r,c=(t,e,r)=>t<<r-32|e>>>64-r;e.ZP={fromBig:s,split:o,toBig:(t,e)=>BigInt(t>>>0)<<n|BigInt(e>>>0),shrSH:(t,e,r)=>t>>>r,shrSL:(t,e,r)=>t<<32-r|e>>>r,rotrSH:(t,e,r)=>t>>>r|e<<32-r,rotrSL:(t,e,r)=>t<<32-r|e>>>r,rotrBH:(t,e,r)=>t<<64-r|e>>>r-32,rotrBL:(t,e,r)=>t>>>r-32|e<<64-r,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:a,rotlSL:l,rotlBH:u,rotlBL:c,add:function(t,e,r,i){let n=(e>>>0)+(i>>>0);return{h:t+r+(n/4294967296|0)|0,l:0|n}},add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,i)=>e+r+i+(t/4294967296|0)|0,add4L:(t,e,r,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0),add4H:(t,e,r,i,n)=>e+r+i+n+(t/4294967296|0)|0,add5H:(t,e,r,i,n,s)=>e+r+i+n+s+(t/4294967296|0)|0,add5L:(t,e,r,i,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0)+(n>>>0)}},87980:function(t,e,r){"use strict";r.d(e,{JQ:function(){return u}});var i=r(94208),n=r(31791);let s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class l extends i.VR{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){let{A:t,B:e,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[t,e,r,i,n,s,o,a]}set(t,e,r,i,n,s,o,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)a[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){let e=a[t-15],r=a[t-2],i=(0,n.np)(e,7)^(0,n.np)(e,18)^e>>>3,s=(0,n.np)(r,17)^(0,n.np)(r,19)^r>>>10;a[t]=s+a[t-7]+i+a[t-16]|0}let{A:r,B:o,C:l,D:u,E:c,F:h,G:d,H:f}=this;for(let t=0;t<64;t++){let e=f+((0,n.np)(c,6)^(0,n.np)(c,11)^(0,n.np)(c,25))+(0,i.bc)(c,h,d)+s[t]+a[t]|0,p=((0,n.np)(r,2)^(0,n.np)(r,13)^(0,n.np)(r,22))+(0,i.l3)(r,o,l)|0;f=d,d=h,h=c,c=u+e|0,u=l,l=o,o=r,r=e+p|0}r=r+this.A|0,o=o+this.B|0,l=l+this.C|0,u=u+this.D|0,c=c+this.E|0,h=h+this.F|0,d=d+this.G|0,f=f+this.H|0,this.set(r,o,l,u,c,h,d,f)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let u=(0,n.hE)(()=>new l)},44267:function(t,e,r){"use strict";r.d(e,{fr:function(){return b}});var i=r(10467),n=r(80997),s=r(31791);let o=[],a=[],l=[],u=BigInt(0),c=BigInt(1),h=BigInt(2),d=BigInt(7),f=BigInt(256),p=BigInt(113);for(let t=0,e=c,r=1,i=0;t<24;t++){[r,i]=[i,(2*r+3*i)%5],o.push(2*(5*i+r)),a.push((t+1)*(t+2)/2%64);let n=u;for(let t=0;t<7;t++)(e=(e<<c^(e>>d)*p)%f)&h&&(n^=c<<(c<<BigInt(t))-c);l.push(n)}let[y,g]=(0,n.Vl)(l,!0),m=(t,e,r)=>r>32?(0,n.SD)(t,e,r):(0,n.EP)(t,e,r),v=(t,e,r)=>r>32?(0,n.mk)(t,e,r):(0,n.gm)(t,e,r);class w extends s.kb{constructor(t,e,r,n=!1,o=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=n,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,i.Rx)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.Jq)(this.state)}keccak(){s.iA||(0,s.l1)(this.state32),function(t,e=24){let r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){let i=(e+8)%10,n=(e+2)%10,s=r[n],o=r[n+1],a=m(s,o,1)^r[i],l=v(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)t[e+r]^=a,t[e+r+1]^=l}let e=t[2],n=t[3];for(let r=0;r<24;r++){let i=a[r],s=m(e,n,i),l=v(e,n,i),u=o[r];e=t[u],n=t[u+1],t[u]=s,t[u+1]=l}for(let e=0;e<50;e+=10){for(let i=0;i<10;i++)r[i]=t[e+i];for(let i=0;i<10;i++)t[e+i]^=~r[(i+2)%10]&r[(i+4)%10]}t[0]^=y[i],t[1]^=g[i]}r.fill(0)}(this.state32,this.rounds),s.iA||(0,s.l1)(this.state32),this.posOut=0,this.pos=0}update(t){(0,i.Gg)(this);let{blockLen:e,state:r}=this,n=(t=(0,s.O0)(t)).length;for(let i=0;i<n;){let s=Math.min(e-this.pos,n-i);for(let e=0;e<s;e++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:r,blockLen:i}=this;t[r]^=e,(128&e)!=0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){(0,i.Gg)(this,!1),(0,i.aI)(t),this.finish();let e=this.state,{blockLen:r}=this;for(let i=0,n=t.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);t.set(e.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,i.Rx)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,i.J8)(t,this),this.finished)throw Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:e,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return t||(t=new w(e,r,i,s,n)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=n,t.suffix=r,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}}let b=(0,s.hE)(()=>new w(136,1,32))},31791:function(t,e,r){"use strict";r.d(e,{kb:function(){return f},l1:function(){return c},eV:function(){return d},GL:function(){return o},iA:function(){return l},O6:function(){return y},np:function(){return a},O0:function(){return h},Jq:function(){return s},hE:function(){return p}});let i="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var n=r(10467);let s=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),o=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),a=(t,e)=>t<<32-e|t>>>e,l=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],u=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function c(t){for(let e=0;e<t.length;e++)t[e]=u(t[e])}function h(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}(t)),(0,n.aI)(t),t}function d(...t){let e=0;for(let r=0;r<t.length;r++){let i=t[r];(0,n.aI)(i),e+=i.length}let r=new Uint8Array(e);for(let e=0,i=0;e<t.length;e++){let n=t[e];r.set(n,i),i+=n.length}return r}class f{clone(){return this._cloneInto()}}function p(t){let e=e=>t().update(h(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function y(t=32){if(i&&"function"==typeof i.getRandomValues)return i.getRandomValues(new Uint8Array(t));if(i&&"function"==typeof i.randomBytes)return i.randomBytes(t);throw Error("crypto.getRandomValues must be defined")}},36871:function(t,e,r){"use strict";r.d(e,{z9:function(){return l}});var i=r(93589),n=r(28070);let s="undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof crypto&&void 0!==crypto.subtle,o=void 0!==n&&null!=n.versions&&null!=n.versions.node,a=async t=>s?(await r.e(4576).then(r.bind(r,34576)).then(t=>t.signWithApiKey))(t):o?(await r.e(4593).then(r.bind(r,74593)).then(t=>t.signWithApiKey))(t):(await r.e(3328).then(r.bind(r,3328)).then(t=>t.signWithApiKey))(t);class l{constructor(t){this.apiPublicKey=t.apiPublicKey,this.apiPrivateKey=t.apiPrivateKey}async stamp(t){let e=await a({publicKey:this.apiPublicKey,privateKey:this.apiPrivateKey,content:t}),r={publicKey:this.apiPublicKey,scheme:"SIGNATURE_SCHEME_TK_API_P256",signature:e};return{stampHeaderName:"X-Stamp",stampHeaderValue:(0,i.To)(JSON.stringify(r))}}}},93589:function(t,e,r){"use strict";r.d(e,{HS:function(){return i},To:function(){return n},bN:function(){return s},fv:function(){return o},q8:function(){return a}});let i=32;function n(t){return(function(t){let e;if(0==arguments.length)throw TypeError("1 argument required, but only 0 present.");for(e=0,t=`${t}`;e<t.length;e++)if(t.charCodeAt(e)>255)throw Error(`InvalidCharacterError: found code point greater than 255:${t.charCodeAt(e)} at position ${e}`);let r="";for(e=0;e<t.length;e+=3){let i=[void 0,void 0,void 0,void 0];i[0]=t.charCodeAt(e)>>2,i[1]=(3&t.charCodeAt(e))<<4,t.length>e+1&&(i[1]|=t.charCodeAt(e+1)>>4,i[2]=(15&t.charCodeAt(e+1))<<2),t.length>e+2&&(i[2]|=t.charCodeAt(e+2)>>6,i[3]=63&t.charCodeAt(e+2));for(let t=0;t<i.length;t++)void 0===i[t]?r+="=":r+=function(t){if(t>=0&&t<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t]}(i[t])}return r})(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function s(t,e){return n(a(t.padStart(2*Math.ceil(t.length/2),"0"),e).reduce((t,e)=>t+String.fromCharCode(e),""))}function o(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}let a=(t,e)=>{if(!t||t.length%2!=0||!/^[0-9A-Fa-f]+$/.test(t))throw Error(`cannot create uint8array from invalid hex string: "${t}"`);let r=new Uint8Array(t.match(/../g).map(t=>parseInt(t,16)));if(!e)return r;if(t.length/2>e)throw Error("hex value cannot fit in a buffer of "+e+" byte(s)");let i=new Uint8Array(e);return i.set(r,e-r.length),i}},9594:function(t,e,r){"use strict";r.d(e,{eM:function(){return d},TF:function(){return h}}),r(36871);let i=r(96453).fetch,n="copy",s="convert";function o(t,e){return{required:!0,schema:t,derive:e}}function a(t){return{required:!0,schema:t}}function l(t){return{required:!1,schema:t}}let u={appid:l(n),appidExclude:l(n),credProps:l(n)};a(n),a(n),a(s),l(n),a({clientDataJSON:a(s),attestationObject:a(s),transports:o(n,t=>t.getTransports?.()||[])}),o(u,t=>t.getClientExtensionResults()),a(n),a(n),a(s),l(n),a({clientDataJSON:a(s),authenticatorData:a(s),signature:a(s),userHandle:a(s)}),o(u,t=>t.getClientExtensionResults()),r(46856).Buffer;class c extends Error{constructor(t){let e=`Turnkey error ${t.code}: ${t.message}`;null!=t.details&&(e+=` (Details: ${JSON.stringify(t.details)})`),super(e),this.name="TurnkeyRequestError",this.details=t.details??null,this.code=t.code}}class h{constructor(t,e){if(this.getActivity=async t=>this.request("/public/v1/query/get_activity",t),this.stampGetActivity=async t=>{let e=this.config.baseUrl+"/public/v1/query/get_activity",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getApiKey=async t=>this.request("/public/v1/query/get_api_key",t),this.stampGetApiKey=async t=>{let e=this.config.baseUrl+"/public/v1/query/get_api_key",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getApiKeys=async t=>this.request("/public/v1/query/get_api_keys",t),this.stampGetApiKeys=async t=>{let e=this.config.baseUrl+"/public/v1/query/get_api_keys",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getAttestationDocument=async t=>this.request("/public/v1/query/get_attestation",t),this.stampGetAttestationDocument=async t=>{let e=this.config.baseUrl+"/public/v1/query/get_attestation",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getAuthenticator=async t=>this.request("/public/v1/query/get_authenticator",t),this.stampGetAuthenticator=async t=>{let e=this.config.baseUrl+"/public/v1/query/get_authenticator",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getAuthenticators=async t=>this.request("/public/v1/query/get_authenticators",t),this.stampGetAuthenticators=async t=>{let e=this.config.baseUrl+"/public/v1/query/get_authenticators",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getOauthProviders=async t=>this.request("/public/v1/query/get_oauth_providers",t),this.stampGetOauthProviders=async t=>{let e=this.config.baseUrl+"/public/v1/query/get_oauth_providers",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getOrganization=async t=>this.request("/public/v1/query/get_organization",t),this.stampGetOrganization=async t=>{let e=this.config.baseUrl+"/public/v1/query/get_organization",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getOrganizationConfigs=async t=>this.request("/public/v1/query/get_organization_configs",t),this.stampGetOrganizationConfigs=async t=>{let e=this.config.baseUrl+"/public/v1/query/get_organization_configs",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getPolicy=async t=>this.request("/public/v1/query/get_policy",t),this.stampGetPolicy=async t=>{let e=this.config.baseUrl+"/public/v1/query/get_policy",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getPrivateKey=async t=>this.request("/public/v1/query/get_private_key",t),this.stampGetPrivateKey=async t=>{let e=this.config.baseUrl+"/public/v1/query/get_private_key",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getUser=async t=>this.request("/public/v1/query/get_user",t),this.stampGetUser=async t=>{let e=this.config.baseUrl+"/public/v1/query/get_user",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getWallet=async t=>this.request("/public/v1/query/get_wallet",t),this.stampGetWallet=async t=>{let e=this.config.baseUrl+"/public/v1/query/get_wallet",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getActivities=async t=>this.request("/public/v1/query/list_activities",t),this.stampGetActivities=async t=>{let e=this.config.baseUrl+"/public/v1/query/list_activities",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getPolicies=async t=>this.request("/public/v1/query/list_policies",t),this.stampGetPolicies=async t=>{let e=this.config.baseUrl+"/public/v1/query/list_policies",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.listPrivateKeyTags=async t=>this.request("/public/v1/query/list_private_key_tags",t),this.stampListPrivateKeyTags=async t=>{let e=this.config.baseUrl+"/public/v1/query/list_private_key_tags",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getPrivateKeys=async t=>this.request("/public/v1/query/list_private_keys",t),this.stampGetPrivateKeys=async t=>{let e=this.config.baseUrl+"/public/v1/query/list_private_keys",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getSubOrgIds=async t=>this.request("/public/v1/query/list_suborgs",t),this.stampGetSubOrgIds=async t=>{let e=this.config.baseUrl+"/public/v1/query/list_suborgs",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.listUserTags=async t=>this.request("/public/v1/query/list_user_tags",t),this.stampListUserTags=async t=>{let e=this.config.baseUrl+"/public/v1/query/list_user_tags",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getUsers=async t=>this.request("/public/v1/query/list_users",t),this.stampGetUsers=async t=>{let e=this.config.baseUrl+"/public/v1/query/list_users",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getWalletAccounts=async t=>this.request("/public/v1/query/list_wallet_accounts",t),this.stampGetWalletAccounts=async t=>{let e=this.config.baseUrl+"/public/v1/query/list_wallet_accounts",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getWallets=async t=>this.request("/public/v1/query/list_wallets",t),this.stampGetWallets=async t=>{let e=this.config.baseUrl+"/public/v1/query/list_wallets",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.getWhoami=async t=>this.request("/public/v1/query/whoami",t),this.stampGetWhoami=async t=>{let e=this.config.baseUrl+"/public/v1/query/whoami",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.approveActivity=async t=>this.request("/public/v1/submit/approve_activity",t),this.stampApproveActivity=async t=>{let e=this.config.baseUrl+"/public/v1/submit/approve_activity",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createApiKeys=async t=>this.request("/public/v1/submit/create_api_keys",t),this.stampCreateApiKeys=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_api_keys",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createApiOnlyUsers=async t=>this.request("/public/v1/submit/create_api_only_users",t),this.stampCreateApiOnlyUsers=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_api_only_users",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createAuthenticators=async t=>this.request("/public/v1/submit/create_authenticators",t),this.stampCreateAuthenticators=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_authenticators",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createInvitations=async t=>this.request("/public/v1/submit/create_invitations",t),this.stampCreateInvitations=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_invitations",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createOauthProviders=async t=>this.request("/public/v1/submit/create_oauth_providers",t),this.stampCreateOauthProviders=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_oauth_providers",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createPolicies=async t=>this.request("/public/v1/submit/create_policies",t),this.stampCreatePolicies=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_policies",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createPolicy=async t=>this.request("/public/v1/submit/create_policy",t),this.stampCreatePolicy=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_policy",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createPrivateKeyTag=async t=>this.request("/public/v1/submit/create_private_key_tag",t),this.stampCreatePrivateKeyTag=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_private_key_tag",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createPrivateKeys=async t=>this.request("/public/v1/submit/create_private_keys",t),this.stampCreatePrivateKeys=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_private_keys",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createReadOnlySession=async t=>this.request("/public/v1/submit/create_read_only_session",t),this.stampCreateReadOnlySession=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_read_only_session",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createReadWriteSession=async t=>this.request("/public/v1/submit/create_read_write_session",t),this.stampCreateReadWriteSession=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_read_write_session",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createSubOrganization=async t=>this.request("/public/v1/submit/create_sub_organization",t),this.stampCreateSubOrganization=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_sub_organization",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createUserTag=async t=>this.request("/public/v1/submit/create_user_tag",t),this.stampCreateUserTag=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_user_tag",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createUsers=async t=>this.request("/public/v1/submit/create_users",t),this.stampCreateUsers=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_users",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createWallet=async t=>this.request("/public/v1/submit/create_wallet",t),this.stampCreateWallet=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_wallet",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.createWalletAccounts=async t=>this.request("/public/v1/submit/create_wallet_accounts",t),this.stampCreateWalletAccounts=async t=>{let e=this.config.baseUrl+"/public/v1/submit/create_wallet_accounts",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.deleteApiKeys=async t=>this.request("/public/v1/submit/delete_api_keys",t),this.stampDeleteApiKeys=async t=>{let e=this.config.baseUrl+"/public/v1/submit/delete_api_keys",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.deleteAuthenticators=async t=>this.request("/public/v1/submit/delete_authenticators",t),this.stampDeleteAuthenticators=async t=>{let e=this.config.baseUrl+"/public/v1/submit/delete_authenticators",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.deleteInvitation=async t=>this.request("/public/v1/submit/delete_invitation",t),this.stampDeleteInvitation=async t=>{let e=this.config.baseUrl+"/public/v1/submit/delete_invitation",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.deleteOauthProviders=async t=>this.request("/public/v1/submit/delete_oauth_providers",t),this.stampDeleteOauthProviders=async t=>{let e=this.config.baseUrl+"/public/v1/submit/delete_oauth_providers",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.deletePolicy=async t=>this.request("/public/v1/submit/delete_policy",t),this.stampDeletePolicy=async t=>{let e=this.config.baseUrl+"/public/v1/submit/delete_policy",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.deletePrivateKeyTags=async t=>this.request("/public/v1/submit/delete_private_key_tags",t),this.stampDeletePrivateKeyTags=async t=>{let e=this.config.baseUrl+"/public/v1/submit/delete_private_key_tags",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.deleteUserTags=async t=>this.request("/public/v1/submit/delete_user_tags",t),this.stampDeleteUserTags=async t=>{let e=this.config.baseUrl+"/public/v1/submit/delete_user_tags",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.deleteUsers=async t=>this.request("/public/v1/submit/delete_users",t),this.stampDeleteUsers=async t=>{let e=this.config.baseUrl+"/public/v1/submit/delete_users",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.emailAuth=async t=>this.request("/public/v1/submit/email_auth",t),this.stampEmailAuth=async t=>{let e=this.config.baseUrl+"/public/v1/submit/email_auth",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.exportPrivateKey=async t=>this.request("/public/v1/submit/export_private_key",t),this.stampExportPrivateKey=async t=>{let e=this.config.baseUrl+"/public/v1/submit/export_private_key",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.exportWallet=async t=>this.request("/public/v1/submit/export_wallet",t),this.stampExportWallet=async t=>{let e=this.config.baseUrl+"/public/v1/submit/export_wallet",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.exportWalletAccount=async t=>this.request("/public/v1/submit/export_wallet_account",t),this.stampExportWalletAccount=async t=>{let e=this.config.baseUrl+"/public/v1/submit/export_wallet_account",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.importPrivateKey=async t=>this.request("/public/v1/submit/import_private_key",t),this.stampImportPrivateKey=async t=>{let e=this.config.baseUrl+"/public/v1/submit/import_private_key",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.importWallet=async t=>this.request("/public/v1/submit/import_wallet",t),this.stampImportWallet=async t=>{let e=this.config.baseUrl+"/public/v1/submit/import_wallet",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.initImportPrivateKey=async t=>this.request("/public/v1/submit/init_import_private_key",t),this.stampInitImportPrivateKey=async t=>{let e=this.config.baseUrl+"/public/v1/submit/init_import_private_key",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.initImportWallet=async t=>this.request("/public/v1/submit/init_import_wallet",t),this.stampInitImportWallet=async t=>{let e=this.config.baseUrl+"/public/v1/submit/init_import_wallet",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.initUserEmailRecovery=async t=>this.request("/public/v1/submit/init_user_email_recovery",t),this.stampInitUserEmailRecovery=async t=>{let e=this.config.baseUrl+"/public/v1/submit/init_user_email_recovery",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.oauth=async t=>this.request("/public/v1/submit/oauth",t),this.stampOauth=async t=>{let e=this.config.baseUrl+"/public/v1/submit/oauth",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.recoverUser=async t=>this.request("/public/v1/submit/recover_user",t),this.stampRecoverUser=async t=>{let e=this.config.baseUrl+"/public/v1/submit/recover_user",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.rejectActivity=async t=>this.request("/public/v1/submit/reject_activity",t),this.stampRejectActivity=async t=>{let e=this.config.baseUrl+"/public/v1/submit/reject_activity",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.removeOrganizationFeature=async t=>this.request("/public/v1/submit/remove_organization_feature",t),this.stampRemoveOrganizationFeature=async t=>{let e=this.config.baseUrl+"/public/v1/submit/remove_organization_feature",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.setOrganizationFeature=async t=>this.request("/public/v1/submit/set_organization_feature",t),this.stampSetOrganizationFeature=async t=>{let e=this.config.baseUrl+"/public/v1/submit/set_organization_feature",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.signRawPayload=async t=>this.request("/public/v1/submit/sign_raw_payload",t),this.stampSignRawPayload=async t=>{let e=this.config.baseUrl+"/public/v1/submit/sign_raw_payload",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.signRawPayloads=async t=>this.request("/public/v1/submit/sign_raw_payloads",t),this.stampSignRawPayloads=async t=>{let e=this.config.baseUrl+"/public/v1/submit/sign_raw_payloads",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.signTransaction=async t=>this.request("/public/v1/submit/sign_transaction",t),this.stampSignTransaction=async t=>{let e=this.config.baseUrl+"/public/v1/submit/sign_transaction",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.updatePolicy=async t=>this.request("/public/v1/submit/update_policy",t),this.stampUpdatePolicy=async t=>{let e=this.config.baseUrl+"/public/v1/submit/update_policy",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.updatePrivateKeyTag=async t=>this.request("/public/v1/submit/update_private_key_tag",t),this.stampUpdatePrivateKeyTag=async t=>{let e=this.config.baseUrl+"/public/v1/submit/update_private_key_tag",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.updateRootQuorum=async t=>this.request("/public/v1/submit/update_root_quorum",t),this.stampUpdateRootQuorum=async t=>{let e=this.config.baseUrl+"/public/v1/submit/update_root_quorum",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.updateUser=async t=>this.request("/public/v1/submit/update_user",t),this.stampUpdateUser=async t=>{let e=this.config.baseUrl+"/public/v1/submit/update_user",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},this.updateUserTag=async t=>this.request("/public/v1/submit/update_user_tag",t),this.stampUpdateUserTag=async t=>{let e=this.config.baseUrl+"/public/v1/submit/update_user_tag",r=JSON.stringify(t),i=await this.stamper.stamp(r);return{body:r,stamp:i,url:e}},!t.baseUrl)throw Error("Missing base URL. Please verify env vars.");this.config=t,this.stamper=e}async request(t,e){let r=this.config.baseUrl+t,n=JSON.stringify(e),s=await this.stamper.stamp(n),o=await i(r,{method:"POST",headers:{[s.stampHeaderName]:s.stampHeaderValue,"X-Client-Version":"@turnkey/http@2.12.2"},body:n,redirect:"follow"});if(!o.ok){let t;try{t=await o.json()}catch(t){throw Error(`${o.status} ${o.statusText}`)}throw new c(t)}return await o.json()}}class d extends Error{constructor(t){let{message:e,cause:r,activityId:i,activityStatus:n,activityType:s}=t;super(e),this.name="TurnkeyActivityError",this.activityId=i??null,this.activityStatus=n??null,this.activityType=s??null,this.cause=r??null}}},47769:function(t,e,r){"use strict";var i,n,s,o;r.d(e,{PX:function(){return n},rr:function(){return a}}),(s=i||(i={})).PublicKeyReady="PUBLIC_KEY_READY",s.InjectCredentialBundle="INJECT_CREDENTIAL_BUNDLE",s.InjectKeyExportBundle="INJECT_KEY_EXPORT_BUNDLE",s.InjectWalletExportBundle="INJECT_WALLET_EXPORT_BUNDLE",s.InjectImportBundle="INJECT_IMPORT_BUNDLE",s.ExtractWalletEncryptedBundle="EXTRACT_WALLET_ENCRYPTED_BUNDLE",s.ExtractKeyEncryptedBundle="EXTRACT_KEY_ENCRYPTED_BUNDLE",s.ApplySettings="APPLY_SETTINGS",s.BundleInjected="BUNDLE_INJECTED",s.EncryptedBundleExtracted="ENCRYPTED_BUNDLE_EXTRACTED",s.SettingsApplied="SETTINGS_APPLIED",s.StampRequest="STAMP_REQUEST",s.Stamp="STAMP",s.Error="ERROR",(o=n||(n={})).Hexadecimal="HEXADECIMAL",o.Solana="SOLANA";class a{constructor(t){if("undefined"==typeof window)throw Error("Cannot initialize iframe in non-browser environment");if(!t.iframeContainer)throw Error("Iframe container cannot be found");if(this.container=t.iframeContainer,this.container.querySelector(`#${t.iframeElementId}`))throw Error(`Iframe element with ID ${t.iframeElementId} already exists`);let e=window.document.createElement("iframe");e.setAttribute("sandbox","allow-scripts allow-same-origin"),e.id=t.iframeElementId,e.src=t.iframeUrl,this.iframe=e;let r=new URL(t.iframeUrl);this.iframeOrigin=r.origin,this.iframePublicKey=null}async init(){return this.container.appendChild(this.iframe),new Promise((t,e)=>{window.addEventListener("message",e=>{e.origin===this.iframeOrigin&&e.data?.type===i.PublicKeyReady&&(this.iframePublicKey=e.data.value,t(e.data.value))},!1)})}clear(){this.iframe.remove()}publicKey(){return this.iframePublicKey}async injectCredentialBundle(t){return new Promise((e,r)=>{this.iframe.contentWindow?.postMessage({type:i.InjectCredentialBundle,value:t},"*"),window.addEventListener("message",t=>{t.origin===this.iframeOrigin&&(t.data?.type===i.BundleInjected&&e(t.data.value),t.data?.type===i.Error&&r(t.data.value))},!1)})}async injectKeyExportBundle(t,e,r){return this.iframe.contentWindow?.postMessage({type:i.InjectKeyExportBundle,value:t,keyFormat:r,organizationId:e},"*"),new Promise((t,e)=>{window.addEventListener("message",r=>{r.origin===this.iframeOrigin&&(r.data?.type===i.BundleInjected&&t(r.data.value),r.data?.type===i.Error&&e(r.data.value))},!1)})}async injectWalletExportBundle(t,e){return this.iframe.contentWindow?.postMessage({type:i.InjectWalletExportBundle,value:t,organizationId:e},"*"),new Promise((t,e)=>{window.addEventListener("message",r=>{r.origin===this.iframeOrigin&&(r.data?.type===i.BundleInjected&&t(r.data.value),r.data?.type===i.Error&&e(r.data.value))},!1)})}async injectImportBundle(t,e,r){return this.iframe.contentWindow?.postMessage({type:i.InjectImportBundle,value:t,organizationId:e,userId:r},"*"),new Promise((t,e)=>{window.addEventListener("message",r=>{r.origin===this.iframeOrigin&&(r.data?.type===i.BundleInjected&&t(r.data.value),r.data?.type===i.Error&&e(r.data.value))},!1)})}async extractWalletEncryptedBundle(){return this.iframe.contentWindow?.postMessage({type:i.ExtractWalletEncryptedBundle},"*"),new Promise((t,e)=>{window.addEventListener("message",r=>{r.origin===this.iframeOrigin&&(r.data?.type===i.EncryptedBundleExtracted&&t(r.data.value),r.data?.type===i.Error&&e(r.data.value))},!1)})}async extractKeyEncryptedBundle(t){return this.iframe.contentWindow?.postMessage({type:i.ExtractKeyEncryptedBundle,keyFormat:t},"*"),new Promise((t,e)=>{window.addEventListener("message",r=>{r.origin===this.iframeOrigin&&(r.data?.type===i.EncryptedBundleExtracted&&t(r.data.value),r.data?.type===i.Error&&e(r.data.value))},!1)})}async applySettings(t){let e=JSON.stringify(t);return this.iframe.contentWindow?.postMessage({type:i.ApplySettings,value:e},"*"),new Promise((t,e)=>{window.addEventListener("message",r=>{r.origin===this.iframeOrigin&&(r.data?.type===i.SettingsApplied&&t(r.data.value),r.data?.type===i.Error&&e(r.data.value))},!1)})}async stamp(t){if(null===this.iframePublicKey)throw Error("null iframe public key. Have you called/awaited .init()?");let e=this.iframeOrigin;return this.iframe.contentWindow?.postMessage({type:i.StampRequest,value:t},"*"),new Promise(function(t,r){window.addEventListener("message",n=>{n.origin===e&&(n.data?.type===i.Stamp&&t({stampHeaderName:"X-Stamp",stampHeaderValue:n.data.value}),n.data?.type===i.Error&&r(n.data.value))},!1)})}}},53942:function(t,e,r){"use strict";function i(t){let e=new Uint8Array(t),r="";for(let t of e)r+=String.fromCharCode(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}r.d(e,{S:function(){return d}});let n="copy",s="convert";function o(t){return{required:!0,schema:t}}function a(t){return{required:!1,schema:t}}let l={appid:a(n),appidExclude:a(n),credProps:a(n)},u={type:o(n),id:o(n),rawId:o(s),authenticatorAttachment:a(n),response:o({clientDataJSON:o(s),authenticatorData:o(s),signature:o(s),userHandle:o(s)}),clientExtensionResults:{required:!0,schema:l,derive:t=>t.getClientExtensionResults()}};async function c(t){let e=await navigator.credentials.get(t);return e.toJSON=()=>(function t(e,r,i){if(r===n)return i;if(r===s)return e(i);if(r instanceof Array)return i.map(i=>t(e,r[0],i));if(r instanceof Object){let n={};for(let[s,o]of Object.entries(r)){if(o.derive){let t=o.derive(i);void 0!==t&&(i[s]=t)}if(!(s in i)){if(o.required)throw Error(`Missing key: ${s}`);continue}if(null==i[s]){n[s]=null;continue}n[s]=t(e,o.schema,i[s])}return n}})(i,u,e),e}var h=r(95088);class d{constructor(t){this.rpId=t.rpId,this.timeout=t.timeout||3e5,this.userVerification=t.userVerification||"preferred",this.allowCredentials=t.allowCredentials||[]}async stamp(t){let e=function(t){let e=(0,h.j)().update(t).digest("hex");return new TextEncoder().encode(e)}(t),r={publicKey:{rpId:this.rpId,challenge:e,allowCredentials:this.allowCredentials,timeout:this.timeout,userVerification:this.userVerification}},i=(await c(r)).toJSON();return{stampHeaderName:"X-Stamp-Webauthn",stampHeaderValue:JSON.stringify({authenticatorData:i.response.authenticatorData,clientDataJson:i.response.clientDataJSON,credentialId:i.id,signature:i.response.signature})}}}},20034:function(t,e,r){"use strict";r.d(e,{Ey:function(){return l},XY:function(){return o}});var i=r(46856),n=r(82580),s=class extends n.v{socket;constructor(t,e,r){super(),this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=t=>this.emit("message",t.data),this.socket.onerror=t=>this.emit("error",t),this.socket.onclose=t=>{this.emit("close",t.code,t.reason)}}send(t,e,r){let i=r||e;try{this.socket.send(t),i()}catch(t){i(t)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function o(t,e){return new s(t,e)}var a=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},l=class extends n.v{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:n=1e3,max_reconnects:s=5,...o}={},l,u){super(),this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=n,this.max_reconnects=s,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=l||(()=>++this.rpc_id),u?this.dataPack=u:this.dataPack=new a,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,i){return i||"object"!=typeof r||(i=r,r=null),new Promise((n,s)=>{if(!this.ready)return s(Error("socket not ready"));let o=this.generate_request_id(t,e);this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:t,params:e||void 0,id:o}),i,t=>{if(t)return s(t);this.queue[o]={promise:[n,s]},r&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],s(Error("reply timeout"))},r))})})}async login(t){let e=await this.call("rpc.login",t);if(!e)throw Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,i)=>{if(!this.ready)return i(Error("socket not ready"));this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:t,params:e}),t=>{if(t)return i(t);r()})})}async subscribe(t){"string"==typeof t&&(t=[t]);let e=await this.call("rpc.on",t);if("string"==typeof t&&"ok"!==e[t])throw Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){"string"==typeof t&&(t=[t]);let e=await this.call("rpc.off",t);if("string"==typeof t&&"ok"!==e[t])throw Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=i.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch(t){return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);let e=[t.notification];if(t.params.constructor===Object)e.push(t.params);else for(let r=0;r<t.params.length;r++)e.push(t.params[r]);return Promise.resolve().then(()=>{this.emit.apply(this,e)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}}},95088:function(t,e,r){"use strict";let i;r.d(e,{j:function(){return o}});let n=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],s={sha256:1};function o(t){if(t&&!s[t]&&!s[t.toLowerCase()])throw Error("Digest method not supported");return new a}class a{constructor(){this.A=1779033703,this.B=-1150833019,this.C=1013904242,this.D=-1521486534,this.E=1359893119,this.F=-1694144372,this.G=528734635,this.H=1541459225,this._size=0,this._sp=0,(!i||u>=8e3)&&(i=new ArrayBuffer(8e3),u=0),this._byte=new Uint8Array(i,u,80),this._word=new Int32Array(i,u,20),u+=80}update(t){if("string"==typeof t)return this._utf8(t);if(null==t)throw TypeError("Invalid type: "+typeof t);let e=t.byteOffset,r=t.byteLength,i=r/64|0,n=0;if(i&&!(3&e)&&!(this._size%64)){let r=new Int32Array(t.buffer,e,16*i);for(;i--;)this._int32(r,n>>2),n+=64;this._size+=n}if(1!==t.BYTES_PER_ELEMENT&&t.buffer){let i=new Uint8Array(t.buffer,e+n,r-n);return this._uint8(i)}return n===r?this:this._uint8(t,n)}_uint8(t,e){let{_byte:r,_word:i}=this,n=t.length;for(e|=0;e<n;){let s=this._size%64,o=s;for(;e<n&&o<64;)r[o++]=t[e++];o>=64&&this._int32(i),this._size+=o-s}return this}_utf8(t){let{_byte:e,_word:r}=this,i=t.length,n=this._sp;for(let s=0;s<i;){let o=this._size%64,a=o;for(;s<i&&a<64;){let r=0|t.charCodeAt(s++);r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<55296||r>57343?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):n?(r=((1023&n)<<10)+(1023&r)+65536,e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r,n=0):n=r}a>=64&&(this._int32(r),r[0]=r[16]),this._size+=a-o}return this._sp=n,this}_int32(t,e){let{A:r,B:i,C:s,D:o,E:a,F:u,G:c,H:v}=this,w=0;for(e|=0;w<16;)l[w++]=h(t[e++]);for(w=16;w<64;w++)l[w]=m(l[w-2])+l[w-7]+g(l[w-15])+l[w-16]|0;for(w=0;w<64;w++){let t=v+y(a)+d(a,u,c)+n[w]+l[w]|0,e=p(r)+f(r,i,s)|0;v=c,c=u,u=a,a=o+t|0,o=s,s=i,i=r,r=t+e|0}this.A=r+this.A|0,this.B=i+this.B|0,this.C=s+this.C|0,this.D=o+this.D|0,this.E=a+this.E|0,this.F=u+this.F|0,this.G=c+this.G|0,this.H=v+this.H|0}digest(t){let{_byte:e,_word:r}=this,i=this._size%64|0;for(e[i++]=128;3&i;)e[i++]=0;if((i>>=2)>14){for(;i<16;)r[i++]=0;i=0,this._int32(r)}for(;i<16;)r[i++]=0;let n=8*this._size,s=(4294967295&n)>>>0,o=(n-s)/4294967296;return o&&(r[14]=h(o)),s&&(r[15]=h(s)),this._int32(r),"hex"===t?this._hex():this._bin()}_hex(){let{A:t,B:e,C:r,D:i,E:n,F:s,G:o,H:a}=this;return c(t)+c(e)+c(r)+c(i)+c(n)+c(s)+c(o)+c(a)}_bin(){let{A:t,B:e,C:r,D:i,E:n,F:s,G:o,H:a,_byte:l,_word:u}=this;return u[0]=h(t),u[1]=h(e),u[2]=h(r),u[3]=h(i),u[4]=h(n),u[5]=h(s),u[6]=h(o),u[7]=h(a),l.slice(0,32)}}let l=new Int32Array(64),u=0,c=t=>(t+4294967296).toString(16).substr(-8),h=254===new Uint8Array(new Uint16Array([65279]).buffer)[0]?t=>t:t=>t<<24&4278190080|t<<8&16711680|t>>8&65280|t>>24&255,d=(t,e,r)=>r^t&(e^r),f=(t,e,r)=>t&e|r&(t|e),p=t=>(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),y=t=>(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7),g=t=>(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3,m=t=>(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10},68340:function(t,e,r){"use strict";r.d(e,{AG:function(){return m},G0:function(){return S},IM:function(){return b},IX:function(){return f},O7:function(){return p},Rx:function(){return v},Ue:function(){return u},Yj:function(){return d},Z_:function(){return _},_4:function(){return x},bc:function(){return E},dt:function(){return A},eE:function(){return y},i0:function(){return g},jt:function(){return w},oQ:function(){return T}});class i extends TypeError{constructor(t,e){let r;let{message:i,explanation:n,...s}=t,{path:o}=t,a=0===o.length?i:`At path: ${o.join(".")} -- ${i}`;super(n??a),null!=n&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function n(t){return"object"==typeof t&&null!=t}function s(t){return"symbol"==typeof t?t.toString():"string"==typeof t?JSON.stringify(t):`${t}`}function*o(t,e,r,i){var o;for(let a of(n(o=t)&&"function"==typeof o[Symbol.iterator]||(t=[t]),t)){let t=function(t,e,r,i){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});let{path:n,branch:o}=e,{type:a}=r,{refinement:l,message:u=`Expected a value of type \`${a}\`${l?` with refinement \`${l}\``:""}, but received: \`${s(i)}\``}=t;return{value:i,type:a,refinement:l,key:n[n.length-1],path:n,branch:o,...t,message:u}}(a,e,r,i);t&&(yield t)}}function*a(t,e,r={}){let{path:i=[],branch:s=[t],coerce:o=!1,mask:l=!1}=r,u={path:i,branch:s};if(o&&(t=e.coercer(t,u),l&&"type"!==e.type&&n(e.schema)&&n(t)&&!Array.isArray(t)))for(let r in t)void 0===e.schema[r]&&delete t[r];let c="valid";for(let i of e.validator(t,u))i.explanation=r.message,c="not_valid",yield[i,void 0];for(let[h,d,f]of e.entries(t,u))for(let e of a(d,f,{path:void 0===h?i:[...i,h],branch:void 0===h?s:[...s,d],coerce:o,mask:l,message:r.message}))e[0]?(c=null!=e[0].refinement?"not_refined":"not_valid",yield[e[0],void 0]):o&&(d=e[1],void 0===h?t=d:t instanceof Map?t.set(h,d):t instanceof Set?t.add(d):n(t)&&(void 0!==d||h in t)&&(t[h]=d));if("not_valid"!==c)for(let i of e.refiner(t,u))i.explanation=r.message,c="not_refined",yield[i,void 0];"valid"===c&&(yield[void 0,t])}class l{constructor(t){let{type:e,schema:r,validator:i,refiner:n,coercer:s=t=>t,entries:a=function*(){}}=t;this.type=e,this.schema=r,this.entries=a,this.coercer=s,i?this.validator=(t,e)=>o(i(t,e),e,this,t):this.validator=()=>[],n?this.refiner=(t,e)=>o(n(t,e),e,this,t):this.refiner=()=>[]}assert(t,e){return function(t,e,r){let i=c(t,e,{message:r});if(i[0])throw i[0]}(t,this,e)}create(t,e){return u(t,this,e)}is(t){return!c(t,this)[0]}mask(t,e){return function(t,e,r){let i=c(t,e,{coerce:!0,mask:!0,message:r});if(!i[0])return i[1];throw i[0]}(t,this,e)}validate(t,e={}){return c(t,this,e)}}function u(t,e,r){let i=c(t,e,{coerce:!0,message:r});if(!i[0])return i[1];throw i[0]}function c(t,e,r={}){let n=a(t,e,r),s=function(t){let{done:e,value:r}=t.next();return e?void 0:r}(n);return s[0]?[new i(s[0],function*(){for(let t of n)t[0]&&(yield t[0])}),void 0]:[void 0,s[1]]}function h(t,e){return new l({type:t,schema:null,validator:e})}function d(){return h("any",()=>!0)}function f(t){return new l({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(let[r,i]of e.entries())yield[r,i,t]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||`Expected an array value, but received: ${s(t)}`})}function p(){return h("boolean",t=>"boolean"==typeof t)}function y(t){return h("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${s(e)}`)}function g(t){let e=s(t),r=typeof t;return new l({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${s(r)}`})}function m(t){return new l({...t,validator:(e,r)=>null===e||t.validator(e,r),refiner:(e,r)=>null===e||t.refiner(e,r)})}function v(){return h("number",t=>"number"==typeof t&&!isNaN(t)||`Expected a number, but received: ${s(t)}`)}function w(t){return new l({...t,validator:(e,r)=>void 0===e||t.validator(e,r),refiner:(e,r)=>void 0===e||t.refiner(e,r)})}function b(t,e){return new l({type:"record",schema:null,*entries(r){if(n(r))for(let i in r){let n=r[i];yield[i,i,t],yield[i,n,e]}},validator:t=>n(t)||`Expected an object, but received: ${s(t)}`})}function _(){return h("string",t=>"string"==typeof t||`Expected a string, but received: ${s(t)}`)}function E(t){let e=h("never",()=>!1);return new l({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let i=Math.max(t.length,r.length);for(let n=0;n<i;n++)yield[n,r[n],t[n]||e]}},validator:t=>Array.isArray(t)||`Expected an array, but received: ${s(t)}`})}function A(t){let e=Object.keys(t);return new l({type:"type",schema:t,*entries(r){if(n(r))for(let i of e)yield[i,r[i],t[i]]},validator:t=>n(t)||`Expected an object, but received: ${s(t)}`,coercer:t=>n(t)?{...t}:t})}function S(t){let e=t.map(t=>t.type).join(" | ");return new l({type:"union",schema:null,coercer(e){for(let r of t){let[t,i]=r.validate(e,{coerce:!0});if(!t)return i}return e},validator(r,i){let n=[];for(let e of t){let[...t]=a(r,e,i),[s]=t;if(!s[0])return[];for(let[e]of t)e&&n.push(e)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${s(r)}`,...n]}})}function x(){return h("unknown",()=>!0)}function T(t,e,r){return new l({...t,coercer:(i,n)=>c(i,e)[0]?t.coercer(i,n):t.coercer(r(i,n),n)})}},75296:function(t,e,r){"use strict";r.d(e,{AG:function(){return v},G0:function(){return x},IM:function(){return _},IX:function(){return p},O7:function(){return y},Rx:function(){return w},Ue:function(){return c},Yj:function(){return f},Z_:function(){return E},_4:function(){return T},bc:function(){return A},dt:function(){return S},eE:function(){return g},i0:function(){return m},jt:function(){return b},oQ:function(){return k}});class i extends TypeError{constructor(t,e){let r;let{message:i,explanation:n,...s}=t,{path:o}=t,a=0===o.length?i:`At path: ${o.join(".")} -- ${i}`;super(n??a),null!=n&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function n(t){return"object"==typeof t&&null!=t}function s(t){return n(t)&&!Array.isArray(t)}function o(t){return"symbol"==typeof t?t.toString():"string"==typeof t?JSON.stringify(t):`${t}`}function*a(t,e,r,i){var s;for(let a of(n(s=t)&&"function"==typeof s[Symbol.iterator]||(t=[t]),t)){let t=function(t,e,r,i){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});let{path:n,branch:s}=e,{type:a}=r,{refinement:l,message:u=`Expected a value of type \`${a}\`${l?` with refinement \`${l}\``:""}, but received: \`${o(i)}\``}=t;return{value:i,type:a,refinement:l,key:n[n.length-1],path:n,branch:s,...t,message:u}}(a,e,r,i);t&&(yield t)}}function*l(t,e,r={}){let{path:i=[],branch:s=[t],coerce:o=!1,mask:a=!1}=r,u={path:i,branch:s,mask:a};o&&(t=e.coercer(t,u));let c="valid";for(let i of e.validator(t,u))i.explanation=r.message,c="not_valid",yield[i,void 0];for(let[h,d,f]of e.entries(t,u))for(let e of l(d,f,{path:void 0===h?i:[...i,h],branch:void 0===h?s:[...s,d],coerce:o,mask:a,message:r.message}))e[0]?(c=null!=e[0].refinement?"not_refined":"not_valid",yield[e[0],void 0]):o&&(d=e[1],void 0===h?t=d:t instanceof Map?t.set(h,d):t instanceof Set?t.add(d):n(t)&&(void 0!==d||h in t)&&(t[h]=d));if("not_valid"!==c)for(let i of e.refiner(t,u))i.explanation=r.message,c="not_refined",yield[i,void 0];"valid"===c&&(yield[void 0,t])}class u{constructor(t){let{type:e,schema:r,validator:i,refiner:n,coercer:s=t=>t,entries:o=function*(){}}=t;this.type=e,this.schema=r,this.entries=o,this.coercer=s,i?this.validator=(t,e)=>a(i(t,e),e,this,t):this.validator=()=>[],n?this.refiner=(t,e)=>a(n(t,e),e,this,t):this.refiner=()=>[]}assert(t,e){return function(t,e,r){let i=h(t,e,{message:r});if(i[0])throw i[0]}(t,this,e)}create(t,e){return c(t,this,e)}is(t){return!h(t,this)[0]}mask(t,e){return function(t,e,r){let i=h(t,e,{coerce:!0,mask:!0,message:r});if(!i[0])return i[1];throw i[0]}(t,this,e)}validate(t,e={}){return h(t,this,e)}}function c(t,e,r){let i=h(t,e,{coerce:!0,message:r});if(!i[0])return i[1];throw i[0]}function h(t,e,r={}){let n=l(t,e,r),s=function(t){let{done:e,value:r}=t.next();return e?void 0:r}(n);return s[0]?[new i(s[0],function*(){for(let t of n)t[0]&&(yield t[0])}),void 0]:[void 0,s[1]]}function d(t,e){return new u({type:t,schema:null,validator:e})}function f(){return d("any",()=>!0)}function p(t){return new u({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(let[r,i]of e.entries())yield[r,i,t]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||`Expected an array value, but received: ${o(t)}`})}function y(){return d("boolean",t=>"boolean"==typeof t)}function g(t){return d("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${o(e)}`)}function m(t){let e=o(t),r=typeof t;return new u({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${o(r)}`})}function v(t){return new u({...t,validator:(e,r)=>null===e||t.validator(e,r),refiner:(e,r)=>null===e||t.refiner(e,r)})}function w(){return d("number",t=>"number"==typeof t&&!isNaN(t)||`Expected a number, but received: ${o(t)}`)}function b(t){return new u({...t,validator:(e,r)=>void 0===e||t.validator(e,r),refiner:(e,r)=>void 0===e||t.refiner(e,r)})}function _(t,e){return new u({type:"record",schema:null,*entries(r){if(n(r))for(let i in r){let n=r[i];yield[i,i,t],yield[i,n,e]}},validator:t=>s(t)||`Expected an object, but received: ${o(t)}`,coercer:t=>s(t)?{...t}:t})}function E(){return d("string",t=>"string"==typeof t||`Expected a string, but received: ${o(t)}`)}function A(t){let e=d("never",()=>!1);return new u({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let i=Math.max(t.length,r.length);for(let n=0;n<i;n++)yield[n,r[n],t[n]||e]}},validator:t=>Array.isArray(t)||`Expected an array, but received: ${o(t)}`,coercer:t=>Array.isArray(t)?t.slice():t})}function S(t){let e=Object.keys(t);return new u({type:"type",schema:t,*entries(r){if(n(r))for(let i of e)yield[i,r[i],t[i]]},validator:t=>s(t)||`Expected an object, but received: ${o(t)}`,coercer:t=>s(t)?{...t}:t})}function x(t){let e=t.map(t=>t.type).join(" | ");return new u({type:"union",schema:null,coercer(e,r){for(let i of t){let[t,n]=i.validate(e,{coerce:!0,mask:r.mask});if(!t)return n}return e},validator(r,i){let n=[];for(let e of t){let[...t]=l(r,e,i),[s]=t;if(!s[0])return[];for(let[e]of t)e&&n.push(e)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${o(r)}`,...n]}})}function T(){return d("unknown",()=>!0)}function k(t,e,r){return new u({...t,coercer:(i,n)=>h(i,e)[0]?t.coercer(i,n):t.coercer(r(i,n),n)})}}}]);